(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{686:function(s,t,a){"use strict";a.r(t);var n=a(8),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"client-id-认证"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#client-id-认证"}},[s._v("#")]),s._v(" Client ID 认证")]),s._v(" "),a("p",[s._v("Client ID 认证使用配置文件预设客户端Client ID 与密码，支持通过 HTTP API 管理认证数据。")]),s._v(" "),a("p",[s._v("Client ID 认证不依赖外部数据源，使用上足够简单轻量。")]),s._v(" "),a("p",[s._v("插件：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("emqx_auth_clientid\n")])])]),a("h2",{attrs:{id:"哈希方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#哈希方法"}},[s._v("#")]),s._v(" 哈希方法")]),s._v(" "),a("p",[s._v("Client ID 认证默认使用 sha256 进行密码哈希加密，可在 "),a("code",[s._v("etc/plugins/emqx_auth_clientid.conf")]),s._v(" 中更改：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# etc/plugins/emqx_auth_clientid.conf")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Value: plain | md5 | sha | sha256 ")]),s._v("\nauth.client.password_hash "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" sha256\n")])])]),a("p",[s._v("配置"),a("RouterLink",{attrs:{to:"/zh/backend/emqx/advanced/auth.html#加盐规则与哈希方法"}},[s._v("哈希方法")]),s._v("后，新增的预设认证数据与通过 HTTP API 添加的认证数据将以哈希密文存储在 EMQ X 内置数据库中。")],1),s._v(" "),a("h2",{attrs:{id:"预设认证数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#预设认证数据"}},[s._v("#")]),s._v(" 预设认证数据")]),s._v(" "),a("p",[s._v("可以通过配置文件预设认证数据，编辑配置文件："),a("code",[s._v("etc/plugins/emqx_auth_clientid.conf")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# etc/plugins/emqx_auth_clientid.conf")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 第一组认证数据")]),s._v("\nauth.client.1.clientid "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" admin_client\nauth.client.1.password "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" public\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 第二组认证数据")]),s._v("\nauth.clientid.2.clientid "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" wivwiv_client\nauth.clientid.2.password "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" public\n")])])]),a("p",[s._v("插件启动时将读取预设认证数据并加载到 EMQ X 内置数据库中，节点上的认证数据会在此阶段同步至集群中。")]),s._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[s._v("警告")]),s._v(" "),a("p",[s._v("预设认证数据在配置文件中使用了明文密码，出于安全性与可维护性考虑应当避免使用该功能。")]),s._v(" "),a("p",[s._v("预设认证数据无法通过 API 修改、删除，请慎用。")])]),s._v(" "),a("h2",{attrs:{id:"使用-http-api-管理认证数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-http-api-管理认证数据"}},[s._v("#")]),s._v(" 使用 HTTP API 管理认证数据")]),s._v(" "),a("h3",{attrs:{id:"添加认证数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加认证数据"}},[s._v("#")]),s._v(" 添加认证数据")]),s._v(" "),a("p",[s._v("API 定义：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Request")]),s._v("\nPOST api/v4/auth_clientid\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"clientid"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"emqx_c"')]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"password"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"emqx_p"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Response")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"code"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("使用 POST 请求添加 clientid 为 "),a("code",[s._v("emqx_c")]),s._v(" password 为 "),a("code",[s._v("emqx_p")]),s._v(" 的认证信息，返回信息中 "),a("code",[s._v("code = 0")]),s._v(" 即为成功。")]),s._v(" "),a("h3",{attrs:{id:"查看已经添加的认证数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看已经添加的认证数据"}},[s._v("#")]),s._v(" 查看已经添加的认证数据")]),s._v(" "),a("p",[s._v("API 定义：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Request")]),s._v("\nGET api/v4/auth_clientid\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Response")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"code"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"data"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"emqx_c"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h3",{attrs:{id:"更改指定-client-id-的密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更改指定-client-id-的密码"}},[s._v("#")]),s._v(" 更改指定 Client ID 的密码")]),s._v(" "),a("p",[s._v("指定 Client ID，传递新密码进行更改，再次连接时需要使用新密码进行连接：")]),s._v(" "),a("p",[s._v("API 定义：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Request")]),s._v("\nPUT api/v4/auth_clientid/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${clientid}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"password"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"emqx_new_p"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Response")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"code"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h3",{attrs:{id:"查看指定-client-id-信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看指定-client-id-信息"}},[s._v("#")]),s._v(" 查看指定 Client ID 信息")]),s._v(" "),a("p",[s._v("指定 Client ID，查看相关 Client ID、密码信息，注意此处返回的密码是使用配置文件指定哈希方式加密后的密码：")]),s._v(" "),a("p",[s._v("API 定义：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Request")]),s._v("\nGET api/v4/auth_clientid/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${clientid}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Response")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"code"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"data"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"clientid"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"emqx_c"')]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"password"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"091dc8753347e7dc5d348508fe6323735eecdb84fa800548870158117af8a0c0"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h3",{attrs:{id:"删除认证数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除认证数据"}},[s._v("#")]),s._v(" 删除认证数据")]),s._v(" "),a("p",[s._v("删除指定 Client ID：")]),s._v(" "),a("p",[s._v("API 定义：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Request")]),s._v("\nDELETE api/v4/auth_clientid/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${clientid}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Response")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"code"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);