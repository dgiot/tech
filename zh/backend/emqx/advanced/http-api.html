<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HTTP API | 数蛙技术团队</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
    <script type="text/javascript" src="https://s9.cnzz.com/z_stat.php?id=1279876880&amp;web_id=1279876880"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    <meta name="description" content="数蛙科技是一家致力于提供物联网垂直领域应用使能平台及解决方案的创新型公司。">
    <meta name="referrer" content="never">
    
    <link rel="preload" href="/assets/css/0.styles.30e04dfa.css" as="style"><link rel="preload" href="/assets/js/app.ec7e693f.js" as="script"><link rel="preload" href="/assets/js/7.5b24c3a5.js" as="script"><link rel="preload" href="/assets/js/5.7fd7e714.js" as="script"><link rel="preload" href="/assets/js/69.c620faeb.js" as="script"><link rel="prefetch" href="/assets/js/10.fd5799f1.js"><link rel="prefetch" href="/assets/js/100.ae596a09.js"><link rel="prefetch" href="/assets/js/101.569acbff.js"><link rel="prefetch" href="/assets/js/102.be7719aa.js"><link rel="prefetch" href="/assets/js/103.7cf79023.js"><link rel="prefetch" href="/assets/js/104.994cd840.js"><link rel="prefetch" href="/assets/js/105.155e631f.js"><link rel="prefetch" href="/assets/js/106.e73851f2.js"><link rel="prefetch" href="/assets/js/107.c8f3cf35.js"><link rel="prefetch" href="/assets/js/108.da83fd6b.js"><link rel="prefetch" href="/assets/js/109.f42784f2.js"><link rel="prefetch" href="/assets/js/11.dda97fd3.js"><link rel="prefetch" href="/assets/js/110.a11df775.js"><link rel="prefetch" href="/assets/js/111.8a79b24c.js"><link rel="prefetch" href="/assets/js/112.7181007e.js"><link rel="prefetch" href="/assets/js/113.f39d467f.js"><link rel="prefetch" href="/assets/js/114.f156f950.js"><link rel="prefetch" href="/assets/js/115.f3c3d2e1.js"><link rel="prefetch" href="/assets/js/116.9a2707dd.js"><link rel="prefetch" href="/assets/js/117.306e8a17.js"><link rel="prefetch" href="/assets/js/118.8e1b6a88.js"><link rel="prefetch" href="/assets/js/119.a5613a33.js"><link rel="prefetch" href="/assets/js/12.24537a04.js"><link rel="prefetch" href="/assets/js/120.beb54617.js"><link rel="prefetch" href="/assets/js/121.1e5d175c.js"><link rel="prefetch" href="/assets/js/122.ab6728c5.js"><link rel="prefetch" href="/assets/js/123.4f40b023.js"><link rel="prefetch" href="/assets/js/124.5ac1bbd2.js"><link rel="prefetch" href="/assets/js/125.949b91d3.js"><link rel="prefetch" href="/assets/js/126.ab4cf4ab.js"><link rel="prefetch" href="/assets/js/127.95defafc.js"><link rel="prefetch" href="/assets/js/128.cac63a42.js"><link rel="prefetch" href="/assets/js/129.4a8f85fb.js"><link rel="prefetch" href="/assets/js/13.ce23de6c.js"><link rel="prefetch" href="/assets/js/130.f02c34eb.js"><link rel="prefetch" href="/assets/js/131.fc4aa871.js"><link rel="prefetch" href="/assets/js/132.0828bb72.js"><link rel="prefetch" href="/assets/js/133.1447da23.js"><link rel="prefetch" href="/assets/js/134.44c5fbaf.js"><link rel="prefetch" href="/assets/js/135.0f7ed0f0.js"><link rel="prefetch" href="/assets/js/136.2801c3b5.js"><link rel="prefetch" href="/assets/js/137.b76d4955.js"><link rel="prefetch" href="/assets/js/138.164771f3.js"><link rel="prefetch" href="/assets/js/139.ed7eae03.js"><link rel="prefetch" href="/assets/js/14.21133967.js"><link rel="prefetch" href="/assets/js/140.3af3475f.js"><link rel="prefetch" href="/assets/js/141.76d2ffe9.js"><link rel="prefetch" href="/assets/js/142.98a1a5f3.js"><link rel="prefetch" href="/assets/js/143.54bb7c6d.js"><link rel="prefetch" href="/assets/js/144.564404b7.js"><link rel="prefetch" href="/assets/js/145.c2413af9.js"><link rel="prefetch" href="/assets/js/146.3309fbdb.js"><link rel="prefetch" href="/assets/js/147.08add471.js"><link rel="prefetch" href="/assets/js/148.2279bab4.js"><link rel="prefetch" href="/assets/js/149.84bf5a8c.js"><link rel="prefetch" href="/assets/js/15.bdcbdeb1.js"><link rel="prefetch" href="/assets/js/150.8c88c252.js"><link rel="prefetch" href="/assets/js/151.6718112f.js"><link rel="prefetch" href="/assets/js/152.13eafc4c.js"><link rel="prefetch" href="/assets/js/153.89667eb8.js"><link rel="prefetch" href="/assets/js/154.915c26d9.js"><link rel="prefetch" href="/assets/js/155.bae26920.js"><link rel="prefetch" href="/assets/js/156.e90f45b1.js"><link rel="prefetch" href="/assets/js/157.7a5831e8.js"><link rel="prefetch" href="/assets/js/158.dfdb58c2.js"><link rel="prefetch" href="/assets/js/159.fb60ab1b.js"><link rel="prefetch" href="/assets/js/16.9c85aa78.js"><link rel="prefetch" href="/assets/js/160.7b69951e.js"><link rel="prefetch" href="/assets/js/161.b6f0f5f0.js"><link rel="prefetch" href="/assets/js/162.d26b64df.js"><link rel="prefetch" href="/assets/js/163.81d9c7dd.js"><link rel="prefetch" href="/assets/js/164.753c4f58.js"><link rel="prefetch" href="/assets/js/165.e4ed93e4.js"><link rel="prefetch" href="/assets/js/166.85c04904.js"><link rel="prefetch" href="/assets/js/167.e27345a7.js"><link rel="prefetch" href="/assets/js/168.9113a522.js"><link rel="prefetch" href="/assets/js/169.310a95fe.js"><link rel="prefetch" href="/assets/js/17.d0e5fdd9.js"><link rel="prefetch" href="/assets/js/170.c2edad06.js"><link rel="prefetch" href="/assets/js/171.2f169a5b.js"><link rel="prefetch" href="/assets/js/172.72346498.js"><link rel="prefetch" href="/assets/js/173.0ffd20f5.js"><link rel="prefetch" href="/assets/js/174.6744257d.js"><link rel="prefetch" href="/assets/js/175.591a9339.js"><link rel="prefetch" href="/assets/js/176.d365c399.js"><link rel="prefetch" href="/assets/js/177.13df7baf.js"><link rel="prefetch" href="/assets/js/178.ed5d5630.js"><link rel="prefetch" href="/assets/js/179.675740a6.js"><link rel="prefetch" href="/assets/js/18.1e077813.js"><link rel="prefetch" href="/assets/js/180.678d7e68.js"><link rel="prefetch" href="/assets/js/181.4ba0bb67.js"><link rel="prefetch" href="/assets/js/182.aeab58f4.js"><link rel="prefetch" href="/assets/js/183.7106f458.js"><link rel="prefetch" href="/assets/js/184.160c6e2f.js"><link rel="prefetch" href="/assets/js/185.d50f5234.js"><link rel="prefetch" href="/assets/js/186.a203bbcc.js"><link rel="prefetch" href="/assets/js/187.e51b9949.js"><link rel="prefetch" href="/assets/js/188.7a0944a0.js"><link rel="prefetch" href="/assets/js/189.922e11e7.js"><link rel="prefetch" href="/assets/js/19.35e1df9d.js"><link rel="prefetch" href="/assets/js/190.0276cc15.js"><link rel="prefetch" href="/assets/js/191.565e59d4.js"><link rel="prefetch" href="/assets/js/192.c5217041.js"><link rel="prefetch" href="/assets/js/193.ddd13b9e.js"><link rel="prefetch" href="/assets/js/194.d8ec2873.js"><link rel="prefetch" href="/assets/js/195.ef2c7907.js"><link rel="prefetch" href="/assets/js/196.b85d34dc.js"><link rel="prefetch" href="/assets/js/197.1a9c35b1.js"><link rel="prefetch" href="/assets/js/198.797c018a.js"><link rel="prefetch" href="/assets/js/199.9e7ef981.js"><link rel="prefetch" href="/assets/js/20.4fe3eafd.js"><link rel="prefetch" href="/assets/js/200.86157b37.js"><link rel="prefetch" href="/assets/js/201.9296eaed.js"><link rel="prefetch" href="/assets/js/202.a1762f9c.js"><link rel="prefetch" href="/assets/js/203.84ea2b59.js"><link rel="prefetch" href="/assets/js/204.4f0bdd2a.js"><link rel="prefetch" href="/assets/js/205.f743b92b.js"><link rel="prefetch" href="/assets/js/206.0a4dfcbf.js"><link rel="prefetch" href="/assets/js/207.3e434abd.js"><link rel="prefetch" href="/assets/js/208.9a9a39ca.js"><link rel="prefetch" href="/assets/js/209.20938591.js"><link rel="prefetch" href="/assets/js/21.4c7c669f.js"><link rel="prefetch" href="/assets/js/210.87d6c3f5.js"><link rel="prefetch" href="/assets/js/211.2bb1dd4b.js"><link rel="prefetch" href="/assets/js/212.84a2a6af.js"><link rel="prefetch" href="/assets/js/213.26e8fa15.js"><link rel="prefetch" href="/assets/js/214.adab757d.js"><link rel="prefetch" href="/assets/js/215.a325bbbc.js"><link rel="prefetch" href="/assets/js/216.a68c6add.js"><link rel="prefetch" href="/assets/js/217.b48d5fda.js"><link rel="prefetch" href="/assets/js/218.fa956510.js"><link rel="prefetch" href="/assets/js/219.071ce550.js"><link rel="prefetch" href="/assets/js/22.3ef6a93c.js"><link rel="prefetch" href="/assets/js/220.78ba746a.js"><link rel="prefetch" href="/assets/js/221.5c824244.js"><link rel="prefetch" href="/assets/js/222.ed0216f4.js"><link rel="prefetch" href="/assets/js/223.ef86bb8b.js"><link rel="prefetch" href="/assets/js/224.7fe2eb63.js"><link rel="prefetch" href="/assets/js/225.f9428154.js"><link rel="prefetch" href="/assets/js/226.b894bf69.js"><link rel="prefetch" href="/assets/js/227.5a4f5ded.js"><link rel="prefetch" href="/assets/js/228.5625b3f3.js"><link rel="prefetch" href="/assets/js/229.7f1f1370.js"><link rel="prefetch" href="/assets/js/23.6b5fa646.js"><link rel="prefetch" href="/assets/js/230.3916f8b7.js"><link rel="prefetch" href="/assets/js/231.17e2a931.js"><link rel="prefetch" href="/assets/js/232.7e031a61.js"><link rel="prefetch" href="/assets/js/233.407da6c5.js"><link rel="prefetch" href="/assets/js/234.42b8e2b3.js"><link rel="prefetch" href="/assets/js/235.0c6ded6d.js"><link rel="prefetch" href="/assets/js/236.6b4c805d.js"><link rel="prefetch" href="/assets/js/237.6933792f.js"><link rel="prefetch" href="/assets/js/238.fdc46a80.js"><link rel="prefetch" href="/assets/js/239.86a5610a.js"><link rel="prefetch" href="/assets/js/24.3e903033.js"><link rel="prefetch" href="/assets/js/240.087e7c04.js"><link rel="prefetch" href="/assets/js/241.0668e083.js"><link rel="prefetch" href="/assets/js/242.72295ce3.js"><link rel="prefetch" href="/assets/js/243.28f57e99.js"><link rel="prefetch" href="/assets/js/244.fc344f5f.js"><link rel="prefetch" href="/assets/js/245.024ed20a.js"><link rel="prefetch" href="/assets/js/246.9c7bb1a9.js"><link rel="prefetch" href="/assets/js/247.aa12af4a.js"><link rel="prefetch" href="/assets/js/248.f8c5c852.js"><link rel="prefetch" href="/assets/js/249.56ae27d3.js"><link rel="prefetch" href="/assets/js/25.ac3e6a97.js"><link rel="prefetch" href="/assets/js/250.f8c8a4cc.js"><link rel="prefetch" href="/assets/js/251.5363a223.js"><link rel="prefetch" href="/assets/js/252.e8a97afc.js"><link rel="prefetch" href="/assets/js/253.71e5d6f3.js"><link rel="prefetch" href="/assets/js/254.f13fb699.js"><link rel="prefetch" href="/assets/js/255.16a294dd.js"><link rel="prefetch" href="/assets/js/256.61099c3a.js"><link rel="prefetch" href="/assets/js/257.5826e5c7.js"><link rel="prefetch" href="/assets/js/258.35791862.js"><link rel="prefetch" href="/assets/js/259.3ce7fbc6.js"><link rel="prefetch" href="/assets/js/26.81112137.js"><link rel="prefetch" href="/assets/js/260.2dcc752e.js"><link rel="prefetch" href="/assets/js/261.37666873.js"><link rel="prefetch" href="/assets/js/262.aaad49ad.js"><link rel="prefetch" href="/assets/js/263.51383ade.js"><link rel="prefetch" href="/assets/js/264.e300007b.js"><link rel="prefetch" href="/assets/js/265.fc43eac2.js"><link rel="prefetch" href="/assets/js/266.853d5585.js"><link rel="prefetch" href="/assets/js/267.189093ea.js"><link rel="prefetch" href="/assets/js/268.f4aea80b.js"><link rel="prefetch" href="/assets/js/269.be2cbb32.js"><link rel="prefetch" href="/assets/js/27.f115f75f.js"><link rel="prefetch" href="/assets/js/270.991b999a.js"><link rel="prefetch" href="/assets/js/271.f39fbab9.js"><link rel="prefetch" href="/assets/js/272.20e58229.js"><link rel="prefetch" href="/assets/js/273.05005aef.js"><link rel="prefetch" href="/assets/js/274.76124fee.js"><link rel="prefetch" href="/assets/js/275.eb64aafd.js"><link rel="prefetch" href="/assets/js/276.9561e423.js"><link rel="prefetch" href="/assets/js/277.e8d8815c.js"><link rel="prefetch" href="/assets/js/278.f0dce85b.js"><link rel="prefetch" href="/assets/js/279.9aab0d90.js"><link rel="prefetch" href="/assets/js/28.7e51c7c0.js"><link rel="prefetch" href="/assets/js/280.069ba797.js"><link rel="prefetch" href="/assets/js/281.9b061671.js"><link rel="prefetch" href="/assets/js/282.f3d108cf.js"><link rel="prefetch" href="/assets/js/283.53762f92.js"><link rel="prefetch" href="/assets/js/284.2356626d.js"><link rel="prefetch" href="/assets/js/285.6b21d7fd.js"><link rel="prefetch" href="/assets/js/286.d993215c.js"><link rel="prefetch" href="/assets/js/287.af074585.js"><link rel="prefetch" href="/assets/js/288.b5c98381.js"><link rel="prefetch" href="/assets/js/289.0fba3c68.js"><link rel="prefetch" href="/assets/js/29.583c3665.js"><link rel="prefetch" href="/assets/js/290.cc53898e.js"><link rel="prefetch" href="/assets/js/291.396c98ad.js"><link rel="prefetch" href="/assets/js/292.3ebb343d.js"><link rel="prefetch" href="/assets/js/293.181ec241.js"><link rel="prefetch" href="/assets/js/294.24ce6fe5.js"><link rel="prefetch" href="/assets/js/295.dfedd036.js"><link rel="prefetch" href="/assets/js/296.ce79b726.js"><link rel="prefetch" href="/assets/js/297.d7b56761.js"><link rel="prefetch" href="/assets/js/298.d7da2b38.js"><link rel="prefetch" href="/assets/js/299.3aa9e715.js"><link rel="prefetch" href="/assets/js/30.6bff26ef.js"><link rel="prefetch" href="/assets/js/300.5eef96df.js"><link rel="prefetch" href="/assets/js/301.39dd1849.js"><link rel="prefetch" href="/assets/js/302.8692a3ab.js"><link rel="prefetch" href="/assets/js/303.31013756.js"><link rel="prefetch" href="/assets/js/304.b0e4c20b.js"><link rel="prefetch" href="/assets/js/305.68c07eda.js"><link rel="prefetch" href="/assets/js/306.c044b01f.js"><link rel="prefetch" href="/assets/js/307.b32176df.js"><link rel="prefetch" href="/assets/js/308.e250f9e9.js"><link rel="prefetch" href="/assets/js/309.a336fbec.js"><link rel="prefetch" href="/assets/js/31.74b30a12.js"><link rel="prefetch" href="/assets/js/310.ec3d18c5.js"><link rel="prefetch" href="/assets/js/311.7772237e.js"><link rel="prefetch" href="/assets/js/312.84e84620.js"><link rel="prefetch" href="/assets/js/313.694fc647.js"><link rel="prefetch" href="/assets/js/314.b0aee3d7.js"><link rel="prefetch" href="/assets/js/315.9aba37b4.js"><link rel="prefetch" href="/assets/js/316.fed40185.js"><link rel="prefetch" href="/assets/js/317.27ab4644.js"><link rel="prefetch" href="/assets/js/318.d27d6515.js"><link rel="prefetch" href="/assets/js/319.d5ec9619.js"><link rel="prefetch" href="/assets/js/32.ff92106b.js"><link rel="prefetch" href="/assets/js/320.21e2d92f.js"><link rel="prefetch" href="/assets/js/321.d289b66b.js"><link rel="prefetch" href="/assets/js/322.55d363e5.js"><link rel="prefetch" href="/assets/js/323.7013d458.js"><link rel="prefetch" href="/assets/js/324.1d139777.js"><link rel="prefetch" href="/assets/js/325.fc70105f.js"><link rel="prefetch" href="/assets/js/326.a2980ba2.js"><link rel="prefetch" href="/assets/js/327.e6f0b9f6.js"><link rel="prefetch" href="/assets/js/328.1428a3d1.js"><link rel="prefetch" href="/assets/js/329.0c321ab0.js"><link rel="prefetch" href="/assets/js/33.c9f3eb39.js"><link rel="prefetch" href="/assets/js/330.9594170b.js"><link rel="prefetch" href="/assets/js/331.8b42467d.js"><link rel="prefetch" href="/assets/js/332.3059a56f.js"><link rel="prefetch" href="/assets/js/333.f74d884d.js"><link rel="prefetch" href="/assets/js/334.b4645023.js"><link rel="prefetch" href="/assets/js/335.5d563a24.js"><link rel="prefetch" href="/assets/js/336.a02ec536.js"><link rel="prefetch" href="/assets/js/337.b5740cdc.js"><link rel="prefetch" href="/assets/js/338.36069758.js"><link rel="prefetch" href="/assets/js/339.ff632de6.js"><link rel="prefetch" href="/assets/js/34.cd1992ba.js"><link rel="prefetch" href="/assets/js/340.5a28d157.js"><link rel="prefetch" href="/assets/js/341.f01dfb9e.js"><link rel="prefetch" href="/assets/js/342.a41daa33.js"><link rel="prefetch" href="/assets/js/343.62af5c30.js"><link rel="prefetch" href="/assets/js/344.18252369.js"><link rel="prefetch" href="/assets/js/345.b729484e.js"><link rel="prefetch" href="/assets/js/346.fd5cf2f6.js"><link rel="prefetch" href="/assets/js/347.51d3f29d.js"><link rel="prefetch" href="/assets/js/348.3a81ebe9.js"><link rel="prefetch" href="/assets/js/349.b342f27e.js"><link rel="prefetch" href="/assets/js/35.25da390c.js"><link rel="prefetch" href="/assets/js/350.51e3f2ac.js"><link rel="prefetch" href="/assets/js/351.5670e0bf.js"><link rel="prefetch" href="/assets/js/352.78347562.js"><link rel="prefetch" href="/assets/js/353.d08bb9f9.js"><link rel="prefetch" href="/assets/js/354.d16facbd.js"><link rel="prefetch" href="/assets/js/355.2a94b39a.js"><link rel="prefetch" href="/assets/js/356.76c6150d.js"><link rel="prefetch" href="/assets/js/357.47925424.js"><link rel="prefetch" href="/assets/js/358.5aa37f60.js"><link rel="prefetch" href="/assets/js/359.1bf6067a.js"><link rel="prefetch" href="/assets/js/36.1de04baa.js"><link rel="prefetch" href="/assets/js/360.3bab61ea.js"><link rel="prefetch" href="/assets/js/361.cbdf38f4.js"><link rel="prefetch" href="/assets/js/362.e5022e56.js"><link rel="prefetch" href="/assets/js/363.dd8c698a.js"><link rel="prefetch" href="/assets/js/364.7e0c5478.js"><link rel="prefetch" href="/assets/js/365.0fbdcc66.js"><link rel="prefetch" href="/assets/js/366.4e765d90.js"><link rel="prefetch" href="/assets/js/367.24940260.js"><link rel="prefetch" href="/assets/js/368.ab643684.js"><link rel="prefetch" href="/assets/js/369.d1ec4a38.js"><link rel="prefetch" href="/assets/js/37.cde9b7e2.js"><link rel="prefetch" href="/assets/js/370.1d8f10de.js"><link rel="prefetch" href="/assets/js/371.e753f452.js"><link rel="prefetch" href="/assets/js/372.1cdd77e8.js"><link rel="prefetch" href="/assets/js/373.157d1abb.js"><link rel="prefetch" href="/assets/js/374.ad7cd4d6.js"><link rel="prefetch" href="/assets/js/375.6e62a735.js"><link rel="prefetch" href="/assets/js/376.7889dbcd.js"><link rel="prefetch" href="/assets/js/377.10c6ac9f.js"><link rel="prefetch" href="/assets/js/378.1b2fa981.js"><link rel="prefetch" href="/assets/js/379.b9f8c70e.js"><link rel="prefetch" href="/assets/js/38.659e3194.js"><link rel="prefetch" href="/assets/js/380.64f8634b.js"><link rel="prefetch" href="/assets/js/381.96549793.js"><link rel="prefetch" href="/assets/js/382.9484a45e.js"><link rel="prefetch" href="/assets/js/383.3ef25b2c.js"><link rel="prefetch" href="/assets/js/384.f3485be8.js"><link rel="prefetch" href="/assets/js/385.febdcc30.js"><link rel="prefetch" href="/assets/js/386.4558b190.js"><link rel="prefetch" href="/assets/js/387.0d3b506f.js"><link rel="prefetch" href="/assets/js/388.934422d1.js"><link rel="prefetch" href="/assets/js/389.8b08dde3.js"><link rel="prefetch" href="/assets/js/39.e07ca1a8.js"><link rel="prefetch" href="/assets/js/390.363de17d.js"><link rel="prefetch" href="/assets/js/391.41182fd4.js"><link rel="prefetch" href="/assets/js/392.3b81af1d.js"><link rel="prefetch" href="/assets/js/393.7c9026e3.js"><link rel="prefetch" href="/assets/js/394.1d05945d.js"><link rel="prefetch" href="/assets/js/395.78a58356.js"><link rel="prefetch" href="/assets/js/396.1b46234b.js"><link rel="prefetch" href="/assets/js/397.e8db4b7f.js"><link rel="prefetch" href="/assets/js/398.53efc2be.js"><link rel="prefetch" href="/assets/js/399.4f44cf4a.js"><link rel="prefetch" href="/assets/js/40.266a2700.js"><link rel="prefetch" href="/assets/js/400.1b560fa1.js"><link rel="prefetch" href="/assets/js/401.1c9830bd.js"><link rel="prefetch" href="/assets/js/402.a94ce69c.js"><link rel="prefetch" href="/assets/js/403.19cf041f.js"><link rel="prefetch" href="/assets/js/404.23edf6e2.js"><link rel="prefetch" href="/assets/js/405.f14f9d68.js"><link rel="prefetch" href="/assets/js/406.549ea0e5.js"><link rel="prefetch" href="/assets/js/407.cb5e3e89.js"><link rel="prefetch" href="/assets/js/408.49425ebe.js"><link rel="prefetch" href="/assets/js/409.c5e5fdfd.js"><link rel="prefetch" href="/assets/js/41.cae8811f.js"><link rel="prefetch" href="/assets/js/410.0e2c2105.js"><link rel="prefetch" href="/assets/js/411.a7f7f848.js"><link rel="prefetch" href="/assets/js/412.21e2b5ca.js"><link rel="prefetch" href="/assets/js/413.11dee56a.js"><link rel="prefetch" href="/assets/js/414.5a726c9b.js"><link rel="prefetch" href="/assets/js/415.bf3ce667.js"><link rel="prefetch" href="/assets/js/416.f9d876c5.js"><link rel="prefetch" href="/assets/js/417.b145b313.js"><link rel="prefetch" href="/assets/js/418.a128f225.js"><link rel="prefetch" href="/assets/js/419.a8d82aef.js"><link rel="prefetch" href="/assets/js/42.636c7fdd.js"><link rel="prefetch" href="/assets/js/420.47d9b460.js"><link rel="prefetch" href="/assets/js/421.e2747735.js"><link rel="prefetch" href="/assets/js/422.72a382c1.js"><link rel="prefetch" href="/assets/js/423.08258cd9.js"><link rel="prefetch" href="/assets/js/424.74fa1aa7.js"><link rel="prefetch" href="/assets/js/425.c933bef9.js"><link rel="prefetch" href="/assets/js/426.7c1b57f3.js"><link rel="prefetch" href="/assets/js/427.a07e0b91.js"><link rel="prefetch" href="/assets/js/428.fd323d7f.js"><link rel="prefetch" href="/assets/js/429.b42a00ea.js"><link rel="prefetch" href="/assets/js/43.861bd93e.js"><link rel="prefetch" href="/assets/js/430.d34d8116.js"><link rel="prefetch" href="/assets/js/431.7be72b98.js"><link rel="prefetch" href="/assets/js/432.b010817c.js"><link rel="prefetch" href="/assets/js/433.6ec9cce5.js"><link rel="prefetch" href="/assets/js/434.6d15cac8.js"><link rel="prefetch" href="/assets/js/435.5c0ba9b5.js"><link rel="prefetch" href="/assets/js/436.60657ccd.js"><link rel="prefetch" href="/assets/js/437.44abd073.js"><link rel="prefetch" href="/assets/js/438.0b92734f.js"><link rel="prefetch" href="/assets/js/439.da488193.js"><link rel="prefetch" href="/assets/js/44.1dca4498.js"><link rel="prefetch" href="/assets/js/45.82282d3d.js"><link rel="prefetch" href="/assets/js/46.3fec6a7f.js"><link rel="prefetch" href="/assets/js/47.18d17064.js"><link rel="prefetch" href="/assets/js/48.1828ed9f.js"><link rel="prefetch" href="/assets/js/49.f23b5c16.js"><link rel="prefetch" href="/assets/js/50.4977b62f.js"><link rel="prefetch" href="/assets/js/51.309369aa.js"><link rel="prefetch" href="/assets/js/52.1138e607.js"><link rel="prefetch" href="/assets/js/53.b0a30bb5.js"><link rel="prefetch" href="/assets/js/54.da2be7dd.js"><link rel="prefetch" href="/assets/js/55.12fbcf08.js"><link rel="prefetch" href="/assets/js/56.444e886e.js"><link rel="prefetch" href="/assets/js/57.699c481f.js"><link rel="prefetch" href="/assets/js/58.e73b32b1.js"><link rel="prefetch" href="/assets/js/59.a67fa919.js"><link rel="prefetch" href="/assets/js/6.300c849a.js"><link rel="prefetch" href="/assets/js/60.674977b0.js"><link rel="prefetch" href="/assets/js/61.eb1d12d2.js"><link rel="prefetch" href="/assets/js/62.426cd653.js"><link rel="prefetch" href="/assets/js/63.5ad42aed.js"><link rel="prefetch" href="/assets/js/64.fd2e7741.js"><link rel="prefetch" href="/assets/js/65.278c8108.js"><link rel="prefetch" href="/assets/js/66.3cac83c8.js"><link rel="prefetch" href="/assets/js/67.121db779.js"><link rel="prefetch" href="/assets/js/68.3643550c.js"><link rel="prefetch" href="/assets/js/70.a98fe131.js"><link rel="prefetch" href="/assets/js/71.a171f52d.js"><link rel="prefetch" href="/assets/js/72.69b0ca70.js"><link rel="prefetch" href="/assets/js/73.68b2206d.js"><link rel="prefetch" href="/assets/js/74.39056a7f.js"><link rel="prefetch" href="/assets/js/75.1c773177.js"><link rel="prefetch" href="/assets/js/76.96a93e1b.js"><link rel="prefetch" href="/assets/js/77.84581283.js"><link rel="prefetch" href="/assets/js/78.192d2458.js"><link rel="prefetch" href="/assets/js/79.1b77f956.js"><link rel="prefetch" href="/assets/js/8.3b6fe697.js"><link rel="prefetch" href="/assets/js/80.b3effc3f.js"><link rel="prefetch" href="/assets/js/81.f7eb117a.js"><link rel="prefetch" href="/assets/js/82.f0c338ef.js"><link rel="prefetch" href="/assets/js/83.3235e050.js"><link rel="prefetch" href="/assets/js/84.39ac9796.js"><link rel="prefetch" href="/assets/js/85.a8e2261a.js"><link rel="prefetch" href="/assets/js/86.083e2d14.js"><link rel="prefetch" href="/assets/js/87.d482cad8.js"><link rel="prefetch" href="/assets/js/88.f36ced96.js"><link rel="prefetch" href="/assets/js/89.22480af6.js"><link rel="prefetch" href="/assets/js/9.cfab03b0.js"><link rel="prefetch" href="/assets/js/90.20bba2f0.js"><link rel="prefetch" href="/assets/js/91.33c13f69.js"><link rel="prefetch" href="/assets/js/92.606986a9.js"><link rel="prefetch" href="/assets/js/93.fa52f7f5.js"><link rel="prefetch" href="/assets/js/94.e8c03b45.js"><link rel="prefetch" href="/assets/js/95.e0a0c480.js"><link rel="prefetch" href="/assets/js/96.85ee1f38.js"><link rel="prefetch" href="/assets/js/97.d7153472.js"><link rel="prefetch" href="/assets/js/98.785c642c.js"><link rel="prefetch" href="/assets/js/99.b3b414b0.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.8d7743fe.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.f20d812e.js"><link rel="prefetch" href="/assets/js/vendors~photo-swipe.751a6989.js">
    <link rel="stylesheet" href="/assets/css/0.styles.30e04dfa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">数蛙技术团队</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="用户手册" class="dropdown-title"><span class="title">用户手册</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/manual/cloud/" class="nav-link">数蛙工业数据云平台</a></li><li class="dropdown-item"><!----> <a href="/zh/manual/edge/" class="nav-link">数蛙工业边缘网关</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="产品说明" class="dropdown-title"><span class="title">产品说明</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/product/dgiot/" class="nav-link">一站式物联网平台</a></li><li class="dropdown-item"><!----> <a href="/zh/product/dgtest/" class="nav-link">一站式云压测平台</a></li><li class="dropdown-item"><!----> <a href="/zh/product/dgii/" class="nav-link">工业互联网平台</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发指南" class="dropdown-title"><span class="title">开发指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/backend/" class="nav-link router-link-active">服务架构</a></li><li class="dropdown-item"><!----> <a href="/zh/frontend/" class="nav-link">交互技术</a></li><li class="dropdown-item"><!----> <a href="/zh/dataanalysis/" class="nav-link">数据分析</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实战教程" class="dropdown-title"><span class="title">实战教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/blog/knowledge/" class="nav-link">基础知识</a></li><li class="dropdown-item"><!----> <a href="/zh/blog/study/" class="nav-link">案例教程</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/backend/emqx/advanced/http-api.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">English</a></li></ul></div></div> <a href="https://github.com/dgiot" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="用户手册" class="dropdown-title"><span class="title">用户手册</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/manual/cloud/" class="nav-link">数蛙工业数据云平台</a></li><li class="dropdown-item"><!----> <a href="/zh/manual/edge/" class="nav-link">数蛙工业边缘网关</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="产品说明" class="dropdown-title"><span class="title">产品说明</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/product/dgiot/" class="nav-link">一站式物联网平台</a></li><li class="dropdown-item"><!----> <a href="/zh/product/dgtest/" class="nav-link">一站式云压测平台</a></li><li class="dropdown-item"><!----> <a href="/zh/product/dgii/" class="nav-link">工业互联网平台</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发指南" class="dropdown-title"><span class="title">开发指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/backend/" class="nav-link router-link-active">服务架构</a></li><li class="dropdown-item"><!----> <a href="/zh/frontend/" class="nav-link">交互技术</a></li><li class="dropdown-item"><!----> <a href="/zh/dataanalysis/" class="nav-link">数据分析</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实战教程" class="dropdown-title"><span class="title">实战教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/blog/knowledge/" class="nav-link">基础知识</a></li><li class="dropdown-item"><!----> <a href="/zh/blog/study/" class="nav-link">案例教程</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/backend/emqx/advanced/http-api.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">English</a></li></ul></div></div> <a href="https://github.com/dgiot" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <div style="padding-left:1.5rem;"><div></div></div> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>产品概览</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>EMQX</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh/backend/emqx/" aria-current="page" class="sidebar-link">EMQX 简介</a></li><li><a href="/zh/backend/emqx/introduction/checklist.html" class="sidebar-link">EMQX 功能列表</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>开始使用</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>用户指南</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>模块管理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>规则引擎</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>插件管理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>运维操作</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/zh/backend/emqx/advanced/http-api.html" aria-current="page" class="active sidebar-link">HTTP API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#接口安全" class="sidebar-link">接口安全</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#响应码" class="sidebar-link">响应码</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#http-状态码-status-codes" class="sidebar-link">HTTP 状态码 (status codes)</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#返回码-result-codes" class="sidebar-link">返回码 (result codes)</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#api-endpoints" class="sidebar-link">API Endpoints</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#api-v4" class="sidebar-link">/api/v4</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4" class="sidebar-link">GET /api/v4</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#broker-基本信息" class="sidebar-link">Broker 基本信息</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-brokers-node" class="sidebar-link">GET /api/v4/brokers/{node}</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#节点" class="sidebar-link">节点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-nodes-node" class="sidebar-link">GET /api/v4/nodes/{node}</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#客户端" class="sidebar-link">客户端</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-clients" class="sidebar-link">GET /api/v4/clients</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-clients-clientid" class="sidebar-link">GET /api/v4/clients/{clientid}</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#delete-api-v4-clients-clientid" class="sidebar-link">DELETE /api/v4/clients/{clientid}</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-nodes-node-clients" class="sidebar-link">GET /api/v4/nodes/{node}/clients</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-nodes-node-clients-clientid" class="sidebar-link">GET /api/v4/nodes/{node}/clients/{clientid}</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#delete-api-v4-nodes-node-clients-clientid" class="sidebar-link">DELETE /api/v4/nodes/{node}/clients/{clientid}</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-clients-username-username" class="sidebar-link">GET /api/v4/clients/username/{username}</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-nodes-node-clients-username-username" class="sidebar-link">GET /api/v4/nodes/{node}/clients/username/{username}</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-clients-clientid-acl-cache" class="sidebar-link">GET /api/v4/clients/{clientid}/acl_cache</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#delete-api-v4-clients-clientid-acl-cache" class="sidebar-link">DELETE /api/v4/clients/{clientid}/acl_cache</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#订阅信息" class="sidebar-link">订阅信息</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-subscriptions" class="sidebar-link">GET /api/v4/subscriptions</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-subscriptions-clientid" class="sidebar-link">GET /api/v4/subscriptions/{clientid}</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-nodes-node-subscriptions" class="sidebar-link">GET /api/v4/nodes/{node}/subscriptions</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-nodes-node-subscriptions-clientid" class="sidebar-link">GET /api/v4/nodes/{node}/subscriptions/{clientid}</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#路由" class="sidebar-link">路由</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-routes" class="sidebar-link">GET /api/v4/routes</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-routes-topic" class="sidebar-link">GET /api/v4/routes/{topic}</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#消息发布" class="sidebar-link">消息发布</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#post-api-v4-mqtt-publish" class="sidebar-link">POST /api/v4/mqtt/publish</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#主题订阅" class="sidebar-link">主题订阅</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#post-api-v4-mqtt-subscribe" class="sidebar-link">POST /api/v4/mqtt/subscribe</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#post-api-v4-mqtt-unsubscribe" class="sidebar-link">POST /api/v4/mqtt/unsubscribe</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#消息批量发布" class="sidebar-link">消息批量发布</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#post-api-v4-mqtt-publish-batch" class="sidebar-link">POST /api/v4/mqtt/publish_batch</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#主题批量订阅" class="sidebar-link">主题批量订阅</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#post-api-v4-mqtt-subscribe-batch" class="sidebar-link">POST /api/v4/mqtt/subscribe_batch</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#post-api-v4-mqtt-unsubscribe-batch" class="sidebar-link">POST /api/v4/mqtt/unsubscribe_batch</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#插件" class="sidebar-link">插件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-plugins" class="sidebar-link">GET /api/v4/plugins</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-nodes-node-plugins" class="sidebar-link">GET /api/v4/nodes/{node}/plugins</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#put-api-v4-nodes-node-plugins-plugin-load" class="sidebar-link">PUT /api/v4/nodes/{node}/plugins/{plugin}/load</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#put-api-v4-nodes-node-plugins-plugin-unload" class="sidebar-link">PUT /api/v4/nodes/{node}/plugins/{plugin}/unload</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#put-api-v4-nodes-node-plugins-plugin-reload" class="sidebar-link">PUT /api/v4/nodes/{node}/plugins/{plugin}/reload</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#监听器" class="sidebar-link">监听器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-listeners" class="sidebar-link">GET /api/v4/listeners</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-nodes-node-listeners" class="sidebar-link">GET /api/v4/nodes/{node}/listeners</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#内置模块" class="sidebar-link">内置模块</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-modules" class="sidebar-link">GET /api/v4/modules</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-nodes-node-modules" class="sidebar-link">GET /api/v4/nodes/{node}/modules</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#put-api-v4-modules-module-load" class="sidebar-link">PUT /api/v4/modules/{module}/load</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#put-api-v4-nodes-node-modules-module-load" class="sidebar-link">PUT /api/v4/nodes/{node}/modules/{module}/load</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#put-api-v4-modules-module-unload" class="sidebar-link">PUT /api/v4/modules/{module}/unload</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#put-api-v4-nodes-node-modules-module-unload" class="sidebar-link">PUT /api/v4/nodes/{node}/modules/{module}/unload</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#put-api-v4-modules-module-reload" class="sidebar-link">PUT /api/v4/modules/{module}/reload</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#put-api-v4-nodes-node-modules-module-reload" class="sidebar-link">PUT /api/v4/nodes/{node}/modules/{module}/reload</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#统计指标" class="sidebar-link">统计指标</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-metrics" class="sidebar-link">GET /api/v4/metrics</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-nodes-node-metrics" class="sidebar-link">GET /api/v4/nodes/{node}/metrics</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#主题统计指标" class="sidebar-link">主题统计指标</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-topic-metrics" class="sidebar-link">GET /api/v4/topic-metrics</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-topic-metrics-topic" class="sidebar-link">GET /api/v4/topic-metrics/{topic}</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#post-api-v4-topic-metrics" class="sidebar-link">POST /api/v4/topic-metrics</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#delete-api-v4-topic-metrics-topic" class="sidebar-link">DELETE /api/v4/topic-metrics/{topic}</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#delete-api-v4-topic-metrics" class="sidebar-link">DELETE /api/v4/topic-metrics</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#状态" class="sidebar-link">状态</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-stats" class="sidebar-link">GET /api/v4/stats</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-nodes-node-stats" class="sidebar-link">GET /api/v4/nodes/{node}/stats</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#告警" class="sidebar-link">告警</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-alarms" class="sidebar-link">GET /api/v4/alarms</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-nodes-node-alarms" class="sidebar-link">GET /api/v4/nodes/{node}/alarms</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-alarms-activated" class="sidebar-link">GET /api/v4/alarms/activated</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-nodes-node-alarms-activated" class="sidebar-link">GET /api/v4/nodes/{node}/alarms/activated</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-alarms-deactivated" class="sidebar-link">GET /api/v4/alarms/deactivated</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-nodes-node-alarms-deactivated" class="sidebar-link">GET /api/v4/nodes/{node}/alarms/deactivated</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#post-api-v4-alarms-deactivated" class="sidebar-link">POST /api/v4/alarms/deactivated</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#delete-api-v4-alarms-deactivated" class="sidebar-link">DELETE /api/v4/alarms/deactivated</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#delete-api-v4-nodes-node-alarms-deactivated" class="sidebar-link">DELETE /api/v4/nodes/{node}/alarms/deactivated</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#黑名单" class="sidebar-link">黑名单</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-banned" class="sidebar-link">GET /api/v4/banned</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#post-api-v4-banned" class="sidebar-link">POST /api/v4/banned</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#delete-api-v4-banned-as-who" class="sidebar-link">DELETE /api/v4/banned/{as}/{who}</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#数据导入导出" class="sidebar-link">数据导入导出</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-data-export" class="sidebar-link">GET /api/v4/data/export</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#post-api-v4-data-export" class="sidebar-link">POST /api/v4/data/export</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#post-api-v4-data-import" class="sidebar-link">POST /api/v4/data/import</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-data-file-filename" class="sidebar-link">GET /api/v4/data/file/{filename}</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#post-api-v4-data-file" class="sidebar-link">POST /api/v4/data/file</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#delete-api-v4-data-file-filename" class="sidebar-link">DELETE /api/v4/data/file/{filename}</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#规则" class="sidebar-link">规则</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-rules-rule-id" class="sidebar-link">GET /api/v4/rules/{rule_id}</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#post-api-v4-rules" class="sidebar-link">POST /api/v4/rules</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#put-api-v4-rules-rule-id" class="sidebar-link">PUT /api/v4/rules/{rule_id}</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#delete-api-v4-rules-rule-id" class="sidebar-link">DELETE /api/v4/rules/{rule_id}</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#动作" class="sidebar-link">动作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-actions-action-name" class="sidebar-link">GET api/v4/actions/{action_name}</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#资源类型" class="sidebar-link">资源类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-resource-types-resource-type-name" class="sidebar-link">GET api/v4/resourcetypes/{resourcetype_name}</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#资源" class="sidebar-link">资源</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-resources-resource-id" class="sidebar-link">GET api/v4/resources/{resource_id}</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#post-api-v4-resources" class="sidebar-link">POST /api/v4/resources</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#delete-api-v4-resources-resource-id" class="sidebar-link">DELETE /api/v4/resources/{resource_id}</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#数据遥测" class="sidebar-link">数据遥测</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#put-api-v4-telemetry-status" class="sidebar-link">PUT /api/v4/telemetry/status</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-telemetry-status" class="sidebar-link">GET /api/v4/telemetry/status</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/advanced/http-api.html#get-api-v4-telemetry-data" class="sidebar-link">GET /api/v4/telemetry/data</a></li></ul></li></ul></li><li><a href="/zh/backend/emqx/configuration/configuration.html" class="sidebar-link">参数配置</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>命令行接口</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/zh/backend/emqx/advanced/relup.html" class="sidebar-link">版本热升级</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>FAQ 常见问题解答</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>SDK &amp; Tools</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>协议介绍</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>版本发布</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>相关资料</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li></ul> </aside> <!----> <!----> <main class="page"><div class="theme-default-content" style="margin-top:3.6rem;padding-top:0;padding-bottom:0;"></div> <div class="theme-default-content"><div class="content__default"><h1 id="http-api"><a href="#http-api" class="header-anchor">#</a> HTTP API</h1> <p>EMQ X 提供了 HTTP API 以实现与外部系统的集成，例如查询客户端信息、发布消息和创建规则等。</p> <p>EMQ X 的 HTTP API 服务默认监听 8081 端口，可通过 <code>etc/plugins/emqx_management.conf</code> 配置文件修改监听端口，或启用 HTTPS 监听。<a href="https://github.com/emqx/emqx/releases/tag/v4.0.0" target="_blank" rel="noopener noreferrer">EMQ X 4.0.0<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 以后的所有 API 调用均以 <code>api/v4</code> 开头。</p> <h2 id="接口安全"><a href="#接口安全" class="header-anchor">#</a> 接口安全</h2> <p>EMQ X 的 HTTP API 使用 <a href="https://en.wikipedia.org/wiki/Basic_access_authentication" target="_blank" rel="noopener noreferrer">Basic 认证<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 方式，<code>id</code> 和 <code>password</code> 须分别填写 AppID 和 AppSecret。
默认的 AppID 和 AppSecret 是：<code>admin/public</code>。你可以在 Dashboard 的左侧菜单栏里，选择 &quot;管理&quot; -&gt; &quot;应用&quot; 来修改和添加 AppID/AppSecret。</p> <h2 id="响应码"><a href="#响应码" class="header-anchor">#</a> 响应码</h2> <h3 id="http-状态码-status-codes"><a href="#http-状态码-status-codes" class="header-anchor">#</a> HTTP 状态码 (status codes)</h3> <p>EMQ X 接口在调用成功时总是返回 200 OK，响应内容则以 JSON 格式返回。</p> <p>可能的状态码如下：</p> <table><thead><tr><th>Status Code</th> <th>Description</th></tr></thead> <tbody><tr><td>200</td> <td>成功，返回的 JSON 数据将提供更多信息</td></tr> <tr><td>400</td> <td>客户端请求无效，例如请求体或参数错误</td></tr> <tr><td>401</td> <td>客户端未通过服务端认证，使用无效的身份验证凭据可能会发生</td></tr> <tr><td>404</td> <td>找不到请求的路径或者请求的对象不存在</td></tr> <tr><td>500</td> <td>服务端处理请求时发生内部错误</td></tr></tbody></table> <h3 id="返回码-result-codes"><a href="#返回码-result-codes" class="header-anchor">#</a> 返回码 (result codes)</h3> <p>EMQ X 接口的响应消息体为 JSON 格式，其中总是包含返回码 <code>code</code>。</p> <p>可能的返回码如下：</p> <table><thead><tr><th>Return Code</th> <th>Description</th></tr></thead> <tbody><tr><td>0</td> <td>成功</td></tr> <tr><td>101</td> <td>RPC 错误</td></tr> <tr><td>102</td> <td>未知错误</td></tr> <tr><td>103</td> <td>用户名或密码错误</td></tr> <tr><td>104</td> <td>空用户名或密码</td></tr> <tr><td>105</td> <td>用户不存在</td></tr> <tr><td>106</td> <td>管理员账户不可删除</td></tr> <tr><td>107</td> <td>关键请求参数缺失</td></tr> <tr><td>108</td> <td>请求参数错误</td></tr> <tr><td>109</td> <td>请求参数不是合法 JSON 格式</td></tr> <tr><td>110</td> <td>插件已开启</td></tr> <tr><td>111</td> <td>插件已关闭</td></tr> <tr><td>112</td> <td>客户端不在线</td></tr> <tr><td>113</td> <td>用户已存在</td></tr> <tr><td>114</td> <td>旧密码错误</td></tr> <tr><td>115</td> <td>不合法的主题</td></tr></tbody></table> <h2 id="api-endpoints"><a href="#api-endpoints" class="header-anchor">#</a> API Endpoints</h2> <h2 id="api-v4"><a href="#api-v4" class="header-anchor">#</a> /api/v4</h2> <h3 id="get-api-v4"><a href="#get-api-v4" class="header-anchor">#</a> GET /api/v4</h3> <p>返回 EMQ X 支持的所有 Endpoints。</p> <p><strong>Parameters:</strong> 无</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Array</td> <td>Endpoints 列表</td></tr> <tr><td>- data[0].path</td> <td>String</td> <td>Endpoint</td></tr> <tr><td>- data[0].name</td> <td>String</td> <td>Endpoint 名</td></tr> <tr><td>- data[0].method</td> <td>String</td> <td>HTTP Method</td></tr> <tr><td>- data[0].descr</td> <td>String</td> <td>描述</td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;path&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;/auth_clientid&quot;</span>,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;list_clientid&quot;</span>,<span class="token string">&quot;method&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;GET&quot;</span>,<span class="token string">&quot;descr&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;List available clientid in the cluster&quot;</span><span class="token punctuation">}</span>, <span class="token punctuation">..</span>.<span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h2 id="broker-基本信息"><a href="#broker-基本信息" class="header-anchor">#</a> Broker 基本信息</h2> <h3 id="get-api-v4-brokers-node"><a href="#get-api-v4-brokers-node" class="header-anchor">#</a> GET /api/v4/brokers/{node}</h3> <p>返回集群下所有节点的基本信息。</p> <p><strong>Path Parameters:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>node</td> <td>String</td> <td>False</td> <td>节点名字，如 &quot;emqx@127.0.0.1。<br>不指定时返回所有节点的信息</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Object/Array of Objects</td> <td>node 参数存在时返回指定节点信息，<br>不存在时返回所有节点的信息</td></tr> <tr><td>data.datetime</td> <td>String</td> <td>当前时间，格式为 &quot;YYYY-MM-DD HH:mm:ss&quot;</td></tr> <tr><td>data.node</td> <td>String</td> <td>节点名称</td></tr> <tr><td>data.node_status</td> <td>String</td> <td>节点状态</td></tr> <tr><td>data.otp_release</td> <td>String</td> <td>EMQ X 使用的 Erlang/OTP 版本</td></tr> <tr><td>data.sysdescr</td> <td>String</td> <td>软件描述</td></tr> <tr><td>data.uptime</td> <td>String</td> <td>EMQ X 运行时间，格式为 &quot;H hours, m minutes, s seconds&quot;</td></tr> <tr><td>data.version</td> <td>String</td> <td>EMQ X 版本</td></tr></tbody></table> <p><strong>Examples:</strong></p> <p>获取所有节点的基本信息：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/brokers&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;version&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;develop&quot;</span>,<span class="token string">&quot;uptime&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;4 hours, 21 minutes, 19 seconds&quot;</span>,<span class="token string">&quot;sysdescr&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;EMQ X Broker&quot;</span>,<span class="token string">&quot;otp_release&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;R21/10.3.5&quot;</span>,<span class="token string">&quot;node_status&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Running&quot;</span>,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;datetime&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-02-19 15:27:24&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><p>获取节点 emqx@127.0.0.1 的基本信息：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/brokers/emqx@127.0.0.1&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;version&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;develop&quot;</span>,<span class="token string">&quot;uptime&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;1 minutes, 51 seconds&quot;</span>,<span class="token string">&quot;sysdescr&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;EMQ X Broker&quot;</span>,<span class="token string">&quot;otp_release&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;R21/10.3.5&quot;</span>,<span class="token string">&quot;node_status&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Running&quot;</span>,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;datetime&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-02-20 14:11:31&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h2 id="节点"><a href="#节点" class="header-anchor">#</a> 节点</h2> <h3 id="get-api-v4-nodes-node"><a href="#get-api-v4-nodes-node" class="header-anchor">#</a> GET /api/v4/nodes/{node}</h3> <p>返回节点的状态。</p> <p><strong>Path Parameters:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>node</td> <td>String</td> <td>False</td> <td>节点名字，如 &quot;emqx@127.0.0.1。<br>不指定时返回所有节点的信息</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Object/Array of Objects</td> <td>node 参数存在时返回指定节点信息，<br>不存在时以 Array 形式返回所有节点的信息</td></tr> <tr><td>data.connections</td> <td>Integer</td> <td>当前接入此节点的客户端数量</td></tr> <tr><td>data.load1</td> <td>String</td> <td>1 分钟内的 CPU 平均负载</td></tr> <tr><td>data.load5</td> <td>String</td> <td>5 分钟内的 CPU 平均负载</td></tr> <tr><td>data.load15</td> <td>String</td> <td>15 分钟内的 CPU 平均负载</td></tr> <tr><td>data.max_fds</td> <td>Integer</td> <td>操作系统的最大文件描述符限制</td></tr> <tr><td>data.memory_total</td> <td>String</td> <td>VM 已分配的系统内存</td></tr> <tr><td>data.memory_used</td> <td>String</td> <td>VM 已占用的内存大小</td></tr> <tr><td>data.node</td> <td>String</td> <td>节点名称</td></tr> <tr><td>data.node_status</td> <td>String</td> <td>节点状态</td></tr> <tr><td>data.otp_release</td> <td>String</td> <td>EMQ X 使用的 Erlang/OTP 版本</td></tr> <tr><td>data.process_available</td> <td>Integer</td> <td>可用的进程数量</td></tr> <tr><td>data.process_used</td> <td>Integer</td> <td>已占用的进程数量</td></tr> <tr><td>data.uptime</td> <td>String</td> <td>EMQ X 运行时间</td></tr> <tr><td>data.version</td> <td>String</td> <td>EMQ X 版本</td></tr></tbody></table> <p><strong>Examples:</strong></p> <p>获取所有节点的状态：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/nodes&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;version&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;develop&quot;</span>,<span class="token string">&quot;uptime&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;7 seconds&quot;</span>,<span class="token string">&quot;process_used&quot;</span>:315,<span class="token string">&quot;process_available&quot;</span>:2097152,<span class="token string">&quot;otp_release&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;R21/10.3.5&quot;</span>,<span class="token string">&quot;node_status&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Running&quot;</span>,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;memory_used&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;96.75M&quot;</span>,<span class="token string">&quot;memory_total&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;118.27M&quot;</span>,<span class="token string">&quot;max_fds&quot;</span>:10240,<span class="token string">&quot;load5&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2.60&quot;</span>,<span class="token string">&quot;load15&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2.65&quot;</span>,<span class="token string">&quot;load1&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2.31&quot;</span>,<span class="token string">&quot;connections&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><p>获取指定节点的状态：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;version&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;develop&quot;</span>,<span class="token string">&quot;uptime&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2 minutes, 21 seconds&quot;</span>,<span class="token string">&quot;process_used&quot;</span>:310,<span class="token string">&quot;process_available&quot;</span>:2097152,<span class="token string">&quot;otp_release&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;R21/10.3.5&quot;</span>,<span class="token string">&quot;node_status&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Running&quot;</span>,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;memory_used&quot;</span>:101379168,<span class="token string">&quot;memory_total&quot;</span>:123342848,<span class="token string">&quot;max_fds&quot;</span>:10240,<span class="token string">&quot;load5&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2.50&quot;</span>,<span class="token string">&quot;load15&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2.61&quot;</span>,<span class="token string">&quot;load1&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;1.99&quot;</span>,<span class="token string">&quot;connections&quot;</span>:0<span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h2 id="客户端"><a href="#客户端" class="header-anchor">#</a> 客户端</h2> <h3 id="get-api-v4-clients"><a href="#get-api-v4-clients" class="header-anchor">#</a> GET /api/v4/clients</h3> <p>返回集群下所有客户端的信息，支持分页。</p> <p><strong>Query String Parameters:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>_page</td> <td>Integer</td> <td>False</td> <td>1</td> <td>页码</td></tr> <tr><td>_limit</td> <td>Integer</td> <td>False</td> <td>10000</td> <td>每页显示的数据条数，未指定时由 <code>emqx-management</code> 插件的配置项 <code>max_row_limit</code> 决定</td></tr></tbody></table> <p>在 4.1 后，支持多条件和模糊查询，其包含的查询参数有：</p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>clientid</td> <td>String</td> <td>False</td> <td>客户端标识符</td></tr> <tr><td>username</td> <td>String</td> <td>False</td> <td>客户端用户名</td></tr> <tr><td>zone</td> <td>String</td> <td>False</td> <td>客户端配置组名称</td></tr> <tr><td>ip_address</td> <td>String</td> <td>False</td> <td>客户端 IP 地址</td></tr> <tr><td>conn_state</td> <td>Enum</td> <td>False</td> <td>客户端当前连接状态，<br>可取值有：<code>connected</code>,<code>idle</code>,<code>disconnected</code></td></tr> <tr><td>clean_start</td> <td>Bool</td> <td>False</td> <td>客户端是否使用了全新的会话</td></tr> <tr><td>proto_name</td> <td>Enum</td> <td>False</td> <td>客户端协议名称，<br>可取值有：<code>MQTT</code>,<code>CoAP</code>,<code>LwM2M</code>,<code>MQTT-SN</code></td></tr> <tr><td>proto_ver</td> <td>Integer</td> <td>False</td> <td>客户端协议版本</td></tr> <tr><td>_like_clientid</td> <td>String</td> <td>False</td> <td>客户端标识符，子串方式模糊查找</td></tr> <tr><td>_like_username</td> <td>String</td> <td>False</td> <td>客户端用户名，子串方式模糊查找</td></tr> <tr><td>_gte_created_at</td> <td>Integer</td> <td>False</td> <td>客户端会话创建时间，小于等于查找</td></tr> <tr><td>_lte_created_at</td> <td>Integer</td> <td>False</td> <td>客户端会话创建时间，大于等于查找</td></tr> <tr><td>_gte_connected_at</td> <td>Integer</td> <td>False</td> <td>客户端连接创建时间，小于等于查找</td></tr> <tr><td>_lte_connected_at</td> <td>Integer</td> <td>False</td> <td>客户端连接创建时间，大于等于查找</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Array of Objects</td> <td>所有客户端的信息</td></tr> <tr><td>data[0].node</td> <td>String</td> <td>客户端所连接的节点名称</td></tr> <tr><td>data[0].clientid</td> <td>String</td> <td>客户端标识符</td></tr> <tr><td>data[0].username</td> <td>String</td> <td>客户端连接时使用的用户名</td></tr> <tr><td>data[0].proto_name</td> <td>String</td> <td>客户端协议名称</td></tr> <tr><td>data[0].proto_ver</td> <td>Integer</td> <td>客户端使用的协议版本</td></tr> <tr><td>data[0].ip_address</td> <td>String</td> <td>客户端的 IP 地址</td></tr> <tr><td>data[0].port</td> <td>Integer</td> <td>客户端的端口</td></tr> <tr><td>data[0].is_bridge</td> <td>Boolean</td> <td>指示客户端是否通过桥接方式连接</td></tr> <tr><td>data[0].connected_at</td> <td>String</td> <td>客户端连接时间，格式为 &quot;YYYY-MM-DD HH:mm:ss&quot;</td></tr> <tr><td>data[0].disconnected_at</td> <td>String</td> <td>客户端离线时间，格式为 &quot;YYYY-MM-DD HH:mm:ss&quot;，<br>此字段仅在 <code>connected</code> 为 <code>false</code> 时有效并被返回</td></tr> <tr><td>data[0].connected</td> <td>Boolean</td> <td>客户端是否处于连接状态</td></tr> <tr><td>data[0].zone</td> <td>String</td> <td>指示客户端使用的配置组</td></tr> <tr><td>data[0].keepalive</td> <td>Integer</td> <td>保持连接时间，单位：秒</td></tr> <tr><td>data[0].clean_start</td> <td>Boolean</td> <td>指示客户端是否使用了全新的会话</td></tr> <tr><td>data[0].expiry_interval</td> <td>Integer</td> <td>会话过期间隔，单位：秒</td></tr> <tr><td>data[0].created_at</td> <td>String</td> <td>会话创建时间，格式为 &quot;YYYY-MM-DD HH:mm:ss&quot;</td></tr> <tr><td>data[0].subscriptions_cnt</td> <td>Integer</td> <td>此客户端已建立的订阅数量</td></tr> <tr><td>data[0].max_subscriptions</td> <td>Integer</td> <td>此客户端允许建立的最大订阅数量</td></tr> <tr><td>data[0].inflight</td> <td>Integer</td> <td>飞行队列当前长度</td></tr> <tr><td>data[0].max_inflight</td> <td>Integer</td> <td>飞行队列最大长度</td></tr> <tr><td>data[0].mqueue_len</td> <td>Integer</td> <td>消息队列当前长度</td></tr> <tr><td>data[0].max_mqueue</td> <td>Integer</td> <td>消息队列最大长度</td></tr> <tr><td>data[0].mqueue_dropped</td> <td>Integer</td> <td>消息队列因超出长度而丢弃的消息数量</td></tr> <tr><td>data[0].awaiting_rel</td> <td>Integer</td> <td>未确认的 PUBREC 报文数量</td></tr> <tr><td>data[0].max_awaiting_rel</td> <td>Integer</td> <td>允许存在未确认的 PUBREC 报文的最大数量</td></tr> <tr><td>data[0].recv_oct</td> <td>Integer</td> <td>EMQ X Broker（下同）接收的字节数量</td></tr> <tr><td>data[0].recv_cnt</td> <td>Integer</td> <td>接收的 TCP 报文数量</td></tr> <tr><td>data[0].recv_pkt</td> <td>Integer</td> <td>接收的 MQTT 报文数量</td></tr> <tr><td>data[0].recv_msg</td> <td>Integer</td> <td>接收的 PUBLISH 报文数量</td></tr> <tr><td>data[0].send_oct</td> <td>Integer</td> <td>发送的字节数量</td></tr> <tr><td>data[0].send_cnt</td> <td>Integer</td> <td>发送的 TCP 报文数量</td></tr> <tr><td>data[0].send_pkt</td> <td>Integer</td> <td>发送的 MQTT 报文数量</td></tr> <tr><td>data[0].send_msg</td> <td>Integer</td> <td>发送的 PUBLISH 报文数量</td></tr> <tr><td>data[0].mailbox_len</td> <td>Integer</td> <td>进程邮箱大小</td></tr> <tr><td>data[0].heap_size</td> <td>Integer</td> <td>进程堆栈大小，单位：字节</td></tr> <tr><td>data[0].reductions</td> <td>Integer</td> <td>Erlang reduction</td></tr> <tr><td>meta</td> <td>Object</td> <td>分页信息</td></tr> <tr><td>meta.page</td> <td>Integer</td> <td>页码</td></tr> <tr><td>meta.limit</td> <td>Integer</td> <td>每页显示的数据条数</td></tr> <tr><td>meta.count</td> <td>Integer</td> <td>数据总条数</td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/clients?_page=1&amp;_limit=10&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;meta&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;page&quot;</span>:1,<span class="token string">&quot;limit&quot;</span>:10,<span class="token string">&quot;count&quot;</span>:1<span class="token punctuation">}</span>,<span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;zone&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;external&quot;</span>,<span class="token string">&quot;recv_cnt&quot;</span>:2,<span class="token string">&quot;max_mqueue&quot;</span>:1000,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;username&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;test&quot;</span>,<span class="token string">&quot;mqueue_len&quot;</span>:0,<span class="token string">&quot;max_inflight&quot;</span>:32,<span class="token string">&quot;is_bridge&quot;</span>:false,<span class="token string">&quot;mqueue_dropped&quot;</span>:0,<span class="token string">&quot;inflight&quot;</span>:0,<span class="token string">&quot;heap_size&quot;</span>:2586,<span class="token string">&quot;max_subscriptions&quot;</span>:0,<span class="token string">&quot;proto_name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;MQTT&quot;</span>,<span class="token string">&quot;created_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-02-19 17:01:26&quot;</span>,<span class="token string">&quot;proto_ver&quot;</span>:4,<span class="token string">&quot;reductions&quot;</span>:3997,<span class="token string">&quot;send_msg&quot;</span>:0,<span class="token string">&quot;ip_address&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;127.0.0.1&quot;</span>,<span class="token string">&quot;send_cnt&quot;</span>:0,<span class="token string">&quot;mailbox_len&quot;</span>:1,<span class="token string">&quot;awaiting_rel&quot;</span>:0,<span class="token string">&quot;keepalive&quot;</span>:60,<span class="token string">&quot;recv_msg&quot;</span>:0,<span class="token string">&quot;send_pkt&quot;</span>:0,<span class="token string">&quot;recv_oct&quot;</span>:29,<span class="token string">&quot;clientid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;example&quot;</span>,<span class="token string">&quot;clean_start&quot;</span>:true,<span class="token string">&quot;expiry_interval&quot;</span>:0,<span class="token string">&quot;connected&quot;</span>:true,<span class="token string">&quot;port&quot;</span>:64491,<span class="token string">&quot;send_oct&quot;</span>:0,<span class="token string">&quot;recv_pkt&quot;</span>:1,<span class="token string">&quot;connected_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-02-19 17:01:26&quot;</span>,<span class="token string">&quot;max_awaiting_rel&quot;</span>:100,<span class="token string">&quot;subscriptions_cnt&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><p>注：在 4.1 后，返回的 <code>meta</code> 内容做了修改：</p> <ul><li><code>count</code>：仍表示总数，但在 多条件/模糊查询时，固定为 -1。</li> <li><code>hasnext</code>：为新增字段，表示是否存在下一页。</li></ul> <h3 id="get-api-v4-clients-clientid"><a href="#get-api-v4-clients-clientid" class="header-anchor">#</a> GET /api/v4/clients/{clientid}</h3> <p>返回指定客户端的信息</p> <p><strong>Path Parameters:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>clientid</td> <td>String</td> <td>True</td> <td>ClientID</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Array of Objects</td> <td>客户端的信息，详细请参见<br><a href="#endpoint-get-clients">GET /api/v4/clients</a></td></tr></tbody></table> <p><strong>Examples:</strong></p> <p>查询指定客户端</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/clients/example&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;recv_cnt&quot;</span>:2,<span class="token string">&quot;max_subscriptions&quot;</span>:0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;proto_ver&quot;</span>:4,<span class="token string">&quot;recv_pkt&quot;</span>:1,<span class="token string">&quot;inflight&quot;</span>:0,<span class="token string">&quot;max_mqueue&quot;</span>:1000,<span class="token string">&quot;heap_size&quot;</span>:2586,<span class="token string">&quot;username&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;test&quot;</span>,<span class="token string">&quot;proto_name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;MQTT&quot;</span>,<span class="token string">&quot;subscriptions_cnt&quot;</span>:0,<span class="token string">&quot;send_pkt&quot;</span>:0,<span class="token string">&quot;created_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-02-20 13:38:51&quot;</span>,<span class="token string">&quot;reductions&quot;</span>:3978,<span class="token string">&quot;ip_address&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;127.0.0.1&quot;</span>,<span class="token string">&quot;send_msg&quot;</span>:0,<span class="token string">&quot;send_cnt&quot;</span>:0,<span class="token string">&quot;expiry_interval&quot;</span>:0,<span class="token string">&quot;keepalive&quot;</span>:60,<span class="token string">&quot;mqueue_dropped&quot;</span>:0,<span class="token string">&quot;is_bridge&quot;</span>:false,<span class="token string">&quot;max_inflight&quot;</span>:32,<span class="token string">&quot;recv_msg&quot;</span>:0,<span class="token string">&quot;max_awaiting_rel&quot;</span>:100,<span class="token string">&quot;awaiting_rel&quot;</span>:0,<span class="token string">&quot;mailbox_len&quot;</span>:1,<span class="token string">&quot;mqueue_len&quot;</span>:0,<span class="token string">&quot;recv_oct&quot;</span>:29,<span class="token string">&quot;connected_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-02-20 13:38:51&quot;</span>,<span class="token string">&quot;clean_start&quot;</span>:true,<span class="token string">&quot;clientid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;example&quot;</span>,<span class="token string">&quot;connected&quot;</span>:true,<span class="token string">&quot;port&quot;</span>:54889,<span class="token string">&quot;send_oct&quot;</span>:0,<span class="token string">&quot;zone&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;external&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="delete-api-v4-clients-clientid"><a href="#delete-api-v4-clients-clientid" class="header-anchor">#</a> DELETE /api/v4/clients/{clientid}</h3> <p>踢除指定客户端。注意踢除客户端操作会将连接与会话一并终结。</p> <p><strong>Path Parameters:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>clientid</td> <td>String</td> <td>True</td> <td>ClientID</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr></tbody></table> <p><strong>Examples:</strong></p> <p>踢除指定客户端</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X DELETE <span class="token string">&quot;http://localhost:8081/api/v4/clients/example&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="get-api-v4-nodes-node-clients"><a href="#get-api-v4-nodes-node-clients" class="header-anchor">#</a> GET /api/v4/nodes/{node}/clients</h3> <p>类似 <a href="#endpoint-get-clients">GET /api/v4/clients</a>，返回指定节点下所有客户端的信息，支持分页。</p> <p><strong>Query String Parameters:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>_page</td> <td>Integer</td> <td>False</td> <td>1</td> <td>页码</td></tr> <tr><td>_limit</td> <td>Integer</td> <td>False</td> <td>10000</td> <td>每页显示的数据条数，未指定时由 <code>emqx-management</code> 插件的配置项 <code>max_row_limit</code> 决定</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Array of Objects</td> <td>所有客户端的信息，详情请参看 <a href="#endpoint-get-clients">GET /api/v4/clients</a></td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/clients?_page=1&amp;_limit=10&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;meta&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;page&quot;</span>:1,<span class="token string">&quot;limit&quot;</span>:10,<span class="token string">&quot;count&quot;</span>:1<span class="token punctuation">}</span>,<span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;recv_cnt&quot;</span>:2,<span class="token string">&quot;max_subscriptions&quot;</span>:0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;proto_ver&quot;</span>:4,<span class="token string">&quot;recv_pkt&quot;</span>:1,<span class="token string">&quot;inflight&quot;</span>:0,<span class="token string">&quot;max_mqueue&quot;</span>:1000,<span class="token string">&quot;heap_size&quot;</span>:2586,<span class="token string">&quot;username&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;test&quot;</span>,<span class="token string">&quot;proto_name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;MQTT&quot;</span>,<span class="token string">&quot;subscriptions_cnt&quot;</span>:0,<span class="token string">&quot;send_pkt&quot;</span>:0,<span class="token string">&quot;created_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-02-19 18:25:18&quot;</span>,<span class="token string">&quot;reductions&quot;</span>:4137,<span class="token string">&quot;ip_address&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;127.0.0.1&quot;</span>,<span class="token string">&quot;send_msg&quot;</span>:0,<span class="token string">&quot;send_cnt&quot;</span>:0,<span class="token string">&quot;expiry_interval&quot;</span>:0,<span class="token string">&quot;keepalive&quot;</span>:60,<span class="token string">&quot;mqueue_dropped&quot;</span>:0,<span class="token string">&quot;is_bridge&quot;</span>:false,<span class="token string">&quot;max_inflight&quot;</span>:32,<span class="token string">&quot;recv_msg&quot;</span>:0,<span class="token string">&quot;max_awaiting_rel&quot;</span>:100,<span class="token string">&quot;awaiting_rel&quot;</span>:0,<span class="token string">&quot;mailbox_len&quot;</span>:1,<span class="token string">&quot;mqueue_len&quot;</span>:0,<span class="token string">&quot;recv_oct&quot;</span>:29,<span class="token string">&quot;connected_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-02-19 18:25:18&quot;</span>,<span class="token string">&quot;clean_start&quot;</span>:true,<span class="token string">&quot;clientid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;example&quot;</span>,<span class="token string">&quot;connected&quot;</span>:true,<span class="token string">&quot;port&quot;</span>:49509,<span class="token string">&quot;send_oct&quot;</span>:0,<span class="token string">&quot;zone&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;external&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="get-api-v4-nodes-node-clients-clientid"><a href="#get-api-v4-nodes-node-clients-clientid" class="header-anchor">#</a> GET /api/v4/nodes/{node}/clients/{clientid}</h3> <p>类似 <a href="#endpoint-get-a-client">GET /api/v4/clients/{clientid}</a>，返回指定节点下指定客户端的信息。</p> <p><strong>Path Parameters:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>clientid</td> <td>String</td> <td>True</td> <td>ClientID</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Object</td> <td>客户端的信息，详细请参见<br><a href="#endpoint-get-clients">GET /api/v4/clients</a></td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/clients/example&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;recv_cnt&quot;</span>:4,<span class="token string">&quot;max_subscriptions&quot;</span>:0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;proto_ver&quot;</span>:4,<span class="token string">&quot;recv_pkt&quot;</span>:1,<span class="token string">&quot;inflight&quot;</span>:0,<span class="token string">&quot;max_mqueue&quot;</span>:1000,<span class="token string">&quot;heap_size&quot;</span>:2586,<span class="token string">&quot;username&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;test&quot;</span>,<span class="token string">&quot;proto_name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;MQTT&quot;</span>,<span class="token string">&quot;subscriptions_cnt&quot;</span>:0,<span class="token string">&quot;send_pkt&quot;</span>:3,<span class="token string">&quot;created_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-02-20 13:38:51&quot;</span>,<span class="token string">&quot;reductions&quot;</span>:5994,<span class="token string">&quot;ip_address&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;127.0.0.1&quot;</span>,<span class="token string">&quot;send_msg&quot;</span>:0,<span class="token string">&quot;send_cnt&quot;</span>:3,<span class="token string">&quot;expiry_interval&quot;</span>:0,<span class="token string">&quot;keepalive&quot;</span>:60,<span class="token string">&quot;mqueue_dropped&quot;</span>:0,<span class="token string">&quot;is_bridge&quot;</span>:false,<span class="token string">&quot;max_inflight&quot;</span>:32,<span class="token string">&quot;recv_msg&quot;</span>:0,<span class="token string">&quot;max_awaiting_rel&quot;</span>:100,<span class="token string">&quot;awaiting_rel&quot;</span>:0,<span class="token string">&quot;mailbox_len&quot;</span>:0,<span class="token string">&quot;mqueue_len&quot;</span>:0,<span class="token string">&quot;recv_oct&quot;</span>:33,<span class="token string">&quot;connected_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-02-20 13:38:51&quot;</span>,<span class="token string">&quot;clean_start&quot;</span>:true,<span class="token string">&quot;clientid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;example&quot;</span>,<span class="token string">&quot;connected&quot;</span>:true,<span class="token string">&quot;port&quot;</span>:54889,<span class="token string">&quot;send_oct&quot;</span>:8,<span class="token string">&quot;zone&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;external&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="delete-api-v4-nodes-node-clients-clientid"><a href="#delete-api-v4-nodes-node-clients-clientid" class="header-anchor">#</a> DELETE /api/v4/nodes/{node}/clients/{clientid}</h3> <p>类似 <a href="#endpoint-delete-a-client">DELETE /api/v4/clients/{clientid}</a>，踢除指定节点下的指定客户端。</p> <p><strong>Path Parameters:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>clientid</td> <td>String</td> <td>True</td> <td>ClientID</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X DELETE <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/clients/example&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="get-api-v4-clients-username-username"><a href="#get-api-v4-clients-username-username" class="header-anchor">#</a> GET /api/v4/clients/username/{username}</h3> <p>通过 Username 查询客户端的信息。由于可能存在多个客户端使用相同的用户名的情况，所以可能同时返回多个客户端信息。</p> <p><strong>Path Parameters:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>username</td> <td>String</td> <td>True</td> <td>Username</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Array of Objects</td> <td>客户端的信息，详细请参见<br><a href="#endpoint-get-clients">GET /api/v4/clients</a></td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/clients/username/steve&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;clean_start&quot;</span>:true,<span class="token string">&quot;awaiting_rel&quot;</span>:0,<span class="token string">&quot;recv_msg&quot;</span>:0,<span class="token string">&quot;proto_name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;MQTT&quot;</span>,<span class="token string">&quot;recv_cnt&quot;</span>:2,<span class="token string">&quot;mailbox_len&quot;</span>:0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;mqueue_len&quot;</span>:0,<span class="token string">&quot;max_subscriptions&quot;</span>:0,<span class="token string">&quot;created_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-02-20 13:50:11&quot;</span>,<span class="token string">&quot;is_bridge&quot;</span>:false,<span class="token string">&quot;heap_size&quot;</span>:2586,<span class="token string">&quot;proto_ver&quot;</span>:4,<span class="token string">&quot;subscriptions_cnt&quot;</span>:0,<span class="token string">&quot;clientid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;example&quot;</span>,<span class="token string">&quot;expiry_interval&quot;</span>:0,<span class="token string">&quot;send_msg&quot;</span>:0,<span class="token string">&quot;inflight&quot;</span>:0,<span class="token string">&quot;reductions&quot;</span>:4673,<span class="token string">&quot;send_pkt&quot;</span>:1,<span class="token string">&quot;zone&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;external&quot;</span>,<span class="token string">&quot;send_cnt&quot;</span>:1,<span class="token string">&quot;ip_address&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;127.0.0.1&quot;</span>,<span class="token string">&quot;keepalive&quot;</span>:60,<span class="token string">&quot;max_inflight&quot;</span>:32,<span class="token string">&quot;recv_oct&quot;</span>:29,<span class="token string">&quot;recv_pkt&quot;</span>:1,<span class="token string">&quot;max_awaiting_rel&quot;</span>:100,<span class="token string">&quot;username&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;steve&quot;</span>,<span class="token string">&quot;connected_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-02-20 13:50:11&quot;</span>,<span class="token string">&quot;connected&quot;</span>:true,<span class="token string">&quot;port&quot;</span>:56429,<span class="token string">&quot;send_oct&quot;</span>:4,<span class="token string">&quot;mqueue_dropped&quot;</span>:0,<span class="token string">&quot;max_mqueue&quot;</span>:1000<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="get-api-v4-nodes-node-clients-username-username"><a href="#get-api-v4-nodes-node-clients-username-username" class="header-anchor">#</a> GET /api/v4/nodes/{node}/clients/username/{username}</h3> <p>类似 <a href="#endpoint-get-clients-by-username">GET /api/v4/clients/username/{username}</a>，在指定节点下，通过 Username 查询指定客户端的信息。</p> <p><strong>Path Parameters:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>username</td> <td>String</td> <td>True</td> <td>Username</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Array of Objects</td> <td>客户端的信息，详细请参见<br><a href="#endpoint-get-clients">GET /api/v4/clients</a></td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/clients/username/test&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;clean_start&quot;</span>:true,<span class="token string">&quot;awaiting_rel&quot;</span>:0,<span class="token string">&quot;recv_msg&quot;</span>:0,<span class="token string">&quot;proto_name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;MQTT&quot;</span>,<span class="token string">&quot;recv_cnt&quot;</span>:6,<span class="token string">&quot;mailbox_len&quot;</span>:0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;mqueue_len&quot;</span>:0,<span class="token string">&quot;max_subscriptions&quot;</span>:0,<span class="token string">&quot;created_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-02-20 13:50:11&quot;</span>,<span class="token string">&quot;is_bridge&quot;</span>:false,<span class="token string">&quot;heap_size&quot;</span>:1598,<span class="token string">&quot;proto_ver&quot;</span>:4,<span class="token string">&quot;subscriptions_cnt&quot;</span>:0,<span class="token string">&quot;clientid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;example&quot;</span>,<span class="token string">&quot;expiry_interval&quot;</span>:0,<span class="token string">&quot;send_msg&quot;</span>:0,<span class="token string">&quot;inflight&quot;</span>:0,<span class="token string">&quot;reductions&quot;</span>:7615,<span class="token string">&quot;send_pkt&quot;</span>:5,<span class="token string">&quot;zone&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;external&quot;</span>,<span class="token string">&quot;send_cnt&quot;</span>:5,<span class="token string">&quot;ip_address&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;127.0.0.1&quot;</span>,<span class="token string">&quot;keepalive&quot;</span>:60,<span class="token string">&quot;max_inflight&quot;</span>:32,<span class="token string">&quot;recv_oct&quot;</span>:37,<span class="token string">&quot;recv_pkt&quot;</span>:1,<span class="token string">&quot;max_awaiting_rel&quot;</span>:100,<span class="token string">&quot;username&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;test&quot;</span>,<span class="token string">&quot;connected_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-02-20 13:50:11&quot;</span>,<span class="token string">&quot;connected&quot;</span>:true,<span class="token string">&quot;port&quot;</span>:56429,<span class="token string">&quot;send_oct&quot;</span>:12,<span class="token string">&quot;mqueue_dropped&quot;</span>:0,<span class="token string">&quot;max_mqueue&quot;</span>:1000<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="get-api-v4-clients-clientid-acl-cache"><a href="#get-api-v4-clients-clientid-acl-cache" class="header-anchor">#</a> GET /api/v4/clients/{clientid}/acl_cache</h3> <p>查询指定客户端的 ACL 缓存。</p> <p><strong>Path Parameters:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>clientid</td> <td>String</td> <td>True</td> <td>ClientID</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Array of Objects</td> <td>ACL 详情</td></tr> <tr><td>data[0].access</td> <td>String</td> <td>发布/订阅</td></tr> <tr><td>data[0].topic</td> <td>String</td> <td>MQTT 主题</td></tr> <tr><td>data[0].result</td> <td>String</td> <td>允许/拒绝</td></tr> <tr><td>data[0].updated_time</td> <td>Integer</td> <td>ACL 缓存建立时间</td></tr></tbody></table> <p><strong>Examples:</strong></p> <p>查询 ACL 缓存</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/clients/example/acl_cache&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;updated_time&quot;</span>:1582180824571,<span class="token string">&quot;topic&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;test&quot;</span>,<span class="token string">&quot;result&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;allow&quot;</span>,<span class="token string">&quot;access&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;publish&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="delete-api-v4-clients-clientid-acl-cache"><a href="#delete-api-v4-clients-clientid-acl-cache" class="header-anchor">#</a> DELETE /api/v4/clients/{clientid}/acl_cache</h3> <p>清除指定客户端的 ACL 缓存。</p> <p><strong>Path Parameters:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>clientid</td> <td>String</td> <td>True</td> <td>ClientID</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr></tbody></table> <p><strong>Examples:</strong></p> <p>清除 ACL 缓存</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X DELETE <span class="token string">&quot;http://localhost:8081/api/v4/clients/example/acl_cache&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h2 id="订阅信息"><a href="#订阅信息" class="header-anchor">#</a> 订阅信息</h2> <h3 id="get-api-v4-subscriptions"><a href="#get-api-v4-subscriptions" class="header-anchor">#</a> GET /api/v4/subscriptions</h3> <p>返回集群下所有订阅信息，支持分页机制。</p> <p><strong>Query String Parameters:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>_page</td> <td>Integer</td> <td>False</td> <td>1</td> <td>页码</td></tr> <tr><td>_limit</td> <td>Integer</td> <td>False</td> <td>10000</td> <td>每页显示的数据条数，未指定时由 <code>emqx-management</code> 插件的配置项 <code>max_row_limit</code> 决定</td></tr></tbody></table> <p>在 4.1 版本后，支持多条件和模糊查询：</p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>clientid</td> <td>String</td> <td>客户端标识符</td></tr> <tr><td>topic</td> <td>String</td> <td>主题，全等查询</td></tr> <tr><td>qos</td> <td>Enum</td> <td>可取值为：<code>0</code>,<code>1</code>,<code>2</code></td></tr> <tr><td>share</td> <td>String</td> <td>共享订阅的组名称</td></tr> <tr><td>_match_topic</td> <td>String</td> <td>主题，匹配查询</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Array of Objects</td> <td>所有订阅信息</td></tr> <tr><td>data[0].node</td> <td>String</td> <td>节点名称</td></tr> <tr><td>data[0].clientid</td> <td>String</td> <td>客户端标识符</td></tr> <tr><td>data[0].topic</td> <td>String</td> <td>订阅主题</td></tr> <tr><td>data[0].qos</td> <td>Integer</td> <td>QoS 等级</td></tr> <tr><td>meta</td> <td>Object</td> <td>同 <code>/api/v4/clients</code></td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/subscriptions?_page=1&amp;_limit=10&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;meta&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;page&quot;</span>:1,<span class="token string">&quot;limit&quot;</span>:10000,<span class="token string">&quot;count&quot;</span>:2<span class="token punctuation">}</span>,<span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;a/+/c&quot;</span>,<span class="token string">&quot;qos&quot;</span>:0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;clientid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;78082755-e8eb-4a87-bab7-8277541513f0&quot;</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;a/b/c&quot;</span>,<span class="token string">&quot;qos&quot;</span>:1,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;clientid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;7a1dfceb-89c0-4f7e-992b-dfeb09329f01&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><p>注：在 4.1 后，返回的 <code>meta</code> 内容做了修改：</p> <ul><li><code>count</code>：仍表示总数，但在 多条件/模糊查询 时，固定为 -1。</li> <li><code>hasnext</code>：为新增字段，表示是否存在下一页。</li></ul> <h3 id="get-api-v4-subscriptions-clientid"><a href="#get-api-v4-subscriptions-clientid" class="header-anchor">#</a> GET /api/v4/subscriptions/{clientid}</h3> <p>返回集群下指定客户端的订阅信息。</p> <p><strong>Path Parameters:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>clientid</td> <td>String</td> <td>True</td> <td>ClientID</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Object</td> <td>所有订阅信息</td></tr> <tr><td>data.node</td> <td>String</td> <td>节点名称</td></tr> <tr><td>data.clientid</td> <td>String</td> <td>客户端标识符</td></tr> <tr><td>data.topic</td> <td>String</td> <td>订阅主题</td></tr> <tr><td>data.qos</td> <td>Integer</td> <td>QoS 等级</td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/subscriptions/123&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;a/b/c&quot;</span>,<span class="token string">&quot;qos&quot;</span>:1,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;clientid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="get-api-v4-nodes-node-subscriptions"><a href="#get-api-v4-nodes-node-subscriptions" class="header-anchor">#</a> GET /api/v4/nodes/{node}/subscriptions</h3> <p>类似 <a href="#endpoint-get-subscriptions">GET /api/v4/subscriptions</a>，返回指定节点下的所有订阅信息，支持分页机制。</p> <p><strong>Query String Parameters:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>_page</td> <td>Integer</td> <td>False</td> <td>1</td> <td>页码</td></tr> <tr><td>_limit</td> <td>Integer</td> <td>False</td> <td>10000</td> <td>每页显示的数据条数，未指定时由 <code>emqx-management</code> 插件的配置项 <code>max_row_limit</code> 决定</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Array of Objects</td> <td>所有订阅信息</td></tr> <tr><td>data[0].node</td> <td>String</td> <td>节点名称</td></tr> <tr><td>data[0].clientid</td> <td>String</td> <td>客户端标识符</td></tr> <tr><td>data[0].topic</td> <td>String</td> <td>订阅主题</td></tr> <tr><td>data[0].qos</td> <td>Integer</td> <td>QoS 等级</td></tr> <tr><td>meta</td> <td>Object</td> <td>同 <code>/api/v4/clients</code></td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/subscriptions?_page=1&amp;limit=10&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;meta&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;page&quot;</span>:1,<span class="token string">&quot;limit&quot;</span>:10000,<span class="token string">&quot;count&quot;</span>:2<span class="token punctuation">}</span>,<span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;a/+/c&quot;</span>,<span class="token string">&quot;qos&quot;</span>:0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;clientid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;78082755-e8eb-4a87-bab7-8277541513f0&quot;</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;a/b/c&quot;</span>,<span class="token string">&quot;qos&quot;</span>:1,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;clientid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;7a1dfceb-89c0-4f7e-992b-dfeb09329f01&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="get-api-v4-nodes-node-subscriptions-clientid"><a href="#get-api-v4-nodes-node-subscriptions-clientid" class="header-anchor">#</a> GET /api/v4/nodes/{node}/subscriptions/{clientid}</h3> <p>类似 <a href="#endpoint-get-subscriptions-by-clientid">GET /api/v4/subscriptions/{clientid}</a>，在指定节点下，查询某 clientid 的所有订阅信息，支持分页机制。</p> <p><strong>Path Parameters:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>clientid</td> <td>String</td> <td>True</td> <td>ClientID</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Object</td> <td>所有订阅信息</td></tr> <tr><td>data.node</td> <td>String</td> <td>节点名称</td></tr> <tr><td>data.clientid</td> <td>String</td> <td>客户端标识符</td></tr> <tr><td>data.topic</td> <td>String</td> <td>订阅主题</td></tr> <tr><td>data.qos</td> <td>Integer</td> <td>QoS 等级</td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/subscriptions/sample&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;a/+/c&quot;</span>,<span class="token string">&quot;qos&quot;</span>:0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;clientid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;sample&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h2 id="路由"><a href="#路由" class="header-anchor">#</a> 路由</h2> <h3 id="get-api-v4-routes"><a href="#get-api-v4-routes" class="header-anchor">#</a> GET /api/v4/routes</h3> <p>返回集群下的所有路由信息，支持分页机制。</p> <p><strong>Query String Parameters:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>_page</td> <td>Integer</td> <td>False</td> <td>1</td> <td>页码</td></tr> <tr><td>_limit</td> <td>Integer</td> <td>False</td> <td>10000</td> <td>每页显示的数据条数，未指定时由 <code>emqx-management</code> 插件的配置项 <code>max_row_limit</code> 决定</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Array of Objects</td> <td>所有路由信息</td></tr> <tr><td>data[0].topic</td> <td>String</td> <td>MQTT 主题</td></tr> <tr><td>data[0].node</td> <td>String</td> <td>节点名称</td></tr> <tr><td>meta</td> <td>Object</td> <td>同 <code>/api/v4/clients</code></td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/routes&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;meta&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;page&quot;</span>:1,<span class="token string">&quot;limit&quot;</span>:10000,<span class="token string">&quot;count&quot;</span>:2<span class="token punctuation">}</span>,<span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;a/+/c&quot;</span>,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;a/b/c&quot;</span>,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="get-api-v4-routes-topic"><a href="#get-api-v4-routes-topic" class="header-anchor">#</a> GET /api/v4/routes/{topic}</h3> <p>返回集群下指定主题的路由信息。</p> <p><strong>Path Parameters:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>topic</td> <td>Integer</td> <td>True</td> <td>主题</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Object</td> <td>所有路由信息</td></tr> <tr><td>data.topic</td> <td>String</td> <td>MQTT 主题</td></tr> <tr><td>data.node</td> <td>String</td> <td>节点名称</td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/routes/a%2fb%2fc&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;a/b/c&quot;</span>,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h2 id="消息发布"><a href="#消息发布" class="header-anchor">#</a> 消息发布</h2> <h3 id="post-api-v4-mqtt-publish"><a href="#post-api-v4-mqtt-publish" class="header-anchor">#</a> POST /api/v4/mqtt/publish</h3> <p>发布 MQTT 消息。</p> <p><strong>Parameters (json):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>topic</td> <td>String</td> <td>Optional</td> <td></td> <td>主题，与 <code>topics</code> 至少指定其中之一</td></tr> <tr><td>topics</td> <td>String</td> <td>Optional</td> <td></td> <td>以 <code>,</code> 分割的多个主题，使用此字段能够同时发布消息到多个主题</td></tr> <tr><td>clientid</td> <td>String</td> <td>Required</td> <td></td> <td>客户端标识符</td></tr> <tr><td>payload</td> <td>String</td> <td>Required</td> <td></td> <td>消息正文</td></tr> <tr><td>encoding</td> <td>String</td> <td>Optional</td> <td>plain</td> <td>消息正文使用的编码方式，目前仅支持 <code>plain</code> 与 <code>base64</code> 两种</td></tr> <tr><td>qos</td> <td>Integer</td> <td>Optional</td> <td>0</td> <td>QoS 等级</td></tr> <tr><td>retain</td> <td>Boolean</td> <td>Optional</td> <td>false</td> <td>是否为保留消息</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X POST <span class="token string">&quot;http://localhost:8081/api/v4/mqtt/publish&quot;</span> -d <span class="token string">'{&quot;topic&quot;:&quot;a/b/c&quot;,&quot;payload&quot;:&quot;Hello World&quot;,&quot;qos&quot;:1,&quot;retain&quot;:false,&quot;clientid&quot;:&quot;example&quot;}'</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h2 id="主题订阅"><a href="#主题订阅" class="header-anchor">#</a> 主题订阅</h2> <h3 id="post-api-v4-mqtt-subscribe"><a href="#post-api-v4-mqtt-subscribe" class="header-anchor">#</a> POST /api/v4/mqtt/subscribe</h3> <p>订阅 MQTT 主题。</p> <p><strong>Parameters (json):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>topic</td> <td>String</td> <td>Optional</td> <td></td> <td>主题，与 <code>topics</code> 至少指定其中之一</td></tr> <tr><td>topics</td> <td>String</td> <td>Optional</td> <td></td> <td>以 <code>,</code> 分割的多个主题，使用此字段能够同时订阅多个主题</td></tr> <tr><td>clientid</td> <td>String</td> <td>Required</td> <td></td> <td>客户端标识符</td></tr> <tr><td>qos</td> <td>Integer</td> <td>Optional</td> <td>0</td> <td>QoS 等级</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr></tbody></table> <p><strong>Examples:</strong></p> <p>同时订阅 <code>a</code>, <code>b</code>, <code>c</code> 三个主题</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X POST <span class="token string">&quot;http://localhost:8081/api/v4/mqtt/subscribe&quot;</span> -d <span class="token string">'{&quot;topics&quot;:&quot;a,b,c&quot;,&quot;qos&quot;:1,&quot;clientid&quot;:&quot;example&quot;}'</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="post-api-v4-mqtt-unsubscribe"><a href="#post-api-v4-mqtt-unsubscribe" class="header-anchor">#</a> POST /api/v4/mqtt/unsubscribe</h3> <p>取消订阅。</p> <p><strong>Parameters (json):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>topic</td> <td>String</td> <td>Required</td> <td></td> <td>主题</td></tr> <tr><td>clientid</td> <td>String</td> <td>Required</td> <td></td> <td>客户端标识符</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr></tbody></table> <p><strong>Examples:</strong></p> <p>取消订阅 <code>a</code> 主题</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X POST <span class="token string">&quot;http://localhost:8081/api/v4/mqtt/unsubscribe&quot;</span> -d <span class="token string">'{&quot;topic&quot;:&quot;a&quot;,&quot;qos&quot;:1,&quot;clientid&quot;:&quot;example&quot;}'</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h2 id="消息批量发布"><a href="#消息批量发布" class="header-anchor">#</a> 消息批量发布</h2> <h3 id="post-api-v4-mqtt-publish-batch"><a href="#post-api-v4-mqtt-publish-batch" class="header-anchor">#</a> POST /api/v4/mqtt/publish_batch</h3> <p>批量发布 MQTT 消息。</p> <p><strong>Parameters (json):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>[0].topic</td> <td>String</td> <td>Optional</td> <td></td> <td>主题，与 <code>topics</code> 至少指定其中之一</td></tr> <tr><td>[0].topics</td> <td>String</td> <td>Optional</td> <td></td> <td>以 <code>,</code> 分割的多个主题，使用此字段能够同时发布消息到多个主题</td></tr> <tr><td>[0].clientid</td> <td>String</td> <td>Required</td> <td></td> <td>客户端标识符</td></tr> <tr><td>[0].payload</td> <td>String</td> <td>Required</td> <td></td> <td>消息正文</td></tr> <tr><td>[0].encoding</td> <td>String</td> <td>Optional</td> <td>plain</td> <td>消息正文使用的编码方式，目前仅支持 <code>plain</code> 与 <code>base64</code> 两种</td></tr> <tr><td>[0].qos</td> <td>Integer</td> <td>Optional</td> <td>0</td> <td>QoS 等级</td></tr> <tr><td>[0].retain</td> <td>Boolean</td> <td>Optional</td> <td>false</td> <td>是否为保留消息</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X POST <span class="token string">&quot;http://localhost:8081/api/v4/mqtt/publish_batch&quot;</span> -d <span class="token string">'[{&quot;topic&quot;:&quot;a/b/c&quot;,&quot;payload&quot;:&quot;Hello World&quot;,&quot;qos&quot;:1,&quot;retain&quot;:false,&quot;clientid&quot;:&quot;example&quot;},{&quot;topic&quot;:&quot;a/b/c&quot;,&quot;payload&quot;:&quot;Hello World Again&quot;,&quot;qos&quot;:0,&quot;retain&quot;:false,&quot;clientid&quot;:&quot;example&quot;}]'</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h2 id="主题批量订阅"><a href="#主题批量订阅" class="header-anchor">#</a> 主题批量订阅</h2> <h3 id="post-api-v4-mqtt-subscribe-batch"><a href="#post-api-v4-mqtt-subscribe-batch" class="header-anchor">#</a> POST /api/v4/mqtt/subscribe_batch</h3> <p>批量订阅 MQTT 主题。</p> <p><strong>Parameters (json):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>[0].topic</td> <td>String</td> <td>Optional</td> <td></td> <td>主题，与 <code>topics</code> 至少指定其中之一</td></tr> <tr><td>[0].topics</td> <td>String</td> <td>Optional</td> <td></td> <td>以 <code>,</code> 分割的多个主题，使用此字段能够同时订阅多个主题</td></tr> <tr><td>[0].clientid</td> <td>String</td> <td>Required</td> <td></td> <td>客户端标识符</td></tr> <tr><td>[0].qos</td> <td>Integer</td> <td>Optional</td> <td>0</td> <td>QoS 等级</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr></tbody></table> <p><strong>Examples:</strong></p> <p>一次性订阅 <code>a</code>, <code>b</code>, <code>c</code> 三个主题</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X POST <span class="token string">&quot;http://localhost:8081/api/v4/mqtt/subscribe_batch&quot;</span> -d <span class="token string">'[{&quot;topic&quot;:&quot;a&quot;,&quot;qos&quot;:1,&quot;clientid&quot;:&quot;example&quot;},{&quot;topic&quot;:&quot;b&quot;,&quot;qos&quot;:1,&quot;clientid&quot;:&quot;example&quot;},{&quot;topic&quot;:&quot;c&quot;,&quot;qos&quot;:1,&quot;clientid&quot;:&quot;example&quot;}]'</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="post-api-v4-mqtt-unsubscribe-batch"><a href="#post-api-v4-mqtt-unsubscribe-batch" class="header-anchor">#</a> POST /api/v4/mqtt/unsubscribe_batch</h3> <p>批量取消订阅。</p> <p><strong>Parameters (json):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>[0].topic</td> <td>String</td> <td>Required</td> <td></td> <td>主题</td></tr> <tr><td>[0].clientid</td> <td>String</td> <td>Required</td> <td></td> <td>客户端标识符</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr></tbody></table> <p><strong>Examples:</strong></p> <p>一次性取消订阅 <code>a</code>, <code>b</code> 主题</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X POST <span class="token string">&quot;http://localhost:8081/api/v4/mqtt/unsubscribe_batch&quot;</span> -d <span class="token string">'[{&quot;topic&quot;:&quot;a&quot;,&quot;qos&quot;:1,&quot;clientid&quot;:&quot;example&quot;},{&quot;topic&quot;:&quot;b&quot;,&quot;qos&quot;:1,&quot;clientid&quot;:&quot;example&quot;}]'</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h2 id="插件"><a href="#插件" class="header-anchor">#</a> 插件</h2> <h3 id="get-api-v4-plugins"><a href="#get-api-v4-plugins" class="header-anchor">#</a> GET /api/v4/plugins</h3> <p>返回集群下的所有插件信息。</p> <p><strong>Path Parameters:</strong> 无</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Array of Objects</td> <td>所有路由信息</td></tr> <tr><td>data[0].node</td> <td>String</td> <td>节点名称</td></tr> <tr><td>data[0].plugins</td> <td>Array</td> <td>插件信息，由对象组成的数组，见下文</td></tr> <tr><td>data[0].plugins.name</td> <td>String</td> <td>插件名称</td></tr> <tr><td>data[0].plugins.version</td> <td>String</td> <td>插件版本</td></tr> <tr><td>data[0].plugins.description</td> <td>String</td> <td>插件描述</td></tr> <tr><td>data[0].plugins.active</td> <td>Boolean</td> <td>插件是否启动</td></tr> <tr><td>data[0].plugins.type</td> <td>String</td> <td>插件类型，目前有<br><code>auth</code>、<code>bridge</code>、<code>feature</code>、<code>protocol</code> 四种类型</td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/plugins&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;plugins&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;version&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;develop&quot;</span>,<span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;auth&quot;</span>,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx_auth_clientid&quot;</span>,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;EMQ X Authentication with ClientId/Password&quot;</span>,<span class="token string">&quot;active&quot;</span>:false<span class="token punctuation">}</span>, <span class="token punctuation">..</span>.<span class="token punctuation">]</span>,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="get-api-v4-nodes-node-plugins"><a href="#get-api-v4-nodes-node-plugins" class="header-anchor">#</a> GET /api/v4/nodes/{node}/plugins</h3> <p>类似 <a href="#endpoint-get-plugins">GET /api/v4/plugins</a>，返回指定节点下的插件信息。</p> <p><strong>Path Parameters:</strong> 无</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Array of Objects</td> <td>所有路由信息</td></tr> <tr><td>data[0].name</td> <td>String</td> <td>插件名称</td></tr> <tr><td>data[0].version</td> <td>String</td> <td>插件版本</td></tr> <tr><td>data[0].description</td> <td>String</td> <td>插件描述</td></tr> <tr><td>data[0].active</td> <td>Boolean</td> <td>插件是否启动</td></tr> <tr><td>data[0].type</td> <td>String</td> <td>插件类型，目前有<br><code>auth</code>、<code>bridge</code>、<code>feature</code>、<code>protocol</code> 四种类型</td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/plugins&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;version&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;develop&quot;</span>,<span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;auth&quot;</span>,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx_auth_clientid&quot;</span>,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;EMQ X Authentication with ClientId/Password&quot;</span>,<span class="token string">&quot;active&quot;</span>:false<span class="token punctuation">}</span>, <span class="token punctuation">..</span>.<span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="put-api-v4-nodes-node-plugins-plugin-load"><a href="#put-api-v4-nodes-node-plugins-plugin-load" class="header-anchor">#</a> PUT /api/v4/nodes/{node}/plugins/{plugin}/load</h3> <p>加载指定节点下的指定插件。</p> <p><strong>Parameters:</strong> 无</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X PUT <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/plugins/emqx_delayed_publish/load&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="put-api-v4-nodes-node-plugins-plugin-unload"><a href="#put-api-v4-nodes-node-plugins-plugin-unload" class="header-anchor">#</a> PUT /api/v4/nodes/{node}/plugins/{plugin}/unload</h3> <p>卸载指定节点下的指定插件。</p> <p><strong>Parameters:</strong> 无</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X PUT <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/plugins/emqx_delayed_publish/unload&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="put-api-v4-nodes-node-plugins-plugin-reload"><a href="#put-api-v4-nodes-node-plugins-plugin-reload" class="header-anchor">#</a> PUT /api/v4/nodes/{node}/plugins/{plugin}/reload</h3> <p>重新加载指定节点下的指定插件。</p> <p><strong>Parameters:</strong> 无</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X PUT <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/plugins/emqx_delayed_publish/reload&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h2 id="监听器"><a href="#监听器" class="header-anchor">#</a> 监听器</h2> <h3 id="get-api-v4-listeners"><a href="#get-api-v4-listeners" class="header-anchor">#</a> GET /api/v4/listeners</h3> <p>返回集群下的所有监听器信息。</p> <p><strong>Path Parameters:</strong> 无</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Array of Objects</td> <td>各节点的监听器列表</td></tr> <tr><td>data[0].node</td> <td>String</td> <td>节点名称</td></tr> <tr><td>data[0].listeners</td> <td>Array of Objects</td> <td>监听器列表</td></tr> <tr><td>data[0].listeners[0].acceptors</td> <td>Integer</td> <td>Acceptor 进程数量</td></tr> <tr><td>data[0].listeners[0].listen_on</td> <td>String</td> <td>监听端口</td></tr> <tr><td>data[0].listeners[0].protocol</td> <td>String</td> <td>插件描述</td></tr> <tr><td>data[0].listeners[0].current_conns</td> <td>Integer</td> <td>插件是否启动</td></tr> <tr><td>data[0].listeners[0].max_conns</td> <td>Integer</td> <td>允许建立的最大连接数量</td></tr> <tr><td>data[0].listeners[0].shutdown_count</td> <td>Array of Objects</td> <td>连接关闭原因及计数</td></tr></tbody></table> <p><em>常见 shutdown_count</em></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>normal</td> <td>Integer</td> <td>正常关闭的连接数量，仅在计数大于 0 时返回</td></tr> <tr><td>kicked</td> <td>Integer</td> <td>被手动踢除的连接数量，仅在计数大于 0 时返回</td></tr> <tr><td>discarded</td> <td>Integer</td> <td>由于 <code>Clean Session</code> 或 <code>Clean Start</code> 为 <code>true</code> 而被丢弃的连接数量</td></tr> <tr><td>takeovered</td> <td>Integer</td> <td>由于 <code>Clean Session</code> 或 <code>Clean Start</code> 为 <code>false</code> 而被接管的连接数量</td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/listeners&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;listeners&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;mqtt:ssl&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:102400,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;8883&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:0,<span class="token string">&quot;acceptors&quot;</span>:16<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;mqtt:tcp&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:1024000,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;0.0.0.0:1883&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:13,<span class="token string">&quot;acceptors&quot;</span>:8<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;mqtt:tcp&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:1024000,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;127.0.0.1:11883&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:0,<span class="token string">&quot;acceptors&quot;</span>:4<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;http:dashboard&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:512,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;18083&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:0,<span class="token string">&quot;acceptors&quot;</span>:4<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;http:management&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:512,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;8081&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:1,<span class="token string">&quot;acceptors&quot;</span>:2<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;https:dashboard&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:512,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;18084&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:0,<span class="token string">&quot;acceptors&quot;</span>:2<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;mqtt:ws:8083&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:102400,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;8083&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:1,<span class="token string">&quot;acceptors&quot;</span>:4<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;mqtt:wss:8084&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:16,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;8084&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:0,<span class="token string">&quot;acceptors&quot;</span>:4<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="get-api-v4-nodes-node-listeners"><a href="#get-api-v4-nodes-node-listeners" class="header-anchor">#</a> GET /api/v4/nodes/{node}/listeners</h3> <p>类似 <a href="#endpoint-get-listeners">GET /api/v4/listeners</a>，返回指定节点的监听器信息。</p> <p><strong>Path Parameters:</strong> 无</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Array of Objects</td> <td>各节点的监听器列表</td></tr> <tr><td>data[0].acceptors</td> <td>Integer</td> <td>Acceptor 进程数量</td></tr> <tr><td>data[0].listen_on</td> <td>String</td> <td>监听端口</td></tr> <tr><td>data[0].protocol</td> <td>String</td> <td>插件描述</td></tr> <tr><td>data[0].current_conns</td> <td>Integer</td> <td>插件是否启动</td></tr> <tr><td>data[0].max_conns</td> <td>Integer</td> <td>允许建立的最大连接数量</td></tr> <tr><td>data[0].shutdown_count</td> <td>Array of Objects</td> <td>连接关闭原因及计数</td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/listeners&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;mqtt:ssl&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:102400,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;8883&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:0,<span class="token string">&quot;acceptors&quot;</span>:16<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;mqtt:tcp&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:1024000,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;0.0.0.0:1883&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:13,<span class="token string">&quot;acceptors&quot;</span>:8<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;mqtt:tcp&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:1024000,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;127.0.0.1:11883&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:0,<span class="token string">&quot;acceptors&quot;</span>:4<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;http:dashboard&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:512,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;18083&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:0,<span class="token string">&quot;acceptors&quot;</span>:4<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;http:management&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:512,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;8081&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:1,<span class="token string">&quot;acceptors&quot;</span>:2<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;https:dashboard&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:512,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;18084&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:0,<span class="token string">&quot;acceptors&quot;</span>:2<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;mqtt:ws:8083&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:102400,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;8083&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:1,<span class="token string">&quot;acceptors&quot;</span>:4<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;mqtt:wss:8084&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:16,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;8084&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:0,<span class="token string">&quot;acceptors&quot;</span>:4<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h2 id="内置模块"><a href="#内置模块" class="header-anchor">#</a> 内置模块</h2> <h3 id="get-api-v4-modules"><a href="#get-api-v4-modules" class="header-anchor">#</a> GET /api/v4/modules</h3> <p>返回集群下所有内置模块信息。</p> <p><strong>Path Parameters:</strong> 无</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Array of Objects</td> <td>各节点上的内置模块列表</td></tr> <tr><td>data[0].node</td> <td>String</td> <td>节点名称</td></tr> <tr><td>data[0].modules</td> <td>Object</td> <td>内置模块信息列表，详见下面的 modules:</td></tr></tbody></table> <p><strong>modules:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>name</td> <td>String</td> <td>模块名</td></tr> <tr><td>description</td> <td>String</td> <td>模块功能描述</td></tr> <tr><td>active</td> <td>Boolean</td> <td>是否处于活跃状态（是否正在运行）</td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/modules&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;modules&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx_mod_delayed&quot;</span>,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;EMQ X Delayed Publish Module&quot;</span>,<span class="token string">&quot;active&quot;</span>:true<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx_mod_topic_metrics&quot;</span>,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;EMQ X Topic Metrics Module&quot;</span>,<span class="token string">&quot;active&quot;</span>:false<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx_mod_subscription&quot;</span>,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;EMQ X Subscription Module&quot;</span>,<span class="token string">&quot;active&quot;</span>:false<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx_mod_acl_internal&quot;</span>,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;EMQ X Internal ACL Module&quot;</span>,<span class="token string">&quot;active&quot;</span>:true<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx_mod_rewrite&quot;</span>,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;EMQ X Topic Rewrite Module&quot;</span>,<span class="token string">&quot;active&quot;</span>:false<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx_mod_presence&quot;</span>,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;EMQ X Presence Module&quot;</span>,<span class="token string">&quot;active&quot;</span>:true<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="get-api-v4-nodes-node-modules"><a href="#get-api-v4-nodes-node-modules" class="header-anchor">#</a> GET /api/v4/nodes/{node}/modules</h3> <p>类似 <a href="#endpoint-get-modules">GET /api/v4/modules</a>，返回指定节点下所有内置模块信息。</p> <h3 id="put-api-v4-modules-module-load"><a href="#put-api-v4-modules-module-load" class="header-anchor">#</a> PUT /api/v4/modules/{module}/load</h3> <p>加载集群下所有节点的指定内置模块。</p> <p><strong>Path Parameters:</strong> 无</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>message</td> <td>String</td> <td>仅在发生错误时返回，用于提供更详细的错误信息</td></tr></tbody></table> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X PUT <span class="token string">&quot;http://localhost:8081/api/v4/modules/emqx_mod_topic_metrics/load&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="put-api-v4-nodes-node-modules-module-load"><a href="#put-api-v4-nodes-node-modules-module-load" class="header-anchor">#</a> PUT /api/v4/nodes/{node}/modules/{module}/load</h3> <p>类似 <a href="#endpoint-load-module">PUT /api/v4/modules/{module}/load</a>，加载指定节点下的指定内置模块。</p> <h3 id="put-api-v4-modules-module-unload"><a href="#put-api-v4-modules-module-unload" class="header-anchor">#</a> PUT /api/v4/modules/{module}/unload</h3> <p>卸载集群下所有节点的指定内置模块。</p> <p><strong>Path Parameters:</strong> 无</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>message</td> <td>String</td> <td>仅在发生错误时返回，用于提供更详细的错误信息</td></tr></tbody></table> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X PUT <span class="token string">&quot;http://localhost:8081/api/v4/modules/emqx_mod_topic_metrics/unload&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="put-api-v4-nodes-node-modules-module-unload"><a href="#put-api-v4-nodes-node-modules-module-unload" class="header-anchor">#</a> PUT /api/v4/nodes/{node}/modules/{module}/unload</h3> <p>类似 <a href="#endpoint-unload-module">PUT /api/v4/modules/{module}/unload</a>，卸载指定节点下的指定内置模块。</p> <h3 id="put-api-v4-modules-module-reload"><a href="#put-api-v4-modules-module-reload" class="header-anchor">#</a> PUT /api/v4/modules/{module}/reload</h3> <p>重新加载集群下所有节点的指定内置模块，仅为 <code>emqx_mod_acl_internal</code> 提供此功能。</p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>message</td> <td>String</td> <td>仅在发生错误时返回，用于提供更详细的错误信息</td></tr></tbody></table> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X PUT <span class="token string">&quot;http://localhost:8081/api/v4/modules/emqx_mod_acl_internal/reload&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="put-api-v4-nodes-node-modules-module-reload"><a href="#put-api-v4-nodes-node-modules-module-reload" class="header-anchor">#</a> PUT /api/v4/nodes/{node}/modules/{module}/reload</h3> <p>类似 <a href="#endpoint-reload-module">PUT /api/v4/modules/{module}/reload</a>，重新加载指定节点下的指定内置模块，仅为 <code>emqx_mod_acl_internal</code> 提供此功能。</p> <h2 id="统计指标"><a href="#统计指标" class="header-anchor">#</a> 统计指标</h2> <h3 id="get-api-v4-metrics"><a href="#get-api-v4-metrics" class="header-anchor">#</a> GET /api/v4/metrics</h3> <p>返回集群下所有统计指标数据。</p> <p><strong>Path Parameters:</strong> 无</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Array of Objects</td> <td>各节点上的统计指标列表</td></tr> <tr><td>data[0].node</td> <td>String</td> <td>节点名称</td></tr> <tr><td>data[0].metrics</td> <td>Object</td> <td>监控指标数据，详见下面的 metrics：</td></tr></tbody></table> <p><strong>metrics：</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>actions.failure</td> <td>Integer</td> <td>规则引擎 action 成功失败次数</td></tr> <tr><td>actions.success</td> <td>Integer</td> <td>规则引擎 action 执行失败次数</td></tr> <tr><td>bytes.received</td> <td>Integer</td> <td>EMQ X 接收的字节数</td></tr> <tr><td>bytes.sent</td> <td>Integer</td> <td>EMQ X 在此连接上发送的字节数</td></tr> <tr><td>client.authenticate</td> <td>Integer</td> <td>客户端认证次数</td></tr> <tr><td>client.auth.anonymous</td> <td>Integer</td> <td>匿名登录的客户端数量</td></tr> <tr><td>client.connect</td> <td>Integer</td> <td>客户端连接次数</td></tr> <tr><td>client.connack</td> <td>Integer</td> <td>发送 CONNACK 报文的次数</td></tr> <tr><td>client.connected</td> <td>Integer</td> <td>客户端成功连接次数</td></tr> <tr><td>client.disconnected</td> <td>Integer</td> <td>客户端断开连接次数</td></tr> <tr><td>client.check_acl</td> <td>Integer</td> <td>ACL 规则检查次数</td></tr> <tr><td>client.subscribe</td> <td>Integer</td> <td>客户端订阅次数</td></tr> <tr><td>client.unsubscribe</td> <td>Integer</td> <td>客户端取消订阅次数</td></tr> <tr><td>delivery.dropped.too_large</td> <td>Integer</td> <td>发送时由于长度超过限制而被丢弃的消息数量</td></tr> <tr><td>delivery.dropped.queue_full</td> <td>Integer</td> <td>发送时由于消息队列满而被丢弃的 QoS 不为 0 的消息数量</td></tr> <tr><td>delivery.dropped.qos0_msg</td> <td>Integer</td> <td>发送时由于消息队列满而被丢弃的 QoS 为 0 的消息数量</td></tr> <tr><td>delivery.dropped.expired</td> <td>Integer</td> <td>发送时由于消息过期而被丢弃的消息数量</td></tr> <tr><td>delivery.dropped.no_local</td> <td>Integer</td> <td>发送时由于 <code>No Local</code> 订阅选项而被丢弃的消息数量</td></tr> <tr><td>delivery.dropped</td> <td>Integer</td> <td>发送时丢弃的消息总数</td></tr> <tr><td>messages.delayed</td> <td>Integer</td> <td>EMQ X 存储的延迟发布的消息数量</td></tr> <tr><td>messages.delivered</td> <td>Integer</td> <td>EMQ X 内部转发到订阅进程的消息数量</td></tr> <tr><td>messages.dropped</td> <td>Integer</td> <td>EMQ X 内部转发到订阅进程前丢弃的消息总数</td></tr> <tr><td>messages.dropped.expired</td> <td>Integer</td> <td>接收时由于消息过期而被丢弃的消息数量</td></tr> <tr><td>messages.dropped.no_subscribers</td> <td>Integer</td> <td>由于没有订阅者而被丢弃的消息数量</td></tr> <tr><td>messages.forward</td> <td>Integer</td> <td>向其他节点转发的消息数量</td></tr> <tr><td>messages.publish</td> <td>Integer</td> <td>除系统消息外发布的消息数量</td></tr> <tr><td>messages.qos0.received</td> <td>Integer</td> <td>接收来自客户端的 QoS 0 消息数量</td></tr> <tr><td>messages.qos1.received</td> <td>Integer</td> <td>接收来自客户端的 QoS 1 消息数量</td></tr> <tr><td>messages.qos2.received</td> <td>Integer</td> <td>接收来自客户端的 QoS 2 消息数量</td></tr> <tr><td>messages.qos0.sent</td> <td>Integer</td> <td>发送给客户端的 QoS 0 消息数量</td></tr> <tr><td>messages.qos1.sent</td> <td>Integer</td> <td>发送给客户端的 QoS 1 消息数量</td></tr> <tr><td>messages.qos2.sent</td> <td>Integer</td> <td>发送给客户端的 QoS 2 消息数量</td></tr> <tr><td>messages.received</td> <td>Integer</td> <td>接收来自客户端的消息数量，等于 <code>messages.qos0.received</code>，<code>messages.qos1.received</code> 与 <code>messages.qos2.received</code> 之和</td></tr> <tr><td>messages.sent</td> <td>Integer</td> <td>发送给客户端的消息数量，等于 <code>messages.qos0.sent</code>，<code>messages.qos1.sent</code> 与 <code>messages.qos2.sent</code> 之和</td></tr> <tr><td>messages.retained</td> <td>Integer</td> <td>EMQ X 存储的保留消息数量</td></tr> <tr><td>messages.acked</td> <td>Integer</td> <td>接收的 PUBACK 和 PUBREC 报文数量</td></tr> <tr><td>packets.received</td> <td>Integer</td> <td>接收的报文数量</td></tr> <tr><td>packets.sent</td> <td>Integer</td> <td>发送的报文数量</td></tr> <tr><td>packets.connect.received</td> <td>Integer</td> <td>接收的 CONNECT 报文数量</td></tr> <tr><td>packets.connack.auth_error</td> <td>Integer</td> <td>接收的认证失败的 CONNECT 报文数量</td></tr> <tr><td>packets.connack.error</td> <td>Integer</td> <td>接收的未成功连接的 CONNECT 报文数量</td></tr> <tr><td>packets.connack.sent</td> <td>Integer</td> <td>发送的 CONNACK 报文数量</td></tr> <tr><td>packets.publish.received</td> <td>Integer</td> <td>接收的 PUBLISH 报文数量</td></tr> <tr><td>packets.publish.sent</td> <td>Integer</td> <td>发送的 PUBLISH 报文数量</td></tr> <tr><td>packets.publish.inuse</td> <td>Integer</td> <td>接收的报文标识符已被占用的 PUBLISH 报文数量</td></tr> <tr><td>packets.publish.auth_error</td> <td>Integer</td> <td>接收的未通过 ACL 检查的 PUBLISH 报文数量</td></tr> <tr><td>packets.publish.error</td> <td>Integer</td> <td>接收的无法被发布的 PUBLISH 报文数量</td></tr> <tr><td>packets.publish.dropped</td> <td>Integer</td> <td>超出接收限制而被丢弃的消息数量</td></tr> <tr><td>packets.puback.received</td> <td>Integer</td> <td>接收的 PUBACK 报文数量</td></tr> <tr><td>packets.puback.sent</td> <td>Integer</td> <td>发送的 PUBACK 报文数量</td></tr> <tr><td>packets.puback.inuse</td> <td>Integer</td> <td>接收的报文标识符已被占用的 PUBACK 报文数量</td></tr> <tr><td>packets.puback.missed</td> <td>Integer</td> <td>接收的未知报文标识符 PUBACK 报文数量</td></tr> <tr><td>packets.pubrec.received</td> <td>Integer</td> <td>接收的 PUBREC 报文数量</td></tr> <tr><td>packets.pubrec.sent</td> <td>Integer</td> <td>发送的 PUBREC 报文数量</td></tr> <tr><td>packets.pubrec.inuse</td> <td>Integer</td> <td>接收的报文标识符已被占用的 PUBREC 报文数量</td></tr> <tr><td>packets.pubrec.missed</td> <td>Integer</td> <td>接收的未知报文标识符 PUBREC 报文数量</td></tr> <tr><td>packets.pubrel.received</td> <td>Integer</td> <td>接收的 PUBREL 报文数量</td></tr> <tr><td>packets.pubrel.sent</td> <td>Integer</td> <td>发送的 PUBREL 报文数量</td></tr> <tr><td>packets.pubrel.missed</td> <td>Integer</td> <td>接收的未知报文标识符 PUBREL 报文数量</td></tr> <tr><td>packets.pubcomp.received</td> <td>Integer</td> <td>接收的 PUBCOMP 报文数量</td></tr> <tr><td>packets.pubcomp.sent</td> <td>Integer</td> <td>发送的 PUBCOMP 报文数量</td></tr> <tr><td>packets.pubcomp.inuse</td> <td>Integer</td> <td>接收的报文标识符已被占用的 PUBCOMP 报文数量</td></tr> <tr><td>packets.pubcomp.missed</td> <td>Integer</td> <td>发送的 PUBCOMP 报文数量</td></tr> <tr><td>packets.subscribe.received</td> <td>Integer</td> <td>接收的 SUBSCRIBE 报文数量</td></tr> <tr><td>packets.subscribe.error</td> <td>Integer</td> <td>接收的订阅失败的 SUBSCRIBE 报文数量</td></tr> <tr><td>packets.subscribe.auth_error</td> <td>Integer</td> <td>接收的未通过 ACL 检查的 SUBACK 报文数量</td></tr> <tr><td>packets.suback.sent</td> <td>Integer</td> <td>发送的 SUBACK 报文数量</td></tr> <tr><td>packets.unsubscribe.received</td> <td>Integer</td> <td>接收的 UNSUBSCRIBE 报文数量</td></tr> <tr><td>packets.unsubscribe.error</td> <td>Integer</td> <td>接收的取消订阅失败的 UNSUBSCRIBE 报文数量</td></tr> <tr><td>packets.unsuback.sent</td> <td>Integer</td> <td>发送的 UNSUBACK 报文数量</td></tr> <tr><td>packets.pingreq.received</td> <td>Integer</td> <td>接收的 PINGREQ 报文数量</td></tr> <tr><td>packets.pingresp.sent</td> <td>Integer</td> <td>发送的 PUBRESP 报文数量</td></tr> <tr><td>packets.disconnect.received</td> <td>Integer</td> <td>接收的 DISCONNECT 报文数量</td></tr> <tr><td>packets.disconnect.sent</td> <td>Integer</td> <td>发送的 DISCONNECT 报文数量</td></tr> <tr><td>packets.auth.received</td> <td>Integer</td> <td>接收的 AUTH 报文数量</td></tr> <tr><td>packets.auth.sent</td> <td>Integer</td> <td>发送的 AUTH 报文数量</td></tr> <tr><td>rules.matched</td> <td>Integer</td> <td>规则的匹配次数</td></tr> <tr><td>session.created</td> <td>Integer</td> <td>创建的会话数量</td></tr> <tr><td>session.discarded</td> <td>Integer</td> <td>由于 <code>Clean Session</code> 或 <code>Clean Start</code> 为 <code>true</code> 而被丢弃的会话数量</td></tr> <tr><td>session.resumed</td> <td>Integer</td> <td>由于 <code>Clean Session</code> 或 <code>Clean Start</code> 为 <code>false</code> 而恢复的会话数量</td></tr> <tr><td>session.takeovered</td> <td>Integer</td> <td>由于 <code>Clean Session</code> 或 <code>Clean Start</code> 为 <code>false</code> 而被接管的会话数量</td></tr> <tr><td>session.terminated</td> <td>Integer</td> <td>终结的会话数量</td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/metrics&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;metrics&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;messages.dropped.no_subscribers&quot;</span>:0,<span class="token string">&quot;packets.connack.sent&quot;</span>:13,<span class="token string">&quot;bytes.received&quot;</span>:805,<span class="token string">&quot;messages.received&quot;</span>:0,<span class="token string">&quot;packets.unsuback.sent&quot;</span>:0,<span class="token string">&quot;messages.delivered&quot;</span>:0,<span class="token string">&quot;client.disconnected&quot;</span>:0,<span class="token string">&quot;packets.puback.sent&quot;</span>:0,<span class="token string">&quot;packets.subscribe.auth_error&quot;</span>:0,<span class="token string">&quot;delivery.dropped.queue_full&quot;</span>:0,<span class="token string">&quot;messages.forward&quot;</span>:0,<span class="token string">&quot;delivery.dropped.qos0_msg&quot;</span>:0,<span class="token string">&quot;delivery.dropped.expired&quot;</span>:0,<span class="token string">&quot;bytes.sent&quot;</span>:52,<span class="token string">&quot;messages.sent&quot;</span>:0,<span class="token string">&quot;delivery.dropped.no_local&quot;</span>:0,<span class="token string">&quot;packets.pubrec.received&quot;</span>:0,<span class="token string">&quot;packets.pubcomp.received&quot;</span>:0,<span class="token string">&quot;client.check_acl&quot;</span>:0,<span class="token string">&quot;packets.puback.received&quot;</span>:0,<span class="token string">&quot;session.takeovered&quot;</span>:0,<span class="token string">&quot;messages.dropped.expired&quot;</span>:0,<span class="token string">&quot;actions.success&quot;</span>:0,<span class="token string">&quot;messages.qos1.sent&quot;</span>:0,<span class="token string">&quot;messages.retained&quot;</span>:0,<span class="token string">&quot;packets.pubcomp.inuse&quot;</span>:0,<span class="token string">&quot;packets.pubrec.sent&quot;</span>:0,<span class="token string">&quot;packets.received&quot;</span>:13,<span class="token string">&quot;messages.acked&quot;</span>:0,<span class="token string">&quot;session.terminated&quot;</span>:0,<span class="token string">&quot;packets.sent&quot;</span>:13,<span class="token string">&quot;packets.unsubscribe.error&quot;</span>:0,<span class="token string">&quot;client.connect&quot;</span>:13,<span class="token string">&quot;packets.pubrec.missed&quot;</span>:0,<span class="token string">&quot;packets.auth.sent&quot;</span>:0,<span class="token string">&quot;packets.disconnect.received&quot;</span>:0,<span class="token string">&quot;messages.qos2.sent&quot;</span>:0,<span class="token string">&quot;client.auth.anonymous&quot;</span>:13,<span class="token string">&quot;packets.auth.received&quot;</span>:0,<span class="token string">&quot;packets.unsubscribe.received&quot;</span>:0,<span class="token string">&quot;packets.publish.auth_error&quot;</span>:0,<span class="token string">&quot;client.connected&quot;</span>:13,<span class="token string">&quot;rules.matched&quot;</span>:0,<span class="token string">&quot;packets.disconnect.sent&quot;</span>:0,<span class="token string">&quot;session.created&quot;</span>:13,<span class="token string">&quot;packets.pingreq.received&quot;</span>:0,<span class="token string">&quot;messages.dropped&quot;</span>:0,<span class="token string">&quot;actions.failure&quot;</span>:0,<span class="token string">&quot;packets.publish.sent&quot;</span>:0,<span class="token string">&quot;session.resumed&quot;</span>:0,<span class="token string">&quot;packets.connack.auth_error&quot;</span>:0,<span class="token string">&quot;packets.pubrel.sent&quot;</span>:0,<span class="token string">&quot;delivery.dropped&quot;</span>:0,<span class="token string">&quot;packets.pubcomp.sent&quot;</span>:0,<span class="token string">&quot;messages.qos2.received&quot;</span>:0,<span class="token string">&quot;messages.qos0.received&quot;</span>:0,<span class="token string">&quot;packets.publish.inuse&quot;</span>:0,<span class="token string">&quot;client.unsubscribe&quot;</span>:0,<span class="token string">&quot;packets.pubrel.received&quot;</span>:0,<span class="token string">&quot;client.connack&quot;</span>:13,<span class="token string">&quot;packets.connack.error&quot;</span>:0,<span class="token string">&quot;packets.publish.dropped&quot;</span>:0,<span class="token string">&quot;packets.publish.received&quot;</span>:0,<span class="token string">&quot;client.subscribe&quot;</span>:0,<span class="token string">&quot;packets.subscribe.error&quot;</span>:0,<span class="token string">&quot;packets.suback.sent&quot;</span>:0,<span class="token string">&quot;packets.pubcomp.missed&quot;</span>:0,<span class="token string">&quot;messages.qos1.received&quot;</span>:0,<span class="token string">&quot;delivery.dropped.too_large&quot;</span>:0,<span class="token string">&quot;packets.pingresp.sent&quot;</span>:0,<span class="token string">&quot;packets.pubrel.missed&quot;</span>:0,<span class="token string">&quot;messages.qos0.sent&quot;</span>:0,<span class="token string">&quot;packets.connect.received&quot;</span>:13,<span class="token string">&quot;packets.puback.missed&quot;</span>:0,<span class="token string">&quot;packets.subscribe.received&quot;</span>:0,<span class="token string">&quot;packets.puback.inuse&quot;</span>:0,<span class="token string">&quot;client.authenticate&quot;</span>:13,<span class="token string">&quot;messages.publish&quot;</span>:0,<span class="token string">&quot;packets.pubrec.inuse&quot;</span>:0,<span class="token string">&quot;packets.publish.error&quot;</span>:0,<span class="token string">&quot;messages.delayed&quot;</span>:0,<span class="token string">&quot;session.discarded&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="get-api-v4-nodes-node-metrics"><a href="#get-api-v4-nodes-node-metrics" class="header-anchor">#</a> GET /api/v4/nodes/{node}/metrics</h3> <p>类似 <a href="#endpoint-get-metrics">GET /api/v4/metrics</a>，返回指定节点下所有监控指标数据。</p> <p><strong>Path Parameters:</strong> 无</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Object</td> <td>各节点上的统计指标列表，详见 <a href="#endpoint-get-metrics">GET /api/v4/metrics</a></td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/metrics&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;bytes.received&quot;</span>:0,<span class="token string">&quot;client.connected&quot;</span>:0,<span class="token string">&quot;packets.pingreq.received&quot;</span>:0,<span class="token string">&quot;messages.delayed&quot;</span>:0,<span class="token string">&quot;rules.matched&quot;</span>:0,<span class="token string">&quot;actions.failure&quot;</span>:0,<span class="token string">&quot;packets.puback.sent&quot;</span>:0,<span class="token string">&quot;packets.pingresp.sent&quot;</span>:0,<span class="token string">&quot;packets.publish.auth_error&quot;</span>:0,<span class="token string">&quot;client.check_acl&quot;</span>:0,<span class="token string">&quot;delivery.dropped.queue_full&quot;</span>:0,<span class="token string">&quot;actions.success&quot;</span>:0,<span class="token string">&quot;packets.publish.error&quot;</span>:0,<span class="token string">&quot;packets.pubcomp.received&quot;</span>:0,<span class="token string">&quot;bytes.sent&quot;</span>:0,<span class="token string">&quot;packets.pubrec.inuse&quot;</span>:0,<span class="token string">&quot;packets.pubrec.missed&quot;</span>:0,<span class="token string">&quot;packets.pubrel.sent&quot;</span>:0,<span class="token string">&quot;delivery.dropped.too_large&quot;</span>:0,<span class="token string">&quot;packets.pubcomp.missed&quot;</span>:0,<span class="token string">&quot;packets.subscribe.error&quot;</span>:0,<span class="token string">&quot;packets.suback.sent&quot;</span>:0,<span class="token string">&quot;messages.qos2.sent&quot;</span>:0,<span class="token string">&quot;messages.qos1.sent&quot;</span>:0,<span class="token string">&quot;packets.pubrel.missed&quot;</span>:0,<span class="token string">&quot;messages.publish&quot;</span>:0,<span class="token string">&quot;messages.forward&quot;</span>:0,<span class="token string">&quot;packets.auth.received&quot;</span>:0,<span class="token string">&quot;delivery.dropped&quot;</span>:0,<span class="token string">&quot;packets.sent&quot;</span>:0,<span class="token string">&quot;packets.puback.inuse&quot;</span>:0,<span class="token string">&quot;delivery.dropped.qos0_msg&quot;</span>:0,<span class="token string">&quot;packets.publish.dropped&quot;</span>:0,<span class="token string">&quot;packets.disconnect.sent&quot;</span>:0,<span class="token string">&quot;packets.auth.sent&quot;</span>:0,<span class="token string">&quot;packets.unsubscribe.received&quot;</span>:0,<span class="token string">&quot;session.takeovered&quot;</span>:0,<span class="token string">&quot;messages.delivered&quot;</span>:0,<span class="token string">&quot;client.auth.anonymous&quot;</span>:0,<span class="token string">&quot;packets.connack.error&quot;</span>:0,<span class="token string">&quot;packets.connack.sent&quot;</span>:0,<span class="token string">&quot;packets.subscribe.auth_error&quot;</span>:0,<span class="token string">&quot;packets.unsuback.sent&quot;</span>:0,<span class="token string">&quot;packets.pubcomp.sent&quot;</span>:0,<span class="token string">&quot;packets.publish.sent&quot;</span>:0,<span class="token string">&quot;client.connack&quot;</span>:0,<span class="token string">&quot;packets.publish.received&quot;</span>:0,<span class="token string">&quot;client.subscribe&quot;</span>:0,<span class="token string">&quot;session.created&quot;</span>:0,<span class="token string">&quot;delivery.dropped.expired&quot;</span>:0,<span class="token string">&quot;client.unsubscribe&quot;</span>:0,<span class="token string">&quot;packets.received&quot;</span>:0,<span class="token string">&quot;packets.pubrel.received&quot;</span>:0,<span class="token string">&quot;packets.unsubscribe.error&quot;</span>:0,<span class="token string">&quot;messages.qos0.sent&quot;</span>:0,<span class="token string">&quot;packets.connack.auth_error&quot;</span>:0,<span class="token string">&quot;session.resumed&quot;</span>:0,<span class="token string">&quot;delivery.dropped.no_local&quot;</span>:0,<span class="token string">&quot;packets.puback.missed&quot;</span>:0,<span class="token string">&quot;packets.pubcomp.inuse&quot;</span>:0,<span class="token string">&quot;packets.pubrec.sent&quot;</span>:0,<span class="token string">&quot;messages.dropped.expired&quot;</span>:0,<span class="token string">&quot;messages.dropped.no_subscribers&quot;</span>:0,<span class="token string">&quot;session.discarded&quot;</span>:0,<span class="token string">&quot;messages.sent&quot;</span>:0,<span class="token string">&quot;messages.received&quot;</span>:0,<span class="token string">&quot;packets.puback.received&quot;</span>:0,<span class="token string">&quot;messages.qos0.received&quot;</span>:0,<span class="token string">&quot;messages.acked&quot;</span>:0,<span class="token string">&quot;client.connect&quot;</span>:0,<span class="token string">&quot;packets.disconnect.received&quot;</span>:0,<span class="token string">&quot;client.disconnected&quot;</span>:0,<span class="token string">&quot;messages.retained&quot;</span>:3,<span class="token string">&quot;session.terminated&quot;</span>:0,<span class="token string">&quot;packets.publish.inuse&quot;</span>:0,<span class="token string">&quot;packets.pubrec.received&quot;</span>:0,<span class="token string">&quot;messages.qos2.received&quot;</span>:0,<span class="token string">&quot;messages.dropped&quot;</span>:0,<span class="token string">&quot;packets.connect.received&quot;</span>:0,<span class="token string">&quot;client.authenticate&quot;</span>:0,<span class="token string">&quot;packets.subscribe.received&quot;</span>:0,<span class="token string">&quot;messages.qos1.received&quot;</span>:0<span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h2 id="主题统计指标"><a href="#主题统计指标" class="header-anchor">#</a> 主题统计指标</h2> <h3 id="get-api-v4-topic-metrics"><a href="#get-api-v4-topic-metrics" class="header-anchor">#</a> GET /api/v4/topic-metrics</h3> <p>返回所有主题统计指标数据。</p> <p><strong>Path Parameters:</strong> 无</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Array of Objects</td> <td>各节点上的统计指标列表</td></tr> <tr><td>data[0].topic</td> <td>String</td> <td>主题名</td></tr> <tr><td>data[0].metrics</td> <td>Object</td> <td>主题统计指标数据，详见下面的 metrics:</td></tr></tbody></table> <p><strong>metrics:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>messages.qos2.out.rate</td> <td>Integer</td> <td>QoS 2 消息 5 秒内平均发送速率</td></tr> <tr><td>messages.qos2.out.count</td> <td>Integer</td> <td>QoS 2 消息发送数量统计</td></tr> <tr><td>messages.qos2.in.rate</td> <td>Integer</td> <td>QoS 2 消息 5 秒内平均接收速率</td></tr> <tr><td>messages.qos2.in.count</td> <td>Integer</td> <td>QoS 2 消息接收数量统计</td></tr> <tr><td>messages.qos1.out.rate</td> <td>Integer</td> <td>QoS 1 消息 5 秒内平均发送速率</td></tr> <tr><td>messages.qos1.out.count</td> <td>Integer</td> <td>QoS 1 消息发送数量统计</td></tr> <tr><td>messages.qos1.in.rate</td> <td>Integer</td> <td>QoS 1 消息 5 秒内平均接收速率</td></tr> <tr><td>messages.qos1.in.count</td> <td>Integer</td> <td>QoS 1 消息接收数量统计</td></tr> <tr><td>messages.qos0.out.rate</td> <td>Integer</td> <td>QoS 0 消息 5 秒内平均发送速率</td></tr> <tr><td>messages.qos0.out.count</td> <td>Integer</td> <td>QoS 0 消息发送数量统计</td></tr> <tr><td>messages.qos0.in.rate</td> <td>Integer</td> <td>QoS 0 消息 5 秒内平均接收速率</td></tr> <tr><td>messages.qos0.in.count</td> <td>Integer</td> <td>QoS 0 消息接收数量统计</td></tr> <tr><td>messages.out.rate</td> <td>Integer</td> <td>MQTT 消息 5 秒内平均发送速率</td></tr> <tr><td>messages.out.count</td> <td>Integer</td> <td>MQTT 消息发送数量统计</td></tr> <tr><td>messages.in.rate</td> <td>Integer</td> <td>MQTT 消息 5 秒内平均接收速率</td></tr> <tr><td>messages.in.count</td> <td>Integer</td> <td>MQTT 消息接收数量统计</td></tr> <tr><td>messages.dropped.rate</td> <td>Integer</td> <td>MQTT 消息 5 秒内平均丢弃速率</td></tr> <tr><td>messages.dropped.count</td> <td>Integer</td> <td>MQTT 消息丢弃数量统计</td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/topic-metrics&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
$ <span class="token function">curl</span> -i --basic -u admin:public -X POST <span class="token string">&quot;http://localhost:8081/api/v4/topic-metrics&quot;</span> -d <span class="token string">'{&quot;topic&quot;:&quot;a/b/c&quot;}'</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/topic-metrics&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;a/b/c&quot;</span>,<span class="token string">&quot;metrics&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;messages.qos2.out.rate&quot;</span>:0.0,<span class="token string">&quot;messages.qos2.out.count&quot;</span>:0,<span class="token string">&quot;messages.qos2.in.rate&quot;</span>:0.0,<span class="token string">&quot;messages.qos2.in.count&quot;</span>:0,<span class="token string">&quot;messages.qos1.out.rate&quot;</span>:0.0,<span class="token string">&quot;messages.qos1.out.count&quot;</span>:0,<span class="token string">&quot;messages.qos1.in.rate&quot;</span>:0.0,<span class="token string">&quot;messages.qos1.in.count&quot;</span>:0,<span class="token string">&quot;messages.qos0.out.rate&quot;</span>:0.0,<span class="token string">&quot;messages.qos0.out.count&quot;</span>:0,<span class="token string">&quot;messages.qos0.in.rate&quot;</span>:0.0,<span class="token string">&quot;messages.qos0.in.count&quot;</span>:0,<span class="token string">&quot;messages.out.rate&quot;</span>:0.0,<span class="token string">&quot;messages.out.count&quot;</span>:0,<span class="token string">&quot;messages.in.rate&quot;</span>:0.0,<span class="token string">&quot;messages.in.count&quot;</span>:0,<span class="token string">&quot;messages.dropped.rate&quot;</span>:0.0,<span class="token string">&quot;messages.dropped.count&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="get-api-v4-topic-metrics-topic"><a href="#get-api-v4-topic-metrics-topic" class="header-anchor">#</a> GET /api/v4/topic-metrics/{topic}</h3> <p>返回指定主题的统计指标数据。</p> <p><strong>Path Parameters:</strong> 无</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Object</td> <td>主题统计指标数据，详见下面的 data:</td></tr></tbody></table> <p><strong>data:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>messages.qos2.out.rate</td> <td>Integer</td> <td>QoS 2 消息 5 秒内平均发送速率</td></tr> <tr><td>messages.qos2.out.count</td> <td>Integer</td> <td>QoS 2 消息发送数量统计</td></tr> <tr><td>messages.qos2.in.rate</td> <td>Integer</td> <td>QoS 2 消息 5 秒内平均接收速率</td></tr> <tr><td>messages.qos2.in.count</td> <td>Integer</td> <td>QoS 2 消息接收数量统计</td></tr> <tr><td>messages.qos1.out.rate</td> <td>Integer</td> <td>QoS 1 消息 5 秒内平均发送速率</td></tr> <tr><td>messages.qos1.out.count</td> <td>Integer</td> <td>QoS 1 消息发送数量统计</td></tr> <tr><td>messages.qos1.in.rate</td> <td>Integer</td> <td>QoS 1 消息 5 秒内平均接收速率</td></tr> <tr><td>messages.qos1.in.count</td> <td>Integer</td> <td>QoS 1 消息接收数量统计</td></tr> <tr><td>messages.qos0.out.rate</td> <td>Integer</td> <td>QoS 0 消息 5 秒内平均发送速率</td></tr> <tr><td>messages.qos0.out.count</td> <td>Integer</td> <td>QoS 0 消息发送数量统计</td></tr> <tr><td>messages.qos0.in.rate</td> <td>Integer</td> <td>QoS 0 消息 5 秒内平均接收速率</td></tr> <tr><td>messages.qos0.in.count</td> <td>Integer</td> <td>QoS 0 消息接收数量统计</td></tr> <tr><td>messages.out.rate</td> <td>Integer</td> <td>MQTT 消息 5 秒内平均发送速率</td></tr> <tr><td>messages.out.count</td> <td>Integer</td> <td>MQTT 消息发送数量统计</td></tr> <tr><td>messages.in.rate</td> <td>Integer</td> <td>MQTT 消息 5 秒内平均接收速率</td></tr> <tr><td>messages.in.count</td> <td>Integer</td> <td>MQTT 消息接收数量统计</td></tr> <tr><td>messages.dropped.rate</td> <td>Integer</td> <td>MQTT 消息 5 秒内平均丢弃速率</td></tr> <tr><td>messages.dropped.count</td> <td>Integer</td> <td>MQTT 消息丢弃数量统计</td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/topic-metrics/a%2Fb%2Fc&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;messages.qos2.out.rate&quot;</span>:0.0,<span class="token string">&quot;messages.qos2.out.count&quot;</span>:0,<span class="token string">&quot;messages.qos2.in.rate&quot;</span>:0.0,<span class="token string">&quot;messages.qos2.in.count&quot;</span>:0,<span class="token string">&quot;messages.qos1.out.rate&quot;</span>:0.0,<span class="token string">&quot;messages.qos1.out.count&quot;</span>:0,<span class="token string">&quot;messages.qos1.in.rate&quot;</span>:0.0,<span class="token string">&quot;messages.qos1.in.count&quot;</span>:0,<span class="token string">&quot;messages.qos0.out.rate&quot;</span>:0.0,<span class="token string">&quot;messages.qos0.out.count&quot;</span>:0,<span class="token string">&quot;messages.qos0.in.rate&quot;</span>:0.0,<span class="token string">&quot;messages.qos0.in.count&quot;</span>:0,<span class="token string">&quot;messages.out.rate&quot;</span>:0.0,<span class="token string">&quot;messages.out.count&quot;</span>:0,<span class="token string">&quot;messages.in.rate&quot;</span>:0.0,<span class="token string">&quot;messages.in.count&quot;</span>:0,<span class="token string">&quot;messages.dropped.rate&quot;</span>:0.0,<span class="token string">&quot;messages.dropped.count&quot;</span>:0<span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="post-api-v4-topic-metrics"><a href="#post-api-v4-topic-metrics" class="header-anchor">#</a> POST /api/v4/topic-metrics</h3> <p>开启对指定主题的指标统计。</p> <p><strong>Parameters (json):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>topic</td> <td>String</td> <td>Required</td> <td></td> <td>MQTT 主题名</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr></tbody></table> <p><strong>Examples:</strong></p> <p>开启对 <code>a/b/c</code> 主题的指标统计</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X POST <span class="token string">&quot;http://localhost:8081/api/v4/topic-metrics&quot;</span> -d <span class="token string">'{&quot;topic&quot;:&quot;a/b/c&quot;}'</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="delete-api-v4-topic-metrics-topic"><a href="#delete-api-v4-topic-metrics-topic" class="header-anchor">#</a> DELETE /api/v4/topic-metrics/{topic}</h3> <p>关闭对指定主题的指标统计。</p> <p><strong>Path Parameters:</strong> 无</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr></tbody></table> <p><strong>Examples:</strong></p> <p>关闭对 <code>a/b/c</code> 主题的指标统计</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X DELETE <span class="token string">&quot;http://localhost:8081/api/v4/topic-metrics/a%2Fb%2Fc&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="delete-api-v4-topic-metrics"><a href="#delete-api-v4-topic-metrics" class="header-anchor">#</a> DELETE /api/v4/topic-metrics</h3> <p>关闭所有主题的指标统计。</p> <p><strong>Path Parameters:</strong> 无</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr></tbody></table> <p><strong>Examples:</strong></p> <p>关闭所有主题的指标统计</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X DELETE <span class="token string">&quot;http://localhost:8081/api/v4/topic-metrics&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h2 id="状态"><a href="#状态" class="header-anchor">#</a> 状态</h2> <h3 id="get-api-v4-stats"><a href="#get-api-v4-stats" class="header-anchor">#</a> GET /api/v4/stats</h3> <p>返回集群下所有状态数据。</p> <p><strong>Path Parameters:</strong> 无</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Array of Objects</td> <td>各节点上的状态数据列表</td></tr> <tr><td>data[0].node</td> <td>String</td> <td>节点名称</td></tr> <tr><td>data[0].stats</td> <td>Array</td> <td>状态数据，详见下面的 <em>stats</em></td></tr></tbody></table> <p><strong>stats:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>connections.count</td> <td>Integer</td> <td>当前连接数量</td></tr> <tr><td>connections.max</td> <td>Integer</td> <td>连接数量的历史最大值</td></tr> <tr><td>channels.count</td> <td>Integer</td> <td>即 <code>sessions.count</code></td></tr> <tr><td>channels.max</td> <td>Integer</td> <td>即 <code>session.max</code></td></tr> <tr><td>sessions.count</td> <td>Integer</td> <td>当前会话数量</td></tr> <tr><td>sessions.max</td> <td>Integer</td> <td>会话数量的历史最大值</td></tr> <tr><td>topics.count</td> <td>Integer</td> <td>当前主题数量</td></tr> <tr><td>topics.max</td> <td>Integer</td> <td>主题数量的历史最大值</td></tr> <tr><td>suboptions.count</td> <td>Integer</td> <td>即 <code>subscriptions.count</code></td></tr> <tr><td>suboptions.max</td> <td>Integer</td> <td>即 <code>subscriptions.max</code></td></tr> <tr><td>subscribers.count</td> <td>Integer</td> <td>当前订阅者数量</td></tr> <tr><td>subscribers.max</td> <td>Integer</td> <td>订阅者数量的历史最大值</td></tr> <tr><td>subscriptions.count</td> <td>Integer</td> <td>当前订阅数量，包含共享订阅</td></tr> <tr><td>subscriptions.max</td> <td>Integer</td> <td>订阅数量的历史最大值</td></tr> <tr><td>subscriptions.shared.count</td> <td>Integer</td> <td>当前共享订阅数量</td></tr> <tr><td>subscriptions.shared.max</td> <td>Integer</td> <td>共享订阅数量的历史最大值</td></tr> <tr><td>routes.count</td> <td>Integer</td> <td>当前路由数量</td></tr> <tr><td>routes.max</td> <td>Integer</td> <td>路由数量的历史最大值</td></tr> <tr><td>retained.count</td> <td>Integer</td> <td>当前保留消息数量</td></tr> <tr><td>retained.max</td> <td>Integer</td> <td>保留消息的历史最大值</td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/stats&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;stats&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;topics.max&quot;</span>:0,<span class="token string">&quot;topics.count&quot;</span>:0,<span class="token string">&quot;subscriptions.shared.max&quot;</span>:0,<span class="token string">&quot;subscriptions.shared.count&quot;</span>:0,<span class="token string">&quot;subscriptions.max&quot;</span>:0,<span class="token string">&quot;subscriptions.count&quot;</span>:0,<span class="token string">&quot;subscribers.max&quot;</span>:0,<span class="token string">&quot;subscribers.count&quot;</span>:0,<span class="token string">&quot;suboptions.max&quot;</span>:0,<span class="token string">&quot;suboptions.count&quot;</span>:0,<span class="token string">&quot;sessions.max&quot;</span>:0,<span class="token string">&quot;sessions.count&quot;</span>:0,<span class="token string">&quot;rules.max&quot;</span>:0,<span class="token string">&quot;rules.count&quot;</span>:0,<span class="token string">&quot;routes.max&quot;</span>:0,<span class="token string">&quot;routes.count&quot;</span>:0,<span class="token string">&quot;retained.max&quot;</span>:3,<span class="token string">&quot;retained.count&quot;</span>:3,<span class="token string">&quot;resources.max&quot;</span>:0,<span class="token string">&quot;resources.count&quot;</span>:0,<span class="token string">&quot;connections.max&quot;</span>:0,<span class="token string">&quot;connections.count&quot;</span>:0,<span class="token string">&quot;channels.max&quot;</span>:0,<span class="token string">&quot;channels.count&quot;</span>:0,<span class="token string">&quot;actions.max&quot;</span>:5,<span class="token string">&quot;actions.count&quot;</span>:5<span class="token punctuation">}</span>,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="get-api-v4-nodes-node-stats"><a href="#get-api-v4-nodes-node-stats" class="header-anchor">#</a> GET /api/v4/nodes/{node}/stats</h3> <p>类似 <a href="#endpoint-get-stats">GET /api/v4/stats</a>，返回指定节点上的状态数据。</p> <p><strong>Path Parameters:</strong> 无</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Array of Objects</td> <td>各节点上的状态数据列表，详见 <a href="#endpoint-get-stats">GET /api/v4/stats</a></td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/stats&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;topics.max&quot;</span>:0,<span class="token string">&quot;topics.count&quot;</span>:0,<span class="token string">&quot;subscriptions.shared.max&quot;</span>:0,<span class="token string">&quot;subscriptions.shared.count&quot;</span>:0,<span class="token string">&quot;subscriptions.max&quot;</span>:0,<span class="token string">&quot;subscriptions.count&quot;</span>:0,<span class="token string">&quot;subscribers.max&quot;</span>:0,<span class="token string">&quot;subscribers.count&quot;</span>:0,<span class="token string">&quot;suboptions.max&quot;</span>:0,<span class="token string">&quot;suboptions.count&quot;</span>:0,<span class="token string">&quot;sessions.max&quot;</span>:0,<span class="token string">&quot;sessions.count&quot;</span>:0,<span class="token string">&quot;rules.max&quot;</span>:0,<span class="token string">&quot;rules.count&quot;</span>:0,<span class="token string">&quot;routes.max&quot;</span>:0,<span class="token string">&quot;routes.count&quot;</span>:0,<span class="token string">&quot;retained.max&quot;</span>:3,<span class="token string">&quot;retained.count&quot;</span>:3,<span class="token string">&quot;resources.max&quot;</span>:0,<span class="token string">&quot;resources.count&quot;</span>:0,<span class="token string">&quot;connections.max&quot;</span>:0,<span class="token string">&quot;connections.count&quot;</span>:0,<span class="token string">&quot;channels.max&quot;</span>:0,<span class="token string">&quot;channels.count&quot;</span>:0,<span class="token string">&quot;actions.max&quot;</span>:5,<span class="token string">&quot;actions.count&quot;</span>:5<span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h2 id="告警"><a href="#告警" class="header-anchor">#</a> 告警</h2> <h3 id="get-api-v4-alarms"><a href="#get-api-v4-alarms" class="header-anchor">#</a> GET /api/v4/alarms</h3> <p>返回集群下当前告警信息。</p> <p><strong>Path Parameters:</strong> 无</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Array of Objects</td> <td>各节点上的告警列表</td></tr> <tr><td>data[0].node</td> <td>String</td> <td>节点名称</td></tr> <tr><td>data[0].alarms</td> <td>Array of Objects</td> <td>当前告警列表</td></tr> <tr><td>data[0].alarms[0].name</td> <td>String</td> <td>告警名称</td></tr> <tr><td>data[0].alarms[0].message</td> <td>String</td> <td>人类易读的告警信息</td></tr> <tr><td>data[0].alarms[0].details</td> <td>Object</td> <td>告警详情</td></tr> <tr><td>data[0].alarms[0].activate_at</td> <td>Integer</td> <td>告警激活时间，以微秒为单位的 UNIX 时间戳</td></tr> <tr><td>data[0].alarms[0].deactivate_at</td> <td>Integer</td> <td>告警取消激活时间，以微秒为单位的 UNIX 时间戳</td></tr> <tr><td>data[0].alarms[0].activated</td> <td>Boolean</td> <td>是否激活</td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/alarms&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;alarms&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;high_system_memory_usage&quot;</span>,<span class="token string">&quot;message&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;System memory usage is higher than 60%&quot;</span>,<span class="token string">&quot;details&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;high_watermark&quot;</span>:60<span class="token punctuation">}</span>,<span class="token string">&quot;deactivate_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;infinity&quot;</span>,<span class="token string">&quot;activated&quot;</span>:true,<span class="token string">&quot;activate_at&quot;</span>:1597996203658236<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;high_system_memory_usage&quot;</span>,<span class="token string">&quot;message&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;System memory usage is higher than 60%&quot;</span>,<span class="token string">&quot;details&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;high_watermark&quot;</span>:60<span class="token punctuation">}</span>,<span class="token string">&quot;deactivate_at&quot;</span>:1597994359335482,<span class="token string">&quot;activated&quot;</span>:false,<span class="token string">&quot;activate_at&quot;</span>:1597993108657522<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="get-api-v4-nodes-node-alarms"><a href="#get-api-v4-nodes-node-alarms" class="header-anchor">#</a> GET /api/v4/nodes/{node}/alarms</h3> <p>返回指定节点下的告警信息。接口参数和返回请参看 <a href="#endpoint-get-alarms">GET /api/v4/alarms</a>。</p> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/alarms&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;high_system_memory_usage&quot;</span>,<span class="token string">&quot;message&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;System memory usage is higher than 60%&quot;</span>,<span class="token string">&quot;details&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;high_watermark&quot;</span>:60<span class="token punctuation">}</span>,<span class="token string">&quot;deactivate_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;infinity&quot;</span>,<span class="token string">&quot;activated&quot;</span>:true,<span class="token string">&quot;activate_at&quot;</span>:1597996203658236<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;high_system_memory_usage&quot;</span>,<span class="token string">&quot;message&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;System memory usage is higher than 60%&quot;</span>,<span class="token string">&quot;details&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;high_watermark&quot;</span>:60<span class="token punctuation">}</span>,<span class="token string">&quot;deactivate_at&quot;</span>:1597994359335482,<span class="token string">&quot;activated&quot;</span>:false,<span class="token string">&quot;activate_at&quot;</span>:1597993108657522<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="get-api-v4-alarms-activated"><a href="#get-api-v4-alarms-activated" class="header-anchor">#</a> GET /api/v4/alarms/activated</h3> <p>返回集群下激活中的告警。接口参数和返回请参看 <a href="#endpoint-get-alarms">GET /api/v4/alarms</a>。</p> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/alarms/activated&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;alarms&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;high_system_memory_usage&quot;</span>,<span class="token string">&quot;message&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;System memory usage is higher than 60%&quot;</span>,<span class="token string">&quot;details&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;high_watermark&quot;</span>:60<span class="token punctuation">}</span>,<span class="token string">&quot;deactivate_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;infinity&quot;</span>,<span class="token string">&quot;activated&quot;</span>:true,<span class="token string">&quot;activate_at&quot;</span>:1597996203658236<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="get-api-v4-nodes-node-alarms-activated"><a href="#get-api-v4-nodes-node-alarms-activated" class="header-anchor">#</a> GET /api/v4/nodes/{node}/alarms/activated</h3> <p>返回指定节点下激活中的告警。接口参数和返回请参看 <a href="#endpoint-get-alarms">GET /api/v4/alarms</a>。</p> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/alarms/activated&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;high_system_memory_usage&quot;</span>,<span class="token string">&quot;message&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;System memory usage is higher than 60%&quot;</span>,<span class="token string">&quot;details&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;high_watermark&quot;</span>:60<span class="token punctuation">}</span>,<span class="token string">&quot;deactivate_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;infinity&quot;</span>,<span class="token string">&quot;activated&quot;</span>:true,<span class="token string">&quot;activate_at&quot;</span>:1597996203658236<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="get-api-v4-alarms-deactivated"><a href="#get-api-v4-alarms-deactivated" class="header-anchor">#</a> GET /api/v4/alarms/deactivated</h3> <p>返回集群下已经取消的告警。接口参数和返回请参看 <a href="#endpoint-get-activated-alarms">GET /api/v4/alarms/activated</a>。</p> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/alarms/deactivated&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;alarms&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;high_system_memory_usage&quot;</span>,<span class="token string">&quot;message&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;System memory usage is higher than 60%&quot;</span>,<span class="token string">&quot;details&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;high_watermark&quot;</span>:60<span class="token punctuation">}</span>,<span class="token string">&quot;deactivate_at&quot;</span>:1597994359335482,<span class="token string">&quot;activated&quot;</span>:false,<span class="token string">&quot;activate_at&quot;</span>:1597993108657522<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="get-api-v4-nodes-node-alarms-deactivated"><a href="#get-api-v4-nodes-node-alarms-deactivated" class="header-anchor">#</a> GET /api/v4/nodes/{node}/alarms/deactivated</h3> <p>返回指定节点下已经取消的告警。接口参数和返回请参看 <a href="#endpoint-get-activated-alarms-in-specified-node">GET /api/v4/alarms/activated</a>。</p> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/alarms/deactivated&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;high_system_memory_usage&quot;</span>,<span class="token string">&quot;message&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;System memory usage is higher than 60%&quot;</span>,<span class="token string">&quot;details&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;high_watermark&quot;</span>:60<span class="token punctuation">}</span>,<span class="token string">&quot;deactivate_at&quot;</span>:1597994359335482,<span class="token string">&quot;activated&quot;</span>:false,<span class="token string">&quot;activate_at&quot;</span>:1597993108657522<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="post-api-v4-alarms-deactivated"><a href="#post-api-v4-alarms-deactivated" class="header-anchor">#</a> POST /api/v4/alarms/deactivated</h3> <p>取消指定告警。</p> <p><strong>Parameters (json):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>node</td> <td>String</td> <td>Required</td> <td></td> <td>告警所在节点</td></tr> <tr><td>name</td> <td>String</td> <td>Required</td> <td></td> <td>告警名称</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -vX POST <span class="token string">&quot;http://localhost:8081/api/v4/alarms/deactivated&quot;</span> -d <span class="token string">'{&quot;node&quot;:&quot;emqx@127.0.0.1&quot;,&quot;name&quot;:&quot;high_system_memory_usage&quot;}'</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="delete-api-v4-alarms-deactivated"><a href="#delete-api-v4-alarms-deactivated" class="header-anchor">#</a> DELETE /api/v4/alarms/deactivated</h3> <p>清除所有已经取消的告警。</p> <p><strong>Parameters (json):</strong> 无</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X DELETE <span class="token string">&quot;http://localhost:8081/api/v4/alarms/deactivated&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="delete-api-v4-nodes-node-alarms-deactivated"><a href="#delete-api-v4-nodes-node-alarms-deactivated" class="header-anchor">#</a> DELETE /api/v4/nodes/{node}/alarms/deactivated</h3> <p>清除指定节点下所有已经取消的告警。</p> <p><strong>Parameters (json):</strong> 无</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X DELETE <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/alarms/deactivated&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h2 id="黑名单"><a href="#黑名单" class="header-anchor">#</a> 黑名单</h2> <h3 id="get-api-v4-banned"><a href="#get-api-v4-banned" class="header-anchor">#</a> GET /api/v4/banned</h3> <p>获取黑名单</p> <p><strong>Query String Parameters:</strong></p> <p>同 <code>/api/v4/clients</code>。</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Array</td> <td>由对象构成的数组，对象中的字段与 <em>POST</em> 方法中的 Request Body 相同</td></tr> <tr><td>meta</td> <td>Object</td> <td>同 <code>/api/v4/clients</code></td></tr></tbody></table> <p><strong>Examples:</strong></p> <p>获取黑名单列表:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -vX GET <span class="token string">&quot;http://localhost:8081/api/v4/banned&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;meta&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;page&quot;</span>:1,<span class="token string">&quot;limit&quot;</span>:10000,<span class="token string">&quot;count&quot;</span>:1<span class="token punctuation">}</span>,<span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;who&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;example&quot;</span>,<span class="token string">&quot;until&quot;</span>:1582265833,<span class="token string">&quot;reason&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;undefined&quot;</span>,<span class="token string">&quot;by&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;user&quot;</span>,<span class="token string">&quot;at&quot;</span>:1582265533,<span class="token string">&quot;as&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;clientid&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="post-api-v4-banned"><a href="#post-api-v4-banned" class="header-anchor">#</a> POST /api/v4/banned</h3> <p>将对象添加至黑名单</p> <p><strong>Parameters (json):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>who</td> <td>String</td> <td>Required</td> <td></td> <td>添加至黑名单的对象，可以是客户端标识符、用户名和 IP 地址</td></tr> <tr><td>as</td> <td>String</td> <td>Required</td> <td></td> <td>用于区分黑名单对象类型，可以是 <code>clientid</code>，<code>username</code>，<code>peerhost</code></td></tr> <tr><td>by</td> <td>String</td> <td>Optional</td> <td>user</td> <td>指示该对象被谁添加至黑名单</td></tr> <tr><td>at</td> <td>Integer</td> <td>Optional</td> <td>当前系统时间</td> <td>添加至黑名单的时间，单位：秒</td></tr> <tr><td>until</td> <td>Integer</td> <td>Optional</td> <td>当前系统时间 + 5 分钟</td> <td>何时从黑名单中解除，单位：秒</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Object</td> <td>与传入的 Request Body 相同</td></tr></tbody></table> <p><strong>Examples:</strong></p> <p>将 client 添加到黑名单:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -vX POST <span class="token string">&quot;http://localhost:8081/api/v4/banned&quot;</span> -d <span class="token string">'{&quot;who&quot;:&quot;example&quot;,&quot;as&quot;:&quot;clientid&quot;}'</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;who&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;example&quot;</span>,<span class="token string">&quot;as&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;clientid&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="delete-api-v4-banned-as-who"><a href="#delete-api-v4-banned-as-who" class="header-anchor">#</a> DELETE /api/v4/banned/{as}/{who}</h3> <p>将对象从黑名单中删除</p> <p><strong>Parameters:</strong> 无</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>message</td> <td>String</td> <td>仅在发生错误时返回，用于提供更详细的错误信息</td></tr></tbody></table> <p><strong>Examples:</strong></p> <p>将 client 从黑名单中移除:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X DELETE <span class="token string">&quot;http://localhost:8081/api/v4/banned/clientid/example&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h2 id="数据导入导出"><a href="#数据导入导出" class="header-anchor">#</a> 数据导入导出</h2> <p>数据导入导出。</p> <h3 id="get-api-v4-data-export"><a href="#get-api-v4-data-export" class="header-anchor">#</a> GET /api/v4/data/export</h3> <p>获取当前的导出文件信息列表，包括文件名、大小和创建时间。</p> <p><strong>Path Parameters:</strong> 无</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Array of Objects</td> <td>所有路由信息</td></tr> <tr><td>data[0].filename</td> <td>String</td> <td>文件名</td></tr> <tr><td>data[0].created_at</td> <td>String</td> <td>&quot;YYYY-MM-DD HH-mm-SS&quot; 格式的文件创建时间</td></tr> <tr><td>data[0].size</td> <td>String</td> <td>文件大小，单位：字节</td></tr></tbody></table> <p><strong>Examples:</strong></p> <p>列出当前的导出文件信息列表:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/data/export&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;size&quot;</span>:350,<span class="token string">&quot;filename&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx-export-2020-5-15-18-6-29.json&quot;</span>,<span class="token string">&quot;created_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-5-15 18:6:29&quot;</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;size&quot;</span>:388,<span class="token string">&quot;filename&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx-export-2020-5-15-17-39-0.json&quot;</span>,<span class="token string">&quot;created_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-5-15 17:39:0&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="post-api-v4-data-export"><a href="#post-api-v4-data-export" class="header-anchor">#</a> POST /api/v4/data/export</h3> <p>导出当前数据到文件。</p> <p><strong>Path Parameters:</strong> 无</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Object</td> <td>文件信息</td></tr> <tr><td>data.filename</td> <td>String</td> <td>文件名</td></tr> <tr><td>data.created_at</td> <td>String</td> <td>&quot;YYYY-MM-DD HH-mm-SS&quot; 格式的文件创建时间</td></tr> <tr><td>data.size</td> <td>String</td> <td>文件大小，单位：字节</td></tr></tbody></table> <p><strong>Examples:</strong></p> <p>导出文件：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X POST <span class="token string">&quot;http://localhost:8081/api/v4/data/export&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;size&quot;</span>:350,<span class="token string">&quot;filename&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx-export-2020-5-18-17-17-44.json&quot;</span>,<span class="token string">&quot;created_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-5-18 17:17:44&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="post-api-v4-data-import"><a href="#post-api-v4-data-import" class="header-anchor">#</a> POST /api/v4/data/import</h3> <p>从指定文件导入数据。</p> <p><strong>Path Parameters:</strong> 无</p> <p><strong>Parameters (json):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>filename</td> <td>String</td> <td>Required</td> <td></td> <td>导入的文件名</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>message</td> <td>String</td> <td>仅在发生错误时返回，用于提供更详细的错误信息</td></tr></tbody></table> <p><strong>Examples:</strong></p> <p>从指定文件导入数据：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X POST <span class="token string">&quot;http://localhost:8081/api/v4/data/import&quot;</span> -d <span class="token string">'{&quot;filename&quot;:&quot;emqx-export-2020-5-18-17-17-44.json&quot;}'</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="get-api-v4-data-file-filename"><a href="#get-api-v4-data-file-filename" class="header-anchor">#</a> GET /api/v4/data/file/{filename}</h3> <p>下载数据文件。</p> <p><strong>Path Parameters:</strong> 无</p> <p><strong>Parameters (json):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>filename</td> <td>String</td> <td>Required</td> <td></td> <td>导入的文件名</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>filename</td> <td>String</td> <td>文件名</td></tr> <tr><td>file</td> <td>String</td> <td>文件内容</td></tr></tbody></table> <p><strong>Examples:</strong></p> <p>下载指定的数据文件：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/data/file/emqx-export-2020-5-18-17-17-44.json&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;filename&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;/Users/zhouzibo/emqx-rel/_build/emqx/rel/emqx/data/emqx-export-2020-5-18-17-17-44.json&quot;</span>,<span class="token string">&quot;file&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;{<span class="token entity" title="\&quot;">\&quot;</span>version<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>dev<span class="token entity" title="\&quot;">\&quot;</span>,<span class="token entity" title="\&quot;">\&quot;</span>users<span class="token entity" title="\&quot;">\&quot;</span>:[{<span class="token entity" title="\&quot;">\&quot;</span>username<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>admin<span class="token entity" title="\&quot;">\&quot;</span>,<span class="token entity" title="\&quot;">\&quot;</span>tags<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>administrator<span class="token entity" title="\&quot;">\&quot;</span>,<span class="token entity" title="\&quot;">\&quot;</span>password<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>oKQPB1hbigv6+2ntALELNOb1fF0=<span class="token entity" title="\&quot;">\&quot;</span>}],<span class="token entity" title="\&quot;">\&quot;</span>schemas<span class="token entity" title="\&quot;">\&quot;</span>:[],<span class="token entity" title="\&quot;">\&quot;</span>rules<span class="token entity" title="\&quot;">\&quot;</span>:[],<span class="token entity" title="\&quot;">\&quot;</span>resources<span class="token entity" title="\&quot;">\&quot;</span>:[],<span class="token entity" title="\&quot;">\&quot;</span>date<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>2020-05-18 17:17:44<span class="token entity" title="\&quot;">\&quot;</span>,<span class="token entity" title="\&quot;">\&quot;</span>blacklist<span class="token entity" title="\&quot;">\&quot;</span>:[],<span class="token entity" title="\&quot;">\&quot;</span>auth_mnesia<span class="token entity" title="\&quot;">\&quot;</span>:[],<span class="token entity" title="\&quot;">\&quot;</span>apps<span class="token entity" title="\&quot;">\&quot;</span>:[{<span class="token entity" title="\&quot;">\&quot;</span>status<span class="token entity" title="\&quot;">\&quot;</span>:true,<span class="token entity" title="\&quot;">\&quot;</span>secret<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>public<span class="token entity" title="\&quot;">\&quot;</span>,<span class="token entity" title="\&quot;">\&quot;</span>name<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>Default<span class="token entity" title="\&quot;">\&quot;</span>,<span class="token entity" title="\&quot;">\&quot;</span>id<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>admin<span class="token entity" title="\&quot;">\&quot;</span>,<span class="token entity" title="\&quot;">\&quot;</span>expired<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>undefined<span class="token entity" title="\&quot;">\&quot;</span>,<span class="token entity" title="\&quot;">\&quot;</span>desc<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>Application user<span class="token entity" title="\&quot;">\&quot;</span>}],<span class="token entity" title="\&quot;">\&quot;</span>acl_mnesia<span class="token entity" title="\&quot;">\&quot;</span>:[]}&quot;</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="post-api-v4-data-file"><a href="#post-api-v4-data-file" class="header-anchor">#</a> POST /api/v4/data/file</h3> <p>上传数据文件。</p> <p><strong>Path Parameters:</strong> 无</p> <p><strong>Parameters (json):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>filename</td> <td>String</td> <td>Required</td> <td></td> <td>文件名</td></tr> <tr><td>file</td> <td>String</td> <td>Required</td> <td></td> <td>文件内容</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>message</td> <td>String</td> <td>仅在发生错误时返回，用于提供更详细的错误信息</td></tr></tbody></table> <p><strong>Examples:</strong></p> <p>上传指定的数据文件：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X POST <span class="token string">&quot;http://localhost:8081/api/v4/data/file&quot;</span> -d <span class="token string">'{&quot;filename&quot;:&quot;emqx-export-2020-5-18-17-17-44.json&quot;,&quot;file&quot;:&quot;{<span class="token entity" title="\&quot;">\&quot;</span>version<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>dev<span class="token entity" title="\&quot;">\&quot;</span>,<span class="token entity" title="\&quot;">\&quot;</span>users<span class="token entity" title="\&quot;">\&quot;</span>:[{<span class="token entity" title="\&quot;">\&quot;</span>username<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>admin<span class="token entity" title="\&quot;">\&quot;</span>,<span class="token entity" title="\&quot;">\&quot;</span>tags<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>administrator<span class="token entity" title="\&quot;">\&quot;</span>,<span class="token entity" title="\&quot;">\&quot;</span>password<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>oKQPB1hbigv6+2ntALELNOb1fF0=<span class="token entity" title="\&quot;">\&quot;</span>}],<span class="token entity" title="\&quot;">\&quot;</span>schemas<span class="token entity" title="\&quot;">\&quot;</span>:[],<span class="token entity" title="\&quot;">\&quot;</span>rules<span class="token entity" title="\&quot;">\&quot;</span>:[],<span class="token entity" title="\&quot;">\&quot;</span>resources<span class="token entity" title="\&quot;">\&quot;</span>:[],<span class="token entity" title="\&quot;">\&quot;</span>date<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>2020-05-18 17:17:44<span class="token entity" title="\&quot;">\&quot;</span>,<span class="token entity" title="\&quot;">\&quot;</span>blacklist<span class="token entity" title="\&quot;">\&quot;</span>:[],<span class="token entity" title="\&quot;">\&quot;</span>auth_mnesia<span class="token entity" title="\&quot;">\&quot;</span>:[],<span class="token entity" title="\&quot;">\&quot;</span>apps<span class="token entity" title="\&quot;">\&quot;</span>:[{<span class="token entity" title="\&quot;">\&quot;</span>status<span class="token entity" title="\&quot;">\&quot;</span>:true,<span class="token entity" title="\&quot;">\&quot;</span>secret<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>public<span class="token entity" title="\&quot;">\&quot;</span>,<span class="token entity" title="\&quot;">\&quot;</span>name<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>Default<span class="token entity" title="\&quot;">\&quot;</span>,<span class="token entity" title="\&quot;">\&quot;</span>id<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>admin<span class="token entity" title="\&quot;">\&quot;</span>,<span class="token entity" title="\&quot;">\&quot;</span>expired<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>undefined<span class="token entity" title="\&quot;">\&quot;</span>,<span class="token entity" title="\&quot;">\&quot;</span>desc<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>Application user<span class="token entity" title="\&quot;">\&quot;</span>}],<span class="token entity" title="\&quot;">\&quot;</span>acl_mnesia<span class="token entity" title="\&quot;">\&quot;</span>:[]}&quot;}'</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="delete-api-v4-data-file-filename"><a href="#delete-api-v4-data-file-filename" class="header-anchor">#</a> DELETE /api/v4/data/file/{filename}</h3> <p>远程删除数据文件。</p> <p><strong>Path Parameters:</strong> 无</p> <p><strong>Parameters (json):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>filename</td> <td>String</td> <td>Required</td> <td></td> <td>文件名</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>message</td> <td>String</td> <td>仅在发生错误时返回，用于提供更详细的错误信息</td></tr></tbody></table> <p><strong>Examples:</strong></p> <p>删除指定的数据文件：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X DELETE <span class="token string">&quot;http://localhost:8081/api/v4/data/file/emqx-export-2020-5-18-17-17-44.json&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h2 id="规则"><a href="#规则" class="header-anchor">#</a> 规则</h2> <p>查询规则引擎的动作</p> <h3 id="get-api-v4-rules-rule-id"><a href="#get-api-v4-rules-rule-id" class="header-anchor">#</a> GET /api/v4/rules/{rule_id}</h3> <p>获取某个规则的详情，包括规则的 SQL、Topics 列表、动作列表等。还会返回当前规则和动作的统计指标的值。</p> <p><strong>Path Parameters:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>rule_id</td> <td>String</td> <td>False</td> <td>可选，Rule ID。如不指定 rule_id 则<br>以数组形式返回所有已创建的规则</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Object</td> <td>规则对象</td></tr> <tr><td>- data.id</td> <td>String</td> <td>Rule ID</td></tr> <tr><td>- data.rawsql</td> <td>String</td> <td>SQL 语句，与请求中的 rawsql 一致</td></tr> <tr><td>- data.for</td> <td>String</td> <td>Topic 列表，表示哪些 topic 可以匹配到此规则</td></tr> <tr><td>- data.metrics</td> <td>Array</td> <td>统计指标，具体可参看 Dashboard 上的 Rule Metrics</td></tr> <tr><td>- data.description</td> <td>String</td> <td>规则的描述信息，与请求中的 description 一致</td></tr> <tr><td>- data.actions</td> <td>Array</td> <td>动作列表</td></tr> <tr><td>- data.actions[0].id</td> <td>String</td> <td>Action ID</td></tr> <tr><td>- data.actions[0].params</td> <td>Object</td> <td>动作参数，与请求中的 actions.params 一致</td></tr> <tr><td>- data.actions[0].name</td> <td>String</td> <td>动作名字，与请求中的 actions.name 一致</td></tr> <tr><td>- data.actions[0].metrics</td> <td>Array</td> <td>统计指标，具体可参看 Dashboard 上的 Rule Metrics</td></tr></tbody></table> <h3 id="post-api-v4-rules"><a href="#post-api-v4-rules" class="header-anchor">#</a> POST /api/v4/rules</h3> <p>创建规则，返回规则 ID。</p> <p><strong>Parameters (json):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>rawsql</td> <td>String</td> <td>True</td> <td>规则的 SQL 语句</td></tr> <tr><td>actions</td> <td>Array</td> <td>True</td> <td>动作列表</td></tr> <tr><td>- actions[0].name</td> <td>String</td> <td>True</td> <td>动作名称</td></tr> <tr><td>- actions[0].params</td> <td>Object</td> <td>True</td> <td>动作参数。参数以 key-value 形式表示。<br>详情可参看添加规则的示例</td></tr> <tr><td>description</td> <td>String</td> <td>False</td> <td>可选，规则描述</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Object</td> <td>创建成功的规则对象，包含 Rule ID</td></tr> <tr><td>- data.id</td> <td>String</td> <td>Rule ID</td></tr> <tr><td>- data.rawsql</td> <td>String</td> <td>SQL 语句，与请求中的 rawsql 一致</td></tr> <tr><td>- data.for</td> <td>String</td> <td>Topic 列表，表示哪些 topic 可以匹配到此规则</td></tr> <tr><td>- data.metrics</td> <td>Array</td> <td>统计指标，具体可参看 Dashboard 上的 Rule Metrics</td></tr> <tr><td>- data.description</td> <td>String</td> <td>规则的描述信息，与请求中的 description 一致</td></tr> <tr><td>- data.actions</td> <td>Array</td> <td>动作列表，每个动作是一个 Object</td></tr> <tr><td>- data.actions[0].id</td> <td>String</td> <td>Action ID</td></tr> <tr><td>- data.actions[0].params</td> <td>Object</td> <td>动作参数，与请求中的 actions.params 一致</td></tr> <tr><td>- data.actions[0].name</td> <td>String</td> <td>动作名字，与请求中的 actions.name 一致</td></tr> <tr><td>- data.actions[0].metrics</td> <td>Array</td> <td>统计指标，具体可参看 Dashboard 上的 Rule Metrics</td></tr></tbody></table> <h3 id="put-api-v4-rules-rule-id"><a href="#put-api-v4-rules-rule-id" class="header-anchor">#</a> PUT /api/v4/rules/{rule_id}</h3> <p>更新规则，返回规则 ID。</p> <p><strong>Parameters (json):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>rawsql</td> <td>String</td> <td>True</td> <td>可选，规则的 SQL 语句</td></tr> <tr><td>actions</td> <td>Array</td> <td>True</td> <td>可选，动作列表</td></tr> <tr><td>- actions[0].name</td> <td>String</td> <td>True</td> <td>可选，动作名称</td></tr> <tr><td>- actions[0].params</td> <td>Object</td> <td>True</td> <td>可选，动作参数。参数以 key-value 形式表示。<br>详情可参看添加规则的示例</td></tr> <tr><td>description</td> <td>String</td> <td>False</td> <td>可选，规则描述</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Object</td> <td>创建成功的规则对象，包含 Rule ID</td></tr> <tr><td>- data.id</td> <td>String</td> <td>Rule ID</td></tr> <tr><td>- data.rawsql</td> <td>String</td> <td>SQL 语句，与请求中的 rawsql 一致</td></tr> <tr><td>- data.for</td> <td>String</td> <td>Topic 列表，表示哪些 topic 可以匹配到此规则</td></tr> <tr><td>- data.metrics</td> <td>Array</td> <td>统计指标，具体可参看 Dashboard 上的 Rule Metrics</td></tr> <tr><td>- data.description</td> <td>String</td> <td>规则的描述信息，与请求中的 description 一致</td></tr> <tr><td>- data.actions</td> <td>Array</td> <td>动作列表，每个动作是一个 Object</td></tr> <tr><td>- data.actions[0].id</td> <td>String</td> <td>Action ID</td></tr> <tr><td>- data.actions[0].params</td> <td>Object</td> <td>动作参数，与请求中的 actions.params 一致</td></tr> <tr><td>- data.actions[0].name</td> <td>String</td> <td>动作名字，与请求中的 actions.name 一致</td></tr> <tr><td>- data.actions[0].metrics</td> <td>Array</td> <td>统计指标，具体可参看 Dashboard 上的 Rule Metrics</td></tr></tbody></table> <h3 id="delete-api-v4-rules-rule-id"><a href="#delete-api-v4-rules-rule-id" class="header-anchor">#</a> DELETE /api/v4/rules/{rule_id}</h3> <p>删除规则。</p> <p><strong>Parameters:</strong> 无</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr></tbody></table> <p><strong>Examples:</strong></p> <p>添加一个规则，对于所有匹配到主题 &quot;t/a&quot; 的消息，打印其规则运行参数。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -XPOST -d <span class="token string">'{
  &quot;rawsql&quot;: &quot;select * from <span class="token entity" title="\&quot;">\&quot;</span>t/a<span class="token entity" title="\&quot;">\&quot;</span>&quot;,
  &quot;actions&quot;: [{
      &quot;name&quot;: &quot;inspect&quot;,
      &quot;params&quot;: {
          &quot;a&quot;: 1
      }
  }],
  &quot;description&quot;: &quot;test-rule&quot;
}'</span> --basic -u admin:public <span class="token string">'http://localhost:8081/api/v4/rules'</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;rawsql&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;select * from <span class="token entity" title="\&quot;">\&quot;</span>t/a<span class="token entity" title="\&quot;">\&quot;</span>&quot;</span>,<span class="token string">&quot;metrics&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;speed_max&quot;</span>:0,<span class="token string">&quot;speed_last5m&quot;</span>:0.0,<span class="token string">&quot;speed&quot;</span>:0.0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;matched&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;rule:7fdb2c9e&quot;</span>,<span class="token string">&quot;for&quot;</span>:<span class="token punctuation">[</span><span class="token string">&quot;t/a&quot;</span><span class="token punctuation">]</span>,<span class="token string">&quot;enabled&quot;</span>:true,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;test-rule&quot;</span>,<span class="token string">&quot;actions&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;params&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span>:1<span class="token punctuation">}</span>,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;inspect&quot;</span>,<span class="token string">&quot;metrics&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;success&quot;</span>:0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;failed&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;inspect_1582434715354188116&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><p>使用规则 ID 获取刚才创建的规则详情:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> --basic -u admin:public <span class="token string">'http://localhost:8081/api/v4/rules/rule:7fdb2c9e'</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;rawsql&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;select * from <span class="token entity" title="\&quot;">\&quot;</span>t/a<span class="token entity" title="\&quot;">\&quot;</span>&quot;</span>,<span class="token string">&quot;metrics&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;speed_max&quot;</span>:0,<span class="token string">&quot;speed_last5m&quot;</span>:0.0,<span class="token string">&quot;speed&quot;</span>:0.0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;matched&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;rule:7fdb2c9e&quot;</span>,<span class="token string">&quot;for&quot;</span>:<span class="token punctuation">[</span><span class="token string">&quot;t/a&quot;</span><span class="token punctuation">]</span>,<span class="token string">&quot;enabled&quot;</span>:true,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;test-rule&quot;</span>,<span class="token string">&quot;actions&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;params&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span>:1<span class="token punctuation">}</span>,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;inspect&quot;</span>,<span class="token string">&quot;metrics&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;success&quot;</span>:0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;failed&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;inspect_1582434715354188116&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><p>获取所有的规则，注意返回值里的 data 是个规则对象的数组:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> --basic -u admin:public <span class="token string">'http://localhost:8081/api/v4/rules'</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;rawsql&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;select * from <span class="token entity" title="\&quot;">\&quot;</span>t/a<span class="token entity" title="\&quot;">\&quot;</span>&quot;</span>,<span class="token string">&quot;metrics&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;speed_max&quot;</span>:0,<span class="token string">&quot;speed_last5m&quot;</span>:0.0,<span class="token string">&quot;speed&quot;</span>:0.0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;matched&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;rule:7fdb2c9e&quot;</span>,<span class="token string">&quot;for&quot;</span>:<span class="token punctuation">[</span><span class="token string">&quot;t/a&quot;</span><span class="token punctuation">]</span>,<span class="token string">&quot;enabled&quot;</span>:true,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;test-rule&quot;</span>,<span class="token string">&quot;actions&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;params&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span>:1<span class="token punctuation">}</span>,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;inspect&quot;</span>,<span class="token string">&quot;metrics&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;success&quot;</span>:0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;failed&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;inspect_1582434715354188116&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><p>更新一下规则的 SQL 语句，改为 <code>select * from &quot;t/b&quot;</code>:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -XPUT --basic -u admin:public <span class="token string">'http://localhost:8081/api/v4/rules/rule:7fdb2c9e'</span> -d <span class="token string">'{&quot;rawsql&quot;:&quot;select * from <span class="token entity" title="\&quot;">\&quot;</span>t/b<span class="token entity" title="\&quot;">\&quot;</span>&quot;}'</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;rawsql&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;select * from <span class="token entity" title="\&quot;">\&quot;</span>t/b<span class="token entity" title="\&quot;">\&quot;</span>&quot;</span>,<span class="token string">&quot;metrics&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;speed_max&quot;</span>:0,<span class="token string">&quot;speed_last5m&quot;</span>:0.0,<span class="token string">&quot;speed&quot;</span>:0.0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;matched&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;rule:7fdb2c9e&quot;</span>,<span class="token string">&quot;for&quot;</span>:<span class="token punctuation">[</span><span class="token string">&quot;t/a&quot;</span><span class="token punctuation">]</span>,<span class="token string">&quot;enabled&quot;</span>:true,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;test-rule&quot;</span>,<span class="token string">&quot;actions&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;params&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span>:1<span class="token punctuation">}</span>,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;inspect&quot;</span>,<span class="token string">&quot;metrics&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;success&quot;</span>:0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;failed&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;inspect_1582434715354188116&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><p>停用规则 (disable):</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -XPUT --basic -u admin:public <span class="token string">'http://localhost:8081/api/v4/rules/rule:7fdb2c9e'</span> -d <span class="token string">'{&quot;enabled&quot;: false}'</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;rawsql&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;select * from <span class="token entity" title="\&quot;">\&quot;</span>t/b<span class="token entity" title="\&quot;">\&quot;</span>&quot;</span>,<span class="token string">&quot;metrics&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;speed_max&quot;</span>:0,<span class="token string">&quot;speed_last5m&quot;</span>:0.0,<span class="token string">&quot;speed&quot;</span>:0.0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;matched&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;rule:7fdb2c9e&quot;</span>,<span class="token string">&quot;for&quot;</span>:<span class="token punctuation">[</span><span class="token string">&quot;t/a&quot;</span><span class="token punctuation">]</span>,<span class="token string">&quot;enabled&quot;</span>:false,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;test-rule&quot;</span>,<span class="token string">&quot;actions&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;params&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span>:1<span class="token punctuation">}</span>,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;inspect&quot;</span>,<span class="token string">&quot;metrics&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;success&quot;</span>:0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;failed&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;inspect_1582434715354188116&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><p>删除规则:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -XDELETE --basic -u admin:public <span class="token string">'http://localhost:8081/api/v4/rules/rule:7fdb2c9e'</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h2 id="动作"><a href="#动作" class="header-anchor">#</a> 动作</h2> <p>查询规则引擎的动作。注意动作只能由 emqx 提供，不能添加。</p> <h3 id="get-api-v4-actions-action-name"><a href="#get-api-v4-actions-action-name" class="header-anchor">#</a> GET api/v4/actions/{action_name}</h3> <p>获取某个动作的详情，包括动作名字、参数列表等。</p> <p><strong>Path Parameters:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>action_name</td> <td>String</td> <td>False</td> <td>可选，动作名。如不指定 action_name 则<br>以数组形式返回当前支持的所有动作。</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Object</td> <td>规则对象</td></tr> <tr><td>- data.types</td> <td>String</td> <td>指示当前动作从属于那些资源类型</td></tr> <tr><td>- data.title</td> <td>Object</td> <td>动作的简述，中英文。</td></tr> <tr><td>- data.params</td> <td>Object</td> <td>动作的参数列表。参数以 key-value 形式表示。<br>详情可参看后面的示例</td></tr> <tr><td>- data.description</td> <td>Object</td> <td>动作的描述信息，中英文。</td></tr> <tr><td>- data.app</td> <td>String</td> <td>动作的提供者</td></tr></tbody></table> <p><strong>Examples:</strong></p> <p>查询 inspect 动作的详情：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> --basic -u admin:public <span class="token string">'http://localhost:8081/api/v4/actions/inspect'</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;types&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;title&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;检查 (调试)&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Inspect (debug)&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;params&quot;</span>:<span class="token punctuation">{</span><span class="token punctuation">}</span>,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;inspect&quot;</span>,<span class="token string">&quot;for&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;<span class="token variable">$any</span>&quot;</span>,<span class="token string">&quot;description&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;检查动作参数 (用以调试)&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Inspect the details of action params for debug purpose&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;app&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx_rule_engine&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><p>查询当前所有的动作：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> --basic -u admin:public <span class="token string">'http://localhost:8081/api/v4/actions'</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;types&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;title&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;空动作 (调试)&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Do Nothing (debug)&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;params&quot;</span>:<span class="token punctuation">{</span><span class="token punctuation">}</span>,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;do_nothing&quot;</span>,<span class="token string">&quot;for&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;<span class="token variable">$any</span>&quot;</span>,<span class="token string">&quot;description&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;此动作什么都不做，并且不会失败 (用以调试)&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;This action does nothing and never fails. It's for debug purpose&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;app&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx_rule_engine&quot;</span><span class="token punctuation">}</span>, <span class="token punctuation">..</span>.<span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h2 id="资源类型"><a href="#资源类型" class="header-anchor">#</a> 资源类型</h2> <p>查询规则引擎的资源类型。注意资源类型只能由 emqx 提供，不能添加。</p> <h3 id="get-api-v4-resource-types-resource-type-name"><a href="#get-api-v4-resource-types-resource-type-name" class="header-anchor">#</a> GET api/v4/resource_types/{resource_type_name}</h3> <p>获取某个资源的详情，包括资源描述、参数列表等。</p> <p><strong>Path Parameters:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>resource_type_name</td> <td>String</td> <td>False</td> <td>可选，资源类型名。如不指定 resource_type_name 则<br>以数组形式返回当前支持的所有资源类型。</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Object</td> <td>规则对象</td></tr> <tr><td>- data.title</td> <td>Object</td> <td>资源类型的简述，中英文。</td></tr> <tr><td>- data.params</td> <td>Object</td> <td>资源类型的参数列表。参数以 key-value 形式表示。<br>详情可参看后面的示例</td></tr> <tr><td>- data.description</td> <td>Object</td> <td>资源类型的描述信息，中英文。</td></tr> <tr><td>- data.provider</td> <td>String</td> <td>资源类型的提供者</td></tr></tbody></table> <p><strong>Examples:</strong></p> <p>查询 web_hook 资源类型的详细信息：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> --basic -u admin:public <span class="token string">'http://localhost:8081/api/v4/resource_types/web_hook'</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;title&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;WebHook&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;WebHook&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;provider&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx_web_hook&quot;</span>,<span class="token string">&quot;params&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;url&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;string&quot;</span>,<span class="token string">&quot;title&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;请求 URL&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Request URL&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;required&quot;</span>:true,<span class="token string">&quot;format&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;url&quot;</span>,<span class="token string">&quot;description&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;请求 URL&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Request URL&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token string">&quot;method&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;string&quot;</span>,<span class="token string">&quot;title&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;请求方法&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Request Method&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;enum&quot;</span>:<span class="token punctuation">[</span><span class="token string">&quot;PUT&quot;</span>,<span class="token string">&quot;POST&quot;</span><span class="token punctuation">]</span>,<span class="token string">&quot;description&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;请求方法&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Request Method&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;default&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;POST&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;headers&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;object&quot;</span>,<span class="token string">&quot;title&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;请求头&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Request Header&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;schema&quot;</span>:<span class="token punctuation">{</span><span class="token punctuation">}</span>,<span class="token string">&quot;description&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;请求头&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Request Header&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;default&quot;</span>:<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;web_hook&quot;</span>,<span class="token string">&quot;description&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;WebHook&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;WebHook&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><p>查询当前所有的资源类型：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> --basic -u admin:public <span class="token string">'http://localhost:8081/api/v4/resource_types'</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;title&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;WebHook&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;WebHook&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;provider&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx_web_hook&quot;</span>,<span class="token string">&quot;params&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;url&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;string&quot;</span>,<span class="token string">&quot;title&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;请求 URL&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Request URL&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;required&quot;</span>:true,<span class="token string">&quot;format&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;url&quot;</span>,<span class="token string">&quot;description&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;请求 URL&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Request URL&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token string">&quot;method&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;string&quot;</span>,<span class="token string">&quot;title&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;请求方法&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Request Method&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;enum&quot;</span>:<span class="token punctuation">[</span><span class="token string">&quot;PUT&quot;</span>,<span class="token string">&quot;POST&quot;</span><span class="token punctuation">]</span>,<span class="token string">&quot;description&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;请求方法&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Request Method&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;default&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;POST&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;headers&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;object&quot;</span>,<span class="token string">&quot;title&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;请求头&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Request Header&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;schema&quot;</span>:<span class="token punctuation">{</span><span class="token punctuation">}</span>,<span class="token string">&quot;description&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;请求头&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Request Header&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;default&quot;</span>:<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;web_hook&quot;</span>,<span class="token string">&quot;description&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;WebHook&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;WebHook&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>, <span class="token punctuation">..</span>.<span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h2 id="资源"><a href="#资源" class="header-anchor">#</a> 资源</h2> <p>管理规则引擎的资源。资源是资源类型的实例，用于维护数据库连接等相关资源。</p> <h3 id="get-api-v4-resources-resource-id"><a href="#get-api-v4-resources-resource-id" class="header-anchor">#</a> GET api/v4/resources/{resource_id}</h3> <p>获取指定的资源的详细信息。</p> <p><strong>Path Parameters:</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>resource_id</td> <td>String</td> <td>False</td> <td>可选，资源类型 ID。如不指定 resource_id 则<br>以数组形式返回当前所有的资源。</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Object</td> <td>规则对象</td></tr> <tr><td>- data.id</td> <td>String</td> <td>资源 ID</td></tr> <tr><td>- data.type</td> <td>String</td> <td>资源所从属的资源类型的名字。</td></tr> <tr><td>- data.config</td> <td>Object</td> <td>资源的配置。参数以 key-value 形式表示。<br>详情可参看后面的示例</td></tr> <tr><td>- data.status</td> <td>Array</td> <td>资源的状态信息。详情请参看 Dashboard 上资源的状态。</td></tr> <tr><td>- data.description</td> <td>Object</td> <td>资源的描述信息，中英文。</td></tr></tbody></table> <h3 id="post-api-v4-resources"><a href="#post-api-v4-resources" class="header-anchor">#</a> POST /api/v4/resources</h3> <p>创建规则，返回资源 ID。</p> <p><strong>Parameters (json):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>type</td> <td>String</td> <td>True</td> <td>资源类型名。指定要使用哪个资源类型创建资源。</td></tr> <tr><td>config</td> <td>Object</td> <td>True</td> <td>资源参数。要跟对应的资源类型的 params 里指定的格式相一致。</td></tr> <tr><td>description</td> <td>String</td> <td>False</td> <td>可选，资源描述</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Object</td> <td>规则对象</td></tr> <tr><td>- data.id</td> <td>String</td> <td>资源 ID</td></tr> <tr><td>- data.type</td> <td>String</td> <td>资源所从属的资源类型的名字。</td></tr> <tr><td>- data.config</td> <td>Object</td> <td>资源的配置。参数以 key-value 形式表示。<br>详情可参看后面的示例</td></tr> <tr><td>- data.description</td> <td>Object</td> <td>资源的描述信息，中英文。</td></tr></tbody></table> <h3 id="delete-api-v4-resources-resource-id"><a href="#delete-api-v4-resources-resource-id" class="header-anchor">#</a> DELETE /api/v4/resources/{resource_id}</h3> <p>删除资源。</p> <p><strong>Parameters:</strong> 无</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr></tbody></table> <p><strong>Examples:</strong></p> <p>创建一个 webhook 资源，webserver 的 URL 为 http://127.0.0.1:9910 ：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -XPOST -d <span class="token string">'{
  &quot;type&quot;: &quot;web_hook&quot;,
  &quot;config&quot;: {
      &quot;url&quot;: &quot;http://127.0.0.1:9910&quot;,
      &quot;headers&quot;: {&quot;token&quot;:&quot;axfw34y235wrq234t4ersgw4t&quot;},
      &quot;method&quot;: &quot;POST&quot;
  },
  &quot;description&quot;: &quot;web hook resource-1&quot;
}'</span> --basic -u admin:public <span class="token string">'http://localhost:8081/api/v4/resources'</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;web_hook&quot;</span>,<span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;resource:b12d3e44&quot;</span>,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;web hook resource-1&quot;</span>,<span class="token string">&quot;config&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;url&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;http://127.0.0.1:9910&quot;</span>,<span class="token string">&quot;method&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;POST&quot;</span>,<span class="token string">&quot;headers&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;token&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;axfw34y235wrq234t4ersgw4t&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><p>使用资源 ID 查询刚创建的资源：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> --basic -u admin:public <span class="token string">'http://localhost:8081/api/v4/resources/resource:b12d3e44'</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;web_hook&quot;</span>,<span class="token string">&quot;status&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;is_alive&quot;</span>:false<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;resource:b12d3e44&quot;</span>,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;web hook resource-1&quot;</span>,<span class="token string">&quot;config&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;url&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;http://127.0.0.1:9910&quot;</span>,<span class="token string">&quot;method&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;POST&quot;</span>,<span class="token string">&quot;headers&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;token&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;axfw34y235wrq234t4ersgw4t&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><p>查询当前已创建的所有的资源：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> --basic -u admin:public <span class="token string">'http://localhost:8081/api/v4/resources'</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;web_hook&quot;</span>,<span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;resource:b12d3e44&quot;</span>,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;web hook resource-1&quot;</span>,<span class="token string">&quot;config&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;url&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;http://127.0.0.1:9910&quot;</span>,<span class="token string">&quot;method&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;POST&quot;</span>,<span class="token string">&quot;headers&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;token&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;axfw34y235wrq234t4ersgw4t&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><p>删除资源:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -XDELETE --basic -u admin:public <span class="token string">'http://localhost:8081/api/v4/resources/resource:b12d3e44'</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><p>{% emqxce %}</p> <h2 id="数据遥测"><a href="#数据遥测" class="header-anchor">#</a> 数据遥测</h2> <p>数据遥测</p> <h3 id="put-api-v4-telemetry-status"><a href="#put-api-v4-telemetry-status" class="header-anchor">#</a> PUT /api/v4/telemetry/status</h3> <p>启用或关闭数据遥测功能。</p> <p><strong>Path Parameters:</strong> 无</p> <p><strong>Parameters (json):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Required</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>enabled</td> <td>Boolean</td> <td>Required</td> <td></td> <td>是否启用</td></tr></tbody></table> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>message</td> <td>String</td> <td>仅在发生错误时返回，用于提供更详细的错误信息</td></tr></tbody></table> <p><strong>Examples:</strong></p> <p>启用数据遥测功能：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X PUT <span class="token string">&quot;http://localhost:8081/api/v4/telemetry/status&quot;</span> -d <span class="token string">'{&quot;enabled&quot;:true}'</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="get-api-v4-telemetry-status"><a href="#get-api-v4-telemetry-status" class="header-anchor">#</a> GET /api/v4/telemetry/status</h3> <p>查询数据遥测功能是否启用。</p> <p><strong>Path Parameters:</strong> 无</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Array of Objects</td> <td>遥测状态</td></tr> <tr><td>data.enabled</td> <td>Boolean</td> <td>是否启用</td></tr></tbody></table> <p><strong>Examples:</strong></p> <p>查询数据遥测功能是否启用:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/telemetry/status&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;enabled&quot;</span>:true<span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><h3 id="get-api-v4-telemetry-data"><a href="#get-api-v4-telemetry-data" class="header-anchor">#</a> GET /api/v4/telemetry/data</h3> <p>获取数据遥测功能上报的数据内容。</p> <p><strong>Path Parameters:</strong> 无</p> <p><strong>Success Response Body (JSON):</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Integer</td> <td>0</td></tr> <tr><td>data</td> <td>Array of Objects</td> <td>遥测数据</td></tr> <tr><td>data.uuid</td> <td>String</td> <td>由时间戳、随机数组成的 UUID</td></tr> <tr><td>data.up_time</td> <td>Integer</td> <td>Broker 启动时间，单位为毫秒</td></tr> <tr><td>data.otp_version</td> <td>String</td> <td>Broker 使用的 Erlang OTP 版本</td></tr> <tr><td>data.os_version</td> <td>String</td> <td>操作系统版本</td></tr> <tr><td>data.os_name</td> <td>String</td> <td>操作系统名称</td></tr> <tr><td>data.num_clients</td> <td>Integer</td> <td>当前连接的客户端数量</td></tr> <tr><td>data.nodes_uuid</td> <td>Array of Objects</td> <td>集群中其他节点的 UUID</td></tr> <tr><td>data.nodes_uuid[0].uuid</td> <td>String</td> <td>集群中其他节点的 UUID</td></tr> <tr><td>data.messages_sent</td> <td>Integer</td> <td>发送的消息数量</td></tr> <tr><td>data.messages_received</td> <td>Integer</td> <td>接收的消息数量</td></tr> <tr><td>data.license</td> <td>Objects</td> <td>证书信息</td></tr> <tr><td>data.license.edition</td> <td>String</td> <td>版本</td></tr> <tr><td>data.emqx_version</td> <td>String</td> <td>Broker 版本</td></tr> <tr><td>data.active_plugins</td> <td>Array of Objects</td> <td>启用插件列表</td></tr> <tr><td>data.active_modules</td> <td>Array of Objects</td> <td>启用模块列表</td></tr></tbody></table> <p><strong>Examples:</strong></p> <p>获取数据遥测功能上报的数据内容:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/telemetry/data&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;uuid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;856916F6-ECC1-11EA-87C9-F9385C1F4A9C&quot;</span>,<span class="token string">&quot;up_time&quot;</span>:553357,<span class="token string">&quot;otp_version&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;22&quot;</span>,<span class="token string">&quot;os_version&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;10.13.6&quot;</span>,<span class="token string">&quot;os_name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Mac OS X&quot;</span>,<span class="token string">&quot;num_clients&quot;</span>:0,<span class="token string">&quot;nodes_uuid&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;messages_sent&quot;</span>:0,<span class="token string">&quot;messages_received&quot;</span>:0,<span class="token string">&quot;license&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;edition&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;community&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;emqx_version&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;dev-v4.2-rc.3&quot;</span>,<span class="token string">&quot;active_plugins&quot;</span>:<span class="token punctuation">[</span><span class="token string">&quot;emqx_telemetry&quot;</span>,<span class="token string">&quot;emqx_rule_engine&quot;</span>,<span class="token string">&quot;emqx_retainer&quot;</span>,<span class="token string">&quot;emqx_recon&quot;</span>,<span class="token string">&quot;emqx_management&quot;</span>,<span class="token string">&quot;emqx_dashboard&quot;</span><span class="token punctuation">]</span>,<span class="token string">&quot;active_modules&quot;</span>:<span class="token punctuation">[</span><span class="token string">&quot;emqx_mod_presence&quot;</span>,<span class="token string">&quot;emqx_mod_rewrite&quot;</span>,<span class="token string">&quot;emqx_mod_acl_internal&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre></div><p>{% endemqxce %}</p></div> <!----></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/6/2021, 8:08:07 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/zh/backend/emqx/tutorial/benchmark.html" class="prev">性能测试</a></span> <span class="next"><a href="/zh/backend/emqx/configuration/configuration.html">参数配置</a>
      →
    </span></p></div> </main></div><div class="global-ui"><div></div><div class="add-this"></div><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button title="Close (Esc)" class="pswp__button pswp__button--close"></button> <button title="Share" class="pswp__button pswp__button--share"></button> <button title="Toggle fullscreen" class="pswp__button pswp__button--fs"></button> <button title="Zoom in/out" class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button title="Previous (arrow left)" class="pswp__button pswp__button--arrow--left"></button> <button title="Next (arrow right)" class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/assets/js/app.ec7e693f.js" defer></script><script src="/assets/js/7.5b24c3a5.js" defer></script><script src="/assets/js/5.7fd7e714.js" defer></script><script src="/assets/js/69.c620faeb.js" defer></script>
  </body>
</html>
