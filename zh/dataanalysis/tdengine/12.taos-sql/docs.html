<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TAOS SQL | 数蛙技术团队</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    <meta name="description" content="数蛙科技是一家致力于提供物联网垂直领域应用使能平台及解决方案的创新型公司。">
    <meta name="referrer" content="never">
    
    <link rel="preload" href="/assets/css/0.styles.a081a12a.css" as="style"><link rel="preload" href="/assets/js/app.b843b8a3.js" as="script"><link rel="preload" href="/assets/js/6.5fcf748f.js" as="script"><link rel="preload" href="/assets/js/5.ef440211.js" as="script"><link rel="preload" href="/assets/js/239.ee8d0d54.js" as="script"><link rel="prefetch" href="/assets/js/10.2a74be3e.js"><link rel="prefetch" href="/assets/js/100.d501af49.js"><link rel="prefetch" href="/assets/js/101.f390a683.js"><link rel="prefetch" href="/assets/js/102.584443d6.js"><link rel="prefetch" href="/assets/js/103.ec06a6e3.js"><link rel="prefetch" href="/assets/js/104.11c65e4b.js"><link rel="prefetch" href="/assets/js/105.fabe1952.js"><link rel="prefetch" href="/assets/js/106.f1349aa2.js"><link rel="prefetch" href="/assets/js/107.f0cbc5be.js"><link rel="prefetch" href="/assets/js/108.8719b333.js"><link rel="prefetch" href="/assets/js/109.46180192.js"><link rel="prefetch" href="/assets/js/11.50bfd825.js"><link rel="prefetch" href="/assets/js/110.9dacdd43.js"><link rel="prefetch" href="/assets/js/111.db2015b7.js"><link rel="prefetch" href="/assets/js/112.dba05cc5.js"><link rel="prefetch" href="/assets/js/113.4e80bcfd.js"><link rel="prefetch" href="/assets/js/114.40b158fa.js"><link rel="prefetch" href="/assets/js/115.9dc1c04f.js"><link rel="prefetch" href="/assets/js/116.3df2102f.js"><link rel="prefetch" href="/assets/js/117.e042d001.js"><link rel="prefetch" href="/assets/js/118.881f85e0.js"><link rel="prefetch" href="/assets/js/119.2ee9bff9.js"><link rel="prefetch" href="/assets/js/12.b2bebd96.js"><link rel="prefetch" href="/assets/js/120.44465b71.js"><link rel="prefetch" href="/assets/js/121.f4cf9360.js"><link rel="prefetch" href="/assets/js/122.43721d4d.js"><link rel="prefetch" href="/assets/js/123.fff215dc.js"><link rel="prefetch" href="/assets/js/124.d94e315d.js"><link rel="prefetch" href="/assets/js/125.bc3d5571.js"><link rel="prefetch" href="/assets/js/126.c277e3a1.js"><link rel="prefetch" href="/assets/js/127.2e39d138.js"><link rel="prefetch" href="/assets/js/128.5964f80d.js"><link rel="prefetch" href="/assets/js/129.247c9aa1.js"><link rel="prefetch" href="/assets/js/13.e0c16587.js"><link rel="prefetch" href="/assets/js/130.ec84030e.js"><link rel="prefetch" href="/assets/js/131.1225f47b.js"><link rel="prefetch" href="/assets/js/132.cca94c59.js"><link rel="prefetch" href="/assets/js/133.d7bf473b.js"><link rel="prefetch" href="/assets/js/134.132a3319.js"><link rel="prefetch" href="/assets/js/135.61e8ecf2.js"><link rel="prefetch" href="/assets/js/136.38f035ff.js"><link rel="prefetch" href="/assets/js/137.904b5a34.js"><link rel="prefetch" href="/assets/js/138.290b5547.js"><link rel="prefetch" href="/assets/js/139.6fcf5633.js"><link rel="prefetch" href="/assets/js/14.f9d7e716.js"><link rel="prefetch" href="/assets/js/140.9535e800.js"><link rel="prefetch" href="/assets/js/141.6d8049b9.js"><link rel="prefetch" href="/assets/js/142.d5ff4068.js"><link rel="prefetch" href="/assets/js/143.b236133b.js"><link rel="prefetch" href="/assets/js/144.a1a6b5cf.js"><link rel="prefetch" href="/assets/js/145.5e068cec.js"><link rel="prefetch" href="/assets/js/146.4b0ba4f4.js"><link rel="prefetch" href="/assets/js/147.bbe972ec.js"><link rel="prefetch" href="/assets/js/148.7bd2cdd5.js"><link rel="prefetch" href="/assets/js/149.83b0f6ca.js"><link rel="prefetch" href="/assets/js/15.a67a5e28.js"><link rel="prefetch" href="/assets/js/150.1f490b41.js"><link rel="prefetch" href="/assets/js/151.b6b52e6e.js"><link rel="prefetch" href="/assets/js/152.7141d03c.js"><link rel="prefetch" href="/assets/js/153.5be26211.js"><link rel="prefetch" href="/assets/js/154.9b913b0f.js"><link rel="prefetch" href="/assets/js/155.6383b151.js"><link rel="prefetch" href="/assets/js/156.99a39981.js"><link rel="prefetch" href="/assets/js/157.327f1b17.js"><link rel="prefetch" href="/assets/js/158.adf02d01.js"><link rel="prefetch" href="/assets/js/159.87983d19.js"><link rel="prefetch" href="/assets/js/16.9f0c5ab7.js"><link rel="prefetch" href="/assets/js/160.46e7fd31.js"><link rel="prefetch" href="/assets/js/161.9b675959.js"><link rel="prefetch" href="/assets/js/162.37f73135.js"><link rel="prefetch" href="/assets/js/163.bb3d1980.js"><link rel="prefetch" href="/assets/js/164.e6c2a371.js"><link rel="prefetch" href="/assets/js/165.a9a7c2e3.js"><link rel="prefetch" href="/assets/js/166.d9b387dc.js"><link rel="prefetch" href="/assets/js/167.5277442d.js"><link rel="prefetch" href="/assets/js/168.63a4bae2.js"><link rel="prefetch" href="/assets/js/169.354a8bbb.js"><link rel="prefetch" href="/assets/js/17.6c26bd8e.js"><link rel="prefetch" href="/assets/js/170.934a2491.js"><link rel="prefetch" href="/assets/js/171.6c22a960.js"><link rel="prefetch" href="/assets/js/172.c0eee0bc.js"><link rel="prefetch" href="/assets/js/173.18251131.js"><link rel="prefetch" href="/assets/js/174.5cb0497a.js"><link rel="prefetch" href="/assets/js/175.2457369c.js"><link rel="prefetch" href="/assets/js/176.39c32185.js"><link rel="prefetch" href="/assets/js/177.d2c9cc51.js"><link rel="prefetch" href="/assets/js/178.31be9d7d.js"><link rel="prefetch" href="/assets/js/179.84a2bc83.js"><link rel="prefetch" href="/assets/js/18.0c499f69.js"><link rel="prefetch" href="/assets/js/180.a7b4bec6.js"><link rel="prefetch" href="/assets/js/181.23a89e4e.js"><link rel="prefetch" href="/assets/js/182.45028c53.js"><link rel="prefetch" href="/assets/js/183.347a975f.js"><link rel="prefetch" href="/assets/js/184.f1703ec9.js"><link rel="prefetch" href="/assets/js/185.dffbe32a.js"><link rel="prefetch" href="/assets/js/186.c651d6e7.js"><link rel="prefetch" href="/assets/js/187.23262c27.js"><link rel="prefetch" href="/assets/js/188.fe363fc1.js"><link rel="prefetch" href="/assets/js/189.a9fd2aa3.js"><link rel="prefetch" href="/assets/js/19.747b707d.js"><link rel="prefetch" href="/assets/js/190.eb871fb1.js"><link rel="prefetch" href="/assets/js/191.55970309.js"><link rel="prefetch" href="/assets/js/192.f7cf95fe.js"><link rel="prefetch" href="/assets/js/193.0444be69.js"><link rel="prefetch" href="/assets/js/194.06429a64.js"><link rel="prefetch" href="/assets/js/195.0ea216bd.js"><link rel="prefetch" href="/assets/js/196.2f968486.js"><link rel="prefetch" href="/assets/js/197.85b7ce78.js"><link rel="prefetch" href="/assets/js/198.fe692bbd.js"><link rel="prefetch" href="/assets/js/199.0a7665f8.js"><link rel="prefetch" href="/assets/js/20.763876a8.js"><link rel="prefetch" href="/assets/js/200.db5b0f0e.js"><link rel="prefetch" href="/assets/js/201.a63d6a3c.js"><link rel="prefetch" href="/assets/js/202.7dc74ec8.js"><link rel="prefetch" href="/assets/js/203.507dcb14.js"><link rel="prefetch" href="/assets/js/204.22ff9e50.js"><link rel="prefetch" href="/assets/js/205.e1d75199.js"><link rel="prefetch" href="/assets/js/206.7f066ab8.js"><link rel="prefetch" href="/assets/js/207.f35cf674.js"><link rel="prefetch" href="/assets/js/208.4f5a91f2.js"><link rel="prefetch" href="/assets/js/209.b5acc789.js"><link rel="prefetch" href="/assets/js/21.42a40df2.js"><link rel="prefetch" href="/assets/js/210.84aac128.js"><link rel="prefetch" href="/assets/js/211.c701186e.js"><link rel="prefetch" href="/assets/js/212.400f2327.js"><link rel="prefetch" href="/assets/js/213.29677f2f.js"><link rel="prefetch" href="/assets/js/214.25756367.js"><link rel="prefetch" href="/assets/js/215.a6532209.js"><link rel="prefetch" href="/assets/js/216.5350419a.js"><link rel="prefetch" href="/assets/js/217.97b52c66.js"><link rel="prefetch" href="/assets/js/218.50adfde6.js"><link rel="prefetch" href="/assets/js/219.7eaebad5.js"><link rel="prefetch" href="/assets/js/22.de03ddb1.js"><link rel="prefetch" href="/assets/js/220.8f7ac9a5.js"><link rel="prefetch" href="/assets/js/221.601a2b06.js"><link rel="prefetch" href="/assets/js/222.49073a14.js"><link rel="prefetch" href="/assets/js/223.91d60393.js"><link rel="prefetch" href="/assets/js/224.60ec729c.js"><link rel="prefetch" href="/assets/js/225.4761fd9a.js"><link rel="prefetch" href="/assets/js/226.aa8c51df.js"><link rel="prefetch" href="/assets/js/227.bd73fe8d.js"><link rel="prefetch" href="/assets/js/228.4165cc04.js"><link rel="prefetch" href="/assets/js/229.5bd6cd6b.js"><link rel="prefetch" href="/assets/js/23.7d8d773a.js"><link rel="prefetch" href="/assets/js/230.70c01d43.js"><link rel="prefetch" href="/assets/js/231.8f6fa8a8.js"><link rel="prefetch" href="/assets/js/232.7fe77ce6.js"><link rel="prefetch" href="/assets/js/233.cf089973.js"><link rel="prefetch" href="/assets/js/234.0a1ccaea.js"><link rel="prefetch" href="/assets/js/235.54f9f2f5.js"><link rel="prefetch" href="/assets/js/236.0e63a049.js"><link rel="prefetch" href="/assets/js/237.e2fa75f4.js"><link rel="prefetch" href="/assets/js/238.c8409d96.js"><link rel="prefetch" href="/assets/js/24.c0ec4865.js"><link rel="prefetch" href="/assets/js/240.15338fe4.js"><link rel="prefetch" href="/assets/js/241.3b080c5a.js"><link rel="prefetch" href="/assets/js/242.c68f050e.js"><link rel="prefetch" href="/assets/js/243.ef05ad08.js"><link rel="prefetch" href="/assets/js/244.b9986854.js"><link rel="prefetch" href="/assets/js/245.1b6911fb.js"><link rel="prefetch" href="/assets/js/246.6dd5e229.js"><link rel="prefetch" href="/assets/js/247.0b0e51b6.js"><link rel="prefetch" href="/assets/js/248.f48fd602.js"><link rel="prefetch" href="/assets/js/249.f4210ee9.js"><link rel="prefetch" href="/assets/js/25.cb043ffa.js"><link rel="prefetch" href="/assets/js/250.b30cbc97.js"><link rel="prefetch" href="/assets/js/251.b3b58e41.js"><link rel="prefetch" href="/assets/js/252.e3fcc6f0.js"><link rel="prefetch" href="/assets/js/253.ffe35cb4.js"><link rel="prefetch" href="/assets/js/254.9e354ebb.js"><link rel="prefetch" href="/assets/js/255.a361a24b.js"><link rel="prefetch" href="/assets/js/256.8a2ac6a4.js"><link rel="prefetch" href="/assets/js/257.0434f2fb.js"><link rel="prefetch" href="/assets/js/258.a38c2a5c.js"><link rel="prefetch" href="/assets/js/259.c211978c.js"><link rel="prefetch" href="/assets/js/26.e4a0f2f4.js"><link rel="prefetch" href="/assets/js/260.79a085be.js"><link rel="prefetch" href="/assets/js/261.c98f9949.js"><link rel="prefetch" href="/assets/js/262.c5459aff.js"><link rel="prefetch" href="/assets/js/263.2220e2a6.js"><link rel="prefetch" href="/assets/js/264.8dfca3d5.js"><link rel="prefetch" href="/assets/js/265.bab95542.js"><link rel="prefetch" href="/assets/js/266.4b7b3802.js"><link rel="prefetch" href="/assets/js/267.cde61b76.js"><link rel="prefetch" href="/assets/js/268.3fe856e0.js"><link rel="prefetch" href="/assets/js/269.bd89dbe7.js"><link rel="prefetch" href="/assets/js/27.0b3d3e80.js"><link rel="prefetch" href="/assets/js/270.1ce935ea.js"><link rel="prefetch" href="/assets/js/271.cb6cb385.js"><link rel="prefetch" href="/assets/js/272.c4d24f8a.js"><link rel="prefetch" href="/assets/js/273.8120a884.js"><link rel="prefetch" href="/assets/js/274.12a72713.js"><link rel="prefetch" href="/assets/js/275.8f65358c.js"><link rel="prefetch" href="/assets/js/276.59ff1066.js"><link rel="prefetch" href="/assets/js/277.35ed80bb.js"><link rel="prefetch" href="/assets/js/278.a6cfd3b7.js"><link rel="prefetch" href="/assets/js/279.93354d96.js"><link rel="prefetch" href="/assets/js/28.1117a974.js"><link rel="prefetch" href="/assets/js/280.6f721a69.js"><link rel="prefetch" href="/assets/js/281.88c84ad1.js"><link rel="prefetch" href="/assets/js/282.6d8e7448.js"><link rel="prefetch" href="/assets/js/283.6d78d216.js"><link rel="prefetch" href="/assets/js/284.5b17c5c6.js"><link rel="prefetch" href="/assets/js/285.162338b5.js"><link rel="prefetch" href="/assets/js/286.12f762f2.js"><link rel="prefetch" href="/assets/js/287.66cf35fe.js"><link rel="prefetch" href="/assets/js/288.9508c74f.js"><link rel="prefetch" href="/assets/js/289.b8abcb76.js"><link rel="prefetch" href="/assets/js/29.254403de.js"><link rel="prefetch" href="/assets/js/290.f7701829.js"><link rel="prefetch" href="/assets/js/291.0d37a0af.js"><link rel="prefetch" href="/assets/js/292.c7a2a056.js"><link rel="prefetch" href="/assets/js/293.7f6daec4.js"><link rel="prefetch" href="/assets/js/294.7b83e1b0.js"><link rel="prefetch" href="/assets/js/295.32b4eead.js"><link rel="prefetch" href="/assets/js/296.53591321.js"><link rel="prefetch" href="/assets/js/297.87288820.js"><link rel="prefetch" href="/assets/js/298.4b546867.js"><link rel="prefetch" href="/assets/js/299.a6f6707c.js"><link rel="prefetch" href="/assets/js/30.1a683b68.js"><link rel="prefetch" href="/assets/js/300.a21ff6be.js"><link rel="prefetch" href="/assets/js/301.d890c5f8.js"><link rel="prefetch" href="/assets/js/302.54791af7.js"><link rel="prefetch" href="/assets/js/303.369c84a2.js"><link rel="prefetch" href="/assets/js/304.64a48c08.js"><link rel="prefetch" href="/assets/js/305.1270a097.js"><link rel="prefetch" href="/assets/js/306.5007ad5a.js"><link rel="prefetch" href="/assets/js/307.9f0026a3.js"><link rel="prefetch" href="/assets/js/308.af790dd3.js"><link rel="prefetch" href="/assets/js/309.ae0e84e1.js"><link rel="prefetch" href="/assets/js/31.eb7f6759.js"><link rel="prefetch" href="/assets/js/310.2971630b.js"><link rel="prefetch" href="/assets/js/311.65f123e5.js"><link rel="prefetch" href="/assets/js/312.0cc0b028.js"><link rel="prefetch" href="/assets/js/313.c702dec5.js"><link rel="prefetch" href="/assets/js/314.8648bf6d.js"><link rel="prefetch" href="/assets/js/315.46616fd9.js"><link rel="prefetch" href="/assets/js/316.58dde5ec.js"><link rel="prefetch" href="/assets/js/317.24478aa7.js"><link rel="prefetch" href="/assets/js/318.afa220f6.js"><link rel="prefetch" href="/assets/js/319.fe70f1de.js"><link rel="prefetch" href="/assets/js/32.e4de2f1b.js"><link rel="prefetch" href="/assets/js/320.ca7a05df.js"><link rel="prefetch" href="/assets/js/321.3df20d41.js"><link rel="prefetch" href="/assets/js/322.7d2f37fd.js"><link rel="prefetch" href="/assets/js/323.685832f2.js"><link rel="prefetch" href="/assets/js/324.41673bea.js"><link rel="prefetch" href="/assets/js/325.dfe58356.js"><link rel="prefetch" href="/assets/js/326.101f6b15.js"><link rel="prefetch" href="/assets/js/327.e85dfe64.js"><link rel="prefetch" href="/assets/js/328.a1b1a49e.js"><link rel="prefetch" href="/assets/js/329.944fff97.js"><link rel="prefetch" href="/assets/js/33.779ae739.js"><link rel="prefetch" href="/assets/js/330.07754724.js"><link rel="prefetch" href="/assets/js/331.ab0fceb2.js"><link rel="prefetch" href="/assets/js/332.2c6152a5.js"><link rel="prefetch" href="/assets/js/333.7adc6b6b.js"><link rel="prefetch" href="/assets/js/334.aaf4812b.js"><link rel="prefetch" href="/assets/js/335.3590b8a3.js"><link rel="prefetch" href="/assets/js/336.9c048051.js"><link rel="prefetch" href="/assets/js/337.58499b72.js"><link rel="prefetch" href="/assets/js/338.aa0055c4.js"><link rel="prefetch" href="/assets/js/339.576e4990.js"><link rel="prefetch" href="/assets/js/34.cef9c015.js"><link rel="prefetch" href="/assets/js/340.9f18f497.js"><link rel="prefetch" href="/assets/js/341.c4c5e535.js"><link rel="prefetch" href="/assets/js/342.ffbbd898.js"><link rel="prefetch" href="/assets/js/343.0f95475a.js"><link rel="prefetch" href="/assets/js/344.04a9b838.js"><link rel="prefetch" href="/assets/js/345.27052ef6.js"><link rel="prefetch" href="/assets/js/346.37197f7b.js"><link rel="prefetch" href="/assets/js/347.8e454a7c.js"><link rel="prefetch" href="/assets/js/348.dded60a9.js"><link rel="prefetch" href="/assets/js/349.6b393d6e.js"><link rel="prefetch" href="/assets/js/35.dde211a8.js"><link rel="prefetch" href="/assets/js/350.207ca34d.js"><link rel="prefetch" href="/assets/js/351.e0a776e9.js"><link rel="prefetch" href="/assets/js/352.2d8f5515.js"><link rel="prefetch" href="/assets/js/353.7be4e8b5.js"><link rel="prefetch" href="/assets/js/354.c59b6973.js"><link rel="prefetch" href="/assets/js/355.7ffc7f95.js"><link rel="prefetch" href="/assets/js/356.287cfb41.js"><link rel="prefetch" href="/assets/js/357.3508e324.js"><link rel="prefetch" href="/assets/js/358.ee253011.js"><link rel="prefetch" href="/assets/js/359.3297c47c.js"><link rel="prefetch" href="/assets/js/36.24ecda53.js"><link rel="prefetch" href="/assets/js/360.1e382e19.js"><link rel="prefetch" href="/assets/js/361.59859016.js"><link rel="prefetch" href="/assets/js/362.a464b564.js"><link rel="prefetch" href="/assets/js/363.3eb87650.js"><link rel="prefetch" href="/assets/js/364.c4c6d0b6.js"><link rel="prefetch" href="/assets/js/365.5aba40c9.js"><link rel="prefetch" href="/assets/js/366.b3b7abca.js"><link rel="prefetch" href="/assets/js/367.c42930a6.js"><link rel="prefetch" href="/assets/js/368.5560662b.js"><link rel="prefetch" href="/assets/js/369.9a162af7.js"><link rel="prefetch" href="/assets/js/37.33dd7b56.js"><link rel="prefetch" href="/assets/js/370.8ea7771e.js"><link rel="prefetch" href="/assets/js/371.be0cc7ba.js"><link rel="prefetch" href="/assets/js/372.f9fc1933.js"><link rel="prefetch" href="/assets/js/373.98d8a16e.js"><link rel="prefetch" href="/assets/js/374.e2db57aa.js"><link rel="prefetch" href="/assets/js/375.c00bf3b5.js"><link rel="prefetch" href="/assets/js/376.a790d5ac.js"><link rel="prefetch" href="/assets/js/377.f74e48eb.js"><link rel="prefetch" href="/assets/js/378.f5aca933.js"><link rel="prefetch" href="/assets/js/379.8c664538.js"><link rel="prefetch" href="/assets/js/38.bd15ab11.js"><link rel="prefetch" href="/assets/js/380.4589c685.js"><link rel="prefetch" href="/assets/js/381.8638985f.js"><link rel="prefetch" href="/assets/js/382.30f3c7bd.js"><link rel="prefetch" href="/assets/js/383.dbeb0436.js"><link rel="prefetch" href="/assets/js/384.b803d3b6.js"><link rel="prefetch" href="/assets/js/385.56a86d91.js"><link rel="prefetch" href="/assets/js/386.56349a8f.js"><link rel="prefetch" href="/assets/js/387.0f0b9392.js"><link rel="prefetch" href="/assets/js/388.520b66fe.js"><link rel="prefetch" href="/assets/js/389.1bf12c2a.js"><link rel="prefetch" href="/assets/js/39.2c970d93.js"><link rel="prefetch" href="/assets/js/390.ccfbdecb.js"><link rel="prefetch" href="/assets/js/391.75d97d44.js"><link rel="prefetch" href="/assets/js/392.36391ff6.js"><link rel="prefetch" href="/assets/js/393.ba36070a.js"><link rel="prefetch" href="/assets/js/394.d109f58a.js"><link rel="prefetch" href="/assets/js/395.78b5b32e.js"><link rel="prefetch" href="/assets/js/396.daa09ef3.js"><link rel="prefetch" href="/assets/js/397.469829aa.js"><link rel="prefetch" href="/assets/js/398.b7051457.js"><link rel="prefetch" href="/assets/js/399.bc72ea5f.js"><link rel="prefetch" href="/assets/js/40.d2387bd4.js"><link rel="prefetch" href="/assets/js/400.420fe13e.js"><link rel="prefetch" href="/assets/js/401.1b4e625b.js"><link rel="prefetch" href="/assets/js/402.6f025462.js"><link rel="prefetch" href="/assets/js/403.da6e4635.js"><link rel="prefetch" href="/assets/js/404.ac22ea0d.js"><link rel="prefetch" href="/assets/js/405.b9343f8e.js"><link rel="prefetch" href="/assets/js/406.48e3a439.js"><link rel="prefetch" href="/assets/js/407.70ed2739.js"><link rel="prefetch" href="/assets/js/408.3966eb32.js"><link rel="prefetch" href="/assets/js/409.765b2b87.js"><link rel="prefetch" href="/assets/js/41.3ce431f9.js"><link rel="prefetch" href="/assets/js/410.d9bdae89.js"><link rel="prefetch" href="/assets/js/411.ef2da37f.js"><link rel="prefetch" href="/assets/js/412.f0b25882.js"><link rel="prefetch" href="/assets/js/413.51826344.js"><link rel="prefetch" href="/assets/js/414.d4eedf2f.js"><link rel="prefetch" href="/assets/js/415.58ea1230.js"><link rel="prefetch" href="/assets/js/416.3d24a559.js"><link rel="prefetch" href="/assets/js/417.a86dd5b7.js"><link rel="prefetch" href="/assets/js/418.c8d16916.js"><link rel="prefetch" href="/assets/js/419.0a8b0854.js"><link rel="prefetch" href="/assets/js/42.87ab3a38.js"><link rel="prefetch" href="/assets/js/420.4c41f7ec.js"><link rel="prefetch" href="/assets/js/421.dd4806c2.js"><link rel="prefetch" href="/assets/js/422.7cf76c44.js"><link rel="prefetch" href="/assets/js/423.7928286d.js"><link rel="prefetch" href="/assets/js/424.c2fbab93.js"><link rel="prefetch" href="/assets/js/425.95c5b916.js"><link rel="prefetch" href="/assets/js/426.4e08e6af.js"><link rel="prefetch" href="/assets/js/427.29e51f34.js"><link rel="prefetch" href="/assets/js/428.b97c400b.js"><link rel="prefetch" href="/assets/js/429.5ea8100d.js"><link rel="prefetch" href="/assets/js/43.1416b8f3.js"><link rel="prefetch" href="/assets/js/44.e3e55960.js"><link rel="prefetch" href="/assets/js/45.84e1b96f.js"><link rel="prefetch" href="/assets/js/46.fe13646f.js"><link rel="prefetch" href="/assets/js/47.b6785557.js"><link rel="prefetch" href="/assets/js/48.a6dc2310.js"><link rel="prefetch" href="/assets/js/49.6a8dfea8.js"><link rel="prefetch" href="/assets/js/50.93b58926.js"><link rel="prefetch" href="/assets/js/51.7376bd9c.js"><link rel="prefetch" href="/assets/js/52.af9ef361.js"><link rel="prefetch" href="/assets/js/53.5410f16b.js"><link rel="prefetch" href="/assets/js/54.b0d23868.js"><link rel="prefetch" href="/assets/js/55.31bd71fc.js"><link rel="prefetch" href="/assets/js/56.3afe0782.js"><link rel="prefetch" href="/assets/js/57.ddc7f9b1.js"><link rel="prefetch" href="/assets/js/58.0be70027.js"><link rel="prefetch" href="/assets/js/59.7c9fe561.js"><link rel="prefetch" href="/assets/js/60.c1d1ac60.js"><link rel="prefetch" href="/assets/js/61.a9ddc9af.js"><link rel="prefetch" href="/assets/js/62.318821dc.js"><link rel="prefetch" href="/assets/js/63.52abffe0.js"><link rel="prefetch" href="/assets/js/64.bf11af27.js"><link rel="prefetch" href="/assets/js/65.2c9eb38f.js"><link rel="prefetch" href="/assets/js/66.269d510f.js"><link rel="prefetch" href="/assets/js/67.91623dc9.js"><link rel="prefetch" href="/assets/js/68.e5c88e66.js"><link rel="prefetch" href="/assets/js/69.8a3ec5a0.js"><link rel="prefetch" href="/assets/js/7.a7668e4b.js"><link rel="prefetch" href="/assets/js/70.838edfba.js"><link rel="prefetch" href="/assets/js/71.60ab9357.js"><link rel="prefetch" href="/assets/js/72.fb26f7a5.js"><link rel="prefetch" href="/assets/js/73.295ccc7e.js"><link rel="prefetch" href="/assets/js/74.5f4b1186.js"><link rel="prefetch" href="/assets/js/75.6716ba0d.js"><link rel="prefetch" href="/assets/js/76.7b261bff.js"><link rel="prefetch" href="/assets/js/77.2cb470f2.js"><link rel="prefetch" href="/assets/js/78.a157dc3d.js"><link rel="prefetch" href="/assets/js/79.7d223488.js"><link rel="prefetch" href="/assets/js/8.abf30b8a.js"><link rel="prefetch" href="/assets/js/80.4d622cef.js"><link rel="prefetch" href="/assets/js/81.b91b7373.js"><link rel="prefetch" href="/assets/js/82.4cc9bf9d.js"><link rel="prefetch" href="/assets/js/83.a211f5d2.js"><link rel="prefetch" href="/assets/js/84.2d6152e0.js"><link rel="prefetch" href="/assets/js/85.62d9ea35.js"><link rel="prefetch" href="/assets/js/86.43a283a1.js"><link rel="prefetch" href="/assets/js/87.ceb6e91a.js"><link rel="prefetch" href="/assets/js/88.3eaf79ae.js"><link rel="prefetch" href="/assets/js/89.7eb927a2.js"><link rel="prefetch" href="/assets/js/9.df1ee86e.js"><link rel="prefetch" href="/assets/js/90.c1224373.js"><link rel="prefetch" href="/assets/js/91.b8f062e0.js"><link rel="prefetch" href="/assets/js/92.36595d5d.js"><link rel="prefetch" href="/assets/js/93.8ce1e54d.js"><link rel="prefetch" href="/assets/js/94.20c004fa.js"><link rel="prefetch" href="/assets/js/95.a91cba0f.js"><link rel="prefetch" href="/assets/js/96.4ef9be83.js"><link rel="prefetch" href="/assets/js/97.ca172214.js"><link rel="prefetch" href="/assets/js/98.6b72cc4c.js"><link rel="prefetch" href="/assets/js/99.6d98c397.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.d7ff67ab.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.b7eed2e1.js"><link rel="prefetch" href="/assets/js/vendors~photo-swipe.f4bfc23e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a081a12a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">数蛙技术团队</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="用户手册" class="dropdown-title"><span class="title">用户手册</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/manual/cloud/" class="nav-link">数蛙工业数据云平台</a></li><li class="dropdown-item"><!----> <a href="/zh/manual/edge/" class="nav-link">数蛙工业边缘网关</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="产品说明" class="dropdown-title"><span class="title">产品说明</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/product/dgiot/" class="nav-link">一站式物联网平台</a></li><li class="dropdown-item"><!----> <a href="/zh/product/dgtest/" class="nav-link">一站式云压测平台</a></li><li class="dropdown-item"><!----> <a href="/zh/product/dgii/" class="nav-link">工业互联网平台</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发指南" class="dropdown-title"><span class="title">开发指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/backend/" class="nav-link">服务架构</a></li><li class="dropdown-item"><!----> <a href="/zh/frontend/" class="nav-link">交互技术</a></li><li class="dropdown-item"><!----> <a href="/zh/dataanalysis/" class="nav-link router-link-active">数据分析</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实战教程" class="dropdown-title"><span class="title">实战教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/blog/knowledge/" class="nav-link">基础知识</a></li><li class="dropdown-item"><!----> <a href="/zh/blog/study/" class="nav-link">案例教程</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/dataanalysis/tdengine/12.taos-sql/docs.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">English</a></li></ul></div></div> <a href="https://github.com/dgiot" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="用户手册" class="dropdown-title"><span class="title">用户手册</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/manual/cloud/" class="nav-link">数蛙工业数据云平台</a></li><li class="dropdown-item"><!----> <a href="/zh/manual/edge/" class="nav-link">数蛙工业边缘网关</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="产品说明" class="dropdown-title"><span class="title">产品说明</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/product/dgiot/" class="nav-link">一站式物联网平台</a></li><li class="dropdown-item"><!----> <a href="/zh/product/dgtest/" class="nav-link">一站式云压测平台</a></li><li class="dropdown-item"><!----> <a href="/zh/product/dgii/" class="nav-link">工业互联网平台</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发指南" class="dropdown-title"><span class="title">开发指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/backend/" class="nav-link">服务架构</a></li><li class="dropdown-item"><!----> <a href="/zh/frontend/" class="nav-link">交互技术</a></li><li class="dropdown-item"><!----> <a href="/zh/dataanalysis/" class="nav-link router-link-active">数据分析</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实战教程" class="dropdown-title"><span class="title">实战教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/blog/knowledge/" class="nav-link">基础知识</a></li><li class="dropdown-item"><!----> <a href="/zh/blog/study/" class="nav-link">案例教程</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/dataanalysis/tdengine/12.taos-sql/docs.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">English</a></li></ul></div></div> <a href="https://github.com/dgiot" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <div style="padding-left:1.5rem;"><div></div></div> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据分析</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>TDengine</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh/dataanalysis/tdengine/00.index/docs.html" class="sidebar-link">TDengine文档</a></li><li><a href="/zh/dataanalysis/tdengine/01.evaluation/docs.html" class="sidebar-link">TDengine 介绍</a></li><li><a href="/zh/dataanalysis/tdengine/02.getting-started/docs.html" class="sidebar-link">立即开始</a></li><li><a href="/zh/dataanalysis/tdengine/03.architecture/docs.html" class="sidebar-link">数据模型和整体架构</a></li><li><a href="/zh/dataanalysis/tdengine/04.model/docs.html" class="sidebar-link">数据建模</a></li><li><a href="/zh/dataanalysis/tdengine/05.insert/docs.html" class="sidebar-link">高效写入数据</a></li><li><a href="/zh/dataanalysis/tdengine/06.queries/docs.html" class="sidebar-link">高效查询数据</a></li><li><a href="/zh/dataanalysis/tdengine/07.advanced-features/docs.html" class="sidebar-link">高级功能</a></li><li><a href="/zh/dataanalysis/tdengine/08.connector/docs.html" class="sidebar-link">连接器简介</a></li><li><a href="/zh/dataanalysis/tdengine/08.connector/01.java/docs.html" class="sidebar-link">Java Connector</a></li><li><a href="/zh/dataanalysis/tdengine/09.connections/docs.html" class="sidebar-link">与其他工具的连接</a></li><li><a href="/zh/dataanalysis/tdengine/10.cluster/docs.html" class="sidebar-link">TDengine 集群安装、管理</a></li><li><a href="/zh/dataanalysis/tdengine/11.administrator/docs.html" class="sidebar-link">TDengine的运营与维护</a></li><li><a href="/zh/dataanalysis/tdengine/12.taos-sql/docs.html" aria-current="page" class="active sidebar-link">Sql示例</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/12.taos-sql/docs.html#支持的数据类型" class="sidebar-link">支持的数据类型</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/12.taos-sql/docs.html#数据库管理" class="sidebar-link">数据库管理</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/12.taos-sql/docs.html#表管理" class="sidebar-link">表管理</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/12.taos-sql/docs.html#超级表stable管理" class="sidebar-link">超级表STable管理</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/12.taos-sql/docs.html#超级表-stable-中-tag-管理" class="sidebar-link">超级表 STable 中 TAG 管理</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/12.taos-sql/docs.html#数据写入" class="sidebar-link">数据写入</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/12.taos-sql/docs.html#数据查询" class="sidebar-link">数据查询</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/12.taos-sql/docs.html#查询语法" class="sidebar-link">查询语法：</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/12.taos-sql/docs.html#支持的条件过滤操作" class="sidebar-link">支持的条件过滤操作</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/12.taos-sql/docs.html#sql-示例" class="sidebar-link">SQL 示例</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/12.taos-sql/docs.html#sql-函数" class="sidebar-link">SQL 函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/12.taos-sql/docs.html#聚合函数" class="sidebar-link">聚合函数</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/12.taos-sql/docs.html#选择函数" class="sidebar-link">选择函数</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/12.taos-sql/docs.html#计算函数" class="sidebar-link">计算函数</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/12.taos-sql/docs.html#时间维度聚合" class="sidebar-link">时间维度聚合</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/12.taos-sql/docs.html#taos-sql-边界限制" class="sidebar-link">TAOS SQL 边界限制</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/12.taos-sql/docs.html#taos-sql其他约定" class="sidebar-link">TAOS SQL其他约定</a></li></ul></li><li><a href="/zh/dataanalysis/tdengine/12.taos-sql/01.error-code/docs.html" class="sidebar-link">错误码</a></li><li><a href="/zh/dataanalysis/tdengine/13.faq/docs.html" class="sidebar-link">常见问题</a></li></ul></section></li></ul> </aside> <!----> <!----> <main class="page"><div class="theme-default-content" style="margin-top:3.6rem;padding-top:0;padding-bottom:0;"></div> <div class="theme-default-content"><div class="content__default"><h1 id="taos-sql"><a href="#taos-sql" class="header-anchor">#</a> TAOS SQL</h1> <p>本文档说明TAOS SQL支持的语法规则、主要查询功能、支持的SQL查询函数，以及常用技巧等内容。阅读本文档需要读者具有基本的SQL语言的基础。</p> <p>TAOS SQL是用户对TDengine进行数据写入和查询的主要工具。TAOS SQL为了便于用户快速上手，在一定程度上提供类似于标准SQL类似的风格和模式。严格意义上，TAOS SQL并不是也不试图提供SQL标准的语法。此外，由于TDengine针对的时序性结构化数据不提供删除功能，因此在TAO SQL中不提供数据删除的相关功能。</p> <p>本章节SQL语法遵循如下约定：</p> <ul><li>&lt; &gt; 里的内容是用户需要输入的，但不要输入&lt;&gt;本身</li> <li>[ ]表示内容为可选项，但不能输入[]本身</li> <li>| 表示多选一，选择其中一个即可，但不能输入|本身</li> <li>… 表示前面的项可重复多个</li></ul> <p>为更好地说明SQL语法的规则及其特点，本文假设存在一个数据集。以智能电表(meters)为例，假设每个智能电表采集电流、电压、相位三个量。其建模如下：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; DESCRIBE meters;
             Field              |        Type        |   Length    |    Note    |
=================================================================================
 ts                             | TIMESTAMP          |           8 |            |
 current                        | FLOAT              |           4 |            |
 voltage                        | INT                |           4 |            |
 phase                          | FLOAT              |           4 |            |
 location                       | BINARY             |          64 | TAG        |
 groupid                        | INT                |           4 | TAG        |
</code></pre></div><p>数据集包含4个智能电表的数据，按照TDengine的建模规则，对应4个子表，其名称分别是 d1001, d1002, d1003, d1004。</p> <h2 id="支持的数据类型"><a href="#支持的数据类型" class="header-anchor">#</a> <a id="data-type" class="anchor"></a>支持的数据类型</h2> <p>使用TDengine，最重要的是时间戳。创建并插入记录、查询历史记录的时候，均需要指定时间戳。时间戳有如下规则：</p> <ul><li>时间格式为<code>YYYY-MM-DD HH:mm:ss.MS</code>, 默认时间分辨率为毫秒。比如：<code>2017-08-12 18:25:58.128</code></li> <li>内部函数now是服务器的当前时间</li> <li>插入记录时，如果时间戳为now，插入数据时使用服务器当前时间</li> <li>Epoch Time: 时间戳也可以是一个长整数，表示从1970-01-01 08:00:00.000开始的毫秒数</li> <li>时间可以加减，比如 now-2h，表明查询时刻向前推2个小时(最近2小时)。 数字后面的时间单位可以是 a(毫秒)、s(秒)、 m(分)、h(小时)、d(天)、w(周)。 比如select * from t1 where ts &gt; now-2w and ts &lt;= now-1w, 表示查询两周前整整一周的数据。 在指定降频操作(down sampling)的时间窗口(interval)时，时间单位还可以使用 n(自然月) 和 y(自然年)。</li></ul> <p>TDengine缺省的时间戳是毫秒精度，但通过修改配置参数enableMicrosecond就可支持微秒。</p> <p>在TDengine中，普通表的数据模型中可使用以下10种数据类型。</p> <table><thead><tr><th></th> <th style="text-align:center;">类型</th> <th>Bytes</th> <th>说明</th></tr></thead> <tbody><tr><td>1</td> <td style="text-align:center;">TIMESTAMP</td> <td>8</td> <td>时间戳。缺省精度毫秒，可支持微秒。从格林威治时间 1970-01-01 00:00:00.000 (UTC/GMT) 开始，计时不能早于该时间。</td></tr> <tr><td>2</td> <td style="text-align:center;">INT</td> <td>4</td> <td>整型，范围 [-2^31+1,   2^31-1], -2^31用作Null</td></tr> <tr><td>3</td> <td style="text-align:center;">BIGINT</td> <td>8</td> <td>长整型，范围 [-2^63+1,   2^63-1], -2^63用于NULL</td></tr> <tr><td>4</td> <td style="text-align:center;">FLOAT</td> <td>4</td> <td>浮点型，有效位数6-7，范围 [-3.4E38, 3.4E38]</td></tr> <tr><td>5</td> <td style="text-align:center;">DOUBLE</td> <td>8</td> <td>双精度浮点型，有效位数15-16，范围 [-1.7E308,   1.7E308]</td></tr> <tr><td>6</td> <td style="text-align:center;">BINARY</td> <td>自定义</td> <td>用于记录字符串，理论上，最长可以有16374字节，但由于每行数据最多16K字节，实际上限一般小于理论值。 binary仅支持字符串输入，字符串两端使用单引号引用，否则英文全部自动转化为小写。使用时须指定大小，如binary(20)定义了最长为20个字符的字符串，每个字符占1byte的存储空间。如果用户字符串超出20字节将会报错。对于字符串内的单引号，可以用转义字符反斜线加单引号来表示， 即 <strong>\’</strong>。</td></tr> <tr><td>7</td> <td style="text-align:center;">SMALLINT</td> <td>2</td> <td>短整型， 范围 [-32767, 32767], -32768用于NULL</td></tr> <tr><td>8</td> <td style="text-align:center;">TINYINT</td> <td>1</td> <td>单字节整型，范围 [-127, 127], -128用于NULL</td></tr> <tr><td>9</td> <td style="text-align:center;">BOOL</td> <td>1</td> <td>布尔型，{true,   false}</td></tr> <tr><td>10</td> <td style="text-align:center;">NCHAR</td> <td>自定义</td> <td>用于记录非ASCII字符串，如中文字符。每个nchar字符占用4bytes的存储空间。字符串两端使用单引号引用，字符串内的单引号需用转义字符 <strong>\’</strong>。nchar使用时须指定字符串大小，类型为nchar(10)的列表示此列的字符串最多存储10个nchar字符，会固定占用40bytes的空间。如用户字符串长度超出声明长度，则将会报错。</td></tr></tbody></table> <p><strong>Tips</strong>: TDengine对SQL语句中的英文字符不区分大小写，自动转化为小写执行。因此用户大小写敏感的字符串及密码，需要使用单引号将字符串引起来。</p> <h2 id="数据库管理"><a href="#数据库管理" class="header-anchor">#</a> <a id="management" class="anchor"></a>数据库管理</h2> <ul><li><p><strong>创建数据库</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>CREATE DATABASE [IF NOT EXISTS] db_name [KEEP keep] [UPDATE 1];
</code></pre></div><p>说明：</p> <ol><li><p>KEEP是该数据库的数据保留多长天数，缺省是3650天(10年)，数据库会自动删除超过时限的数据；</p></li> <li><p>UPDATE 标志数据库支持更新相同时间戳数据；</p></li> <li><p>数据库名最大长度为33；</p></li> <li><p>一条SQL 语句的最大长度为65480个字符；</p></li> <li><p>数据库还有更多与存储相关的配置参数，请参见系统管理。</p></li></ol></li> <li><p><strong>显示系统当前参数</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>SHOW VARIABLES;
</code></pre></div></li> <li><p><strong>使用数据库</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>USE db_name;
</code></pre></div><p>使用/切换数据库</p></li> <li><p><strong>删除数据库</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>DROP DATABASE [IF EXISTS] db_name;
</code></pre></div><p>删除数据库。所包含的全部数据表将被删除，谨慎使用</p></li> <li><p><strong>修改数据库参数</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>ALTER DATABASE db_name COMP 2;
</code></pre></div><p>COMP参数是指修改数据库文件压缩标志位，取值范围为[0, 2]. 0表示不压缩，1表示一阶段压缩，2表示两阶段压缩。</p> <div class="language-mysql extra-class"><pre class="language-text"><code>ALTER DATABASE db_name REPLICA 2;
</code></pre></div><p>REPLICA参数是指修改数据库副本数，取值范围[1, 3]。在集群中使用，副本数必须小于或等于dnode的数目。</p> <div class="language-mysql extra-class"><pre class="language-text"><code>ALTER DATABASE db_name KEEP 365;
</code></pre></div><p>KEEP参数是指修改数据文件保存的天数，缺省值为3650，取值范围[days, 365000]，必须大于或等于days参数值。</p> <div class="language-mysql extra-class"><pre class="language-text"><code>ALTER DATABASE db_name QUORUM 2;
</code></pre></div><p>QUORUM参数是指数据写入成功所需要的确认数。取值范围[1, 3]。对于异步复制，quorum设为1，具有master角色的虚拟节点自己确认即可。对于同步复制，需要至少大于等于2。原则上，Quorum &gt;=1 并且 Quorum &lt;= replica(副本数)，这个参数在启动一个同步模块实例时需要提供。</p> <div class="language-mysql extra-class"><pre class="language-text"><code>ALTER DATABASE db_name BLOCKS 100;
</code></pre></div><p>BLOCKS参数是每个VNODE (TSDB) 中有多少cache大小的内存块，因此一个VNODE的用的内存大小粗略为（cache * blocks）。取值范围[3, 1000]。</p> <p><strong>Tips</strong>: 以上所有参数修改后都可以用show databases来确认是否修改成功。</p></li> <li><p><strong>显示系统所有数据库</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>SHOW DATABASES;
</code></pre></div></li></ul> <h2 id="表管理"><a href="#表管理" class="header-anchor">#</a> <a id="table" class="anchor"></a>表管理</h2> <ul><li><p><strong>创建数据表</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>CREATE TABLE [IF NOT EXISTS] tb_name (timestamp_field_name TIMESTAMP, field1_name data_type1 [, field2_name data_type2 ...]);
</code></pre></div><p>说明：</p> <ol><li><p>表的第一个字段必须是TIMESTAMP，并且系统自动将其设为主键；</p></li> <li><p>表名最大长度为192；</p></li> <li><p>表的每行长度不能超过16k个字符;</p></li> <li><p>子表名只能由字母、数字和下划线组成，且不能以数字开头</p></li> <li><p>使用数据类型binary或nchar，需指定其最长的字节数，如binary(20)，表示20字节；</p></li></ol></li> <li><p><strong>以超级表为模板创建数据表</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>CREATE TABLE [IF NOT EXISTS] tb_name USING stb_name TAGS (tag_value1, ...);
</code></pre></div><p>以指定的超级表为模板，指定 tags 的值来创建数据表。</p></li> <li><p><strong>以超级表为模板创建数据表，并指定具体的 tags 列</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>CREATE TABLE [IF NOT EXISTS] tb_name USING stb_name (tag_name1, ...) TAGS (tag_value1, ...);
</code></pre></div><p>以指定的超级表为模板，指定一部分 tags 列的值来创建数据表。（没被指定的 tags 列会设为空值。）<br>
说明：从 2.0.17 版本开始支持这种方式。在之前的版本中，不允许指定 tags 列，而必须显式给出所有 tags 列的取值。</p></li> <li><p><strong>批量创建数据表</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>CREATE TABLE [IF NOT EXISTS] tb_name1 USING stb_name TAGS (tag_value1, ...) tb_name2 USING stb_name TAGS (tag_value2, ...) ...;
</code></pre></div><p>以更快的速度批量创建大量数据表。（服务器端 2.0.14 及以上版本）</p> <p>说明：</p> <p>1）批量建表方式要求数据表必须以超级表为模板。</p> <p>2）在不超出 SQL 语句长度限制的前提下，单条语句中的建表数量建议控制在 1000～3000 之间，将会获得比较理想的建表速度。</p></li> <li><p><strong>删除数据表</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>DROP TABLE [IF EXISTS] tb_name;
</code></pre></div></li> <li><p><strong>显示当前数据库下的所有数据表信息</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>SHOW TABLES [LIKE tb_name_wildcar];
</code></pre></div><p>显示当前数据库下的所有数据表信息。</p> <p>说明：可在like中使用通配符进行名称的匹配，这一通配符字符串最长不能超过24字节。</p> <p>通配符匹配：1）’%’ (百分号)匹配0到任意个字符；2）’_’下划线匹配一个字符。</p></li> <li><p><strong>在线修改显示字符宽度</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>SET MAX_BINARY_DISPLAY_WIDTH &lt;nn&gt;;
</code></pre></div></li> <li><p><strong>获取表的结构信息</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>DESCRIBE tb_name;
</code></pre></div></li> <li><p><strong>表增加列</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>ALTER TABLE tb_name ADD COLUMN field_name data_type;
</code></pre></div><p>说明：</p> <ol><li><p>列的最大个数为1024，最小个数为2；</p></li> <li><p>列名最大长度为64；</p></li></ol></li> <li><p><strong>表删除列</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>ALTER TABLE tb_name DROP COLUMN field_name; 
</code></pre></div><p>如果表是通过<a href="/zh/dataanalysis/tdengine/super-table/">超级表</a>创建，更改表结构的操作只能对超级表进行。同时针对超级表的结构更改对所有通过该结构创建的表生效。对于不是通过超级表创建的表，可以直接修改表结构</p></li></ul> <h2 id="超级表stable管理"><a href="#超级表stable管理" class="header-anchor">#</a> <a id="super-table" class="anchor"></a>超级表STable管理</h2> <p>注意：在 2.0.15 以前的版本中，并不支持 STABLE 保留字，而是写作 TABLE。也即，在本节后文的指令说明中，CREATE、DROP、ALTER 三个指令在老版本中保留字需写作 TABLE 而不是 STABLE。</p> <ul><li><p><strong>创建超级表</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>CREATE STABLE [IF NOT EXISTS] stb_name (timestamp_field_name TIMESTAMP, field1_name data_type1 [, field2_name data_type2 ...]) TAGS (tag1_name tag_type1, tag2_name tag_type2 [, tag3_name tag_type3]);
</code></pre></div><p>创建 STable，与创建表的 SQL 语法相似，但需指定 TAGS 字段的名称和类型</p> <p>说明：</p> <ol><li><p>TAGS 列的数据类型不能是 timestamp 类型；</p></li> <li><p>TAGS 列名不能与其他列名相同；</p></li> <li><p>TAGS 列名不能为预留关键字；</p></li> <li><p>TAGS 最多允许128个，至少1个，总长度不超过16k个字符。</p></li></ol></li> <li><p><strong>删除超级表</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>DROP STABLE [IF EXISTS] stb_name;
</code></pre></div><p>删除 STable 会自动删除通过 STable 创建的子表。</p></li> <li><p><strong>显示当前数据库下的所有超级表信息</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>SHOW STABLES [LIKE tb_name_wildcar];
</code></pre></div><p>查看数据库内全部 STable，及其相关信息，包括 STable 的名称、创建时间、列数量、标签（TAG）数量、通过该 STable 建表的数量。</p></li> <li><p><strong>获取超级表的结构信息</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>DESCRIBE stb_name;
</code></pre></div></li> <li><p><strong>超级表增加列</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>ALTER STABLE stb_name ADD COLUMN field_name data_type;
</code></pre></div></li> <li><p><strong>超级表删除列</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>ALTER STABLE stb_name DROP COLUMN field_name; 
</code></pre></div></li></ul> <h2 id="超级表-stable-中-tag-管理"><a href="#超级表-stable-中-tag-管理" class="header-anchor">#</a> <a id="tags" class="anchor"></a>超级表 STable 中 TAG 管理</h2> <ul><li><p><strong>添加标签</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>ALTER STABLE stb_name ADD TAG new_tag_name tag_type;
</code></pre></div><p>为 STable 增加一个新的标签，并指定新标签的类型。标签总数不能超过 128 个，总长度不超过 16k 个字符。</p></li> <li><p><strong>删除标签</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>ALTER STABLE stb_name DROP TAG tag_name;
</code></pre></div><p>删除超级表的一个标签，从超级表删除某个标签后，该超级表下的所有子表也会自动删除该标签。</p></li> <li><p><strong>修改标签名</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>ALTER STABLE stb_name CHANGE TAG old_tag_name new_tag_name;
</code></pre></div><p>修改超级表的标签名，从超级表修改某个标签名后，该超级表下的所有子表也会自动更新该标签名。</p></li> <li><p><strong>修改子表标签值</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>ALTER TABLE tb_name SET TAG tag_name=new_tag_value;
</code></pre></div><p>说明：除了更新标签的值的操作是针对子表进行，其他所有的标签操作（添加标签、删除标签等）均只能作用于 STable，不能对单个子表操作。对 STable 添加标签以后，依托于该 STable 建立的所有表将自动增加了一个标签，所有新增标签的默认值都是 NULL。</p></li></ul> <h2 id="数据写入"><a href="#数据写入" class="header-anchor">#</a> <a id="insert" class="anchor"></a>数据写入</h2> <ul><li><p><strong>插入一条记录</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>INSERT INTO tb_name VALUES (field_value, ...);
</code></pre></div><p>向表tb_name中插入一条记录</p></li> <li><p><strong>插入一条记录，数据对应到指定的列</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>INSERT INTO tb_name (field1_name, ...) VALUES (field1_value1, ...);
</code></pre></div><p>向表tb_name中插入一条记录，数据对应到指定的列。SQL语句中没有出现的列，数据库将自动填充为NULL。主键（时间戳）不能为NULL。</p></li> <li><p><strong>插入多条记录</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>INSERT INTO tb_name VALUES (field1_value1, ...) (field1_value2, ...) ...;
</code></pre></div><p>向表tb_name中插入多条记录</p></li> <li><p><strong>按指定的列插入多条记录</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>INSERT INTO tb_name (field1_name, ...) VALUES (field1_value1, ...) (field1_value2, ...) ...;
</code></pre></div><p>向表tb_name中按指定的列插入多条记录</p></li> <li><p><strong>向多个表插入多条记录</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>INSERT INTO tb1_name VALUES (field1_value1, ...) (field1_value2, ...) ...
            tb2_name VALUES (field1_value1, ...) (field1_value2, ...) ...;
</code></pre></div><p>同时向表tb1_name和tb2_name中分别插入多条记录</p></li> <li><p><strong>同时向多个表按列插入多条记录</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>INSERT INTO tb1_name (tb1_field1_name, ...) VALUES (field1_value1, ...) (field1_value2, ...) ...
            tb2_name (tb2_field1_name, ...) VALUES (field1_value1, ...) (field1_value2, ...) ...;
</code></pre></div><p>同时向表tb1_name和tb2_name中按列分别插入多条记录</p> <p>注意：</p> <ol><li>如果时间戳为0，系统将自动使用服务器当前时间作为该记录的时间戳；</li> <li>允许插入的最老记录的时间戳，是相对于当前服务器时间，减去配置的keep值（数据保留的天数），允许插入的最新记录的时间戳，是相对于当前服务器时间，加上配置的days值（数据文件存储数据的时间跨度，单位为天）。keep和days都是可以在创建数据库时指定的，缺省值分别是3650天和10天。</li></ol></li> <li><p><a id="auto_create_table" class="anchor"></a><strong>插入记录时自动建表</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>INSERT INTO tb_name USING stb_name TAGS (tag_value1, ...) VALUES (field_value1, ...);
</code></pre></div><p>如果用户在写数据时并不确定某个表是否存在，此时可以在写入数据时使用自动建表语法来创建不存在的表，若该表已存在则不会建立新表。自动建表时，要求必须以超级表为模板，并写明数据表的 tags 取值。</p></li> <li><p><strong>插入记录时自动建表，并指定具体的 tags 列</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>INSERT INTO tb_name USING stb_name (tag_name1, ...) TAGS (tag_value1, ...) VALUES (field_value1, ...);
</code></pre></div><p>在自动建表时，可以只是指定部分 tags 列的取值，未被指定的 tags 列将取为空值。</p></li></ul> <p><strong>历史记录写入</strong>：可使用IMPORT或者INSERT命令，IMPORT的语法，功能与INSERT完全一样。</p> <p>说明：针对 insert 类型的 SQL 语句，我们采用的流式解析策略，在发现后面的错误之前，前面正确的部分SQL仍会执行。下面的sql中，insert语句是无效的，但是d1001仍会被创建。</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; CREATE TABLE meters(ts TIMESTAMP, current FLOAT, voltage INT, phase FLOAT) TAGS(location BINARY(30), groupId INT);
Query OK, 0 row(s) affected (0.008245s)

taos&gt; SHOW STABLES;
              name              |      created_time       | columns |  tags  |   tables    |
============================================================================================
 meters                         | 2020-08-06 17:50:27.831 |       4 |      2 |           0 |
Query OK, 1 row(s) in set (0.001029s)

taos&gt; SHOW TABLES;
Query OK, 0 row(s) in set (0.000946s)

taos&gt; INSERT INTO d1001 USING meters TAGS('Beijing.Chaoyang', 2);

DB error: invalid SQL: keyword VALUES or FILE required

taos&gt; SHOW TABLES;
           table_name           |      created_time       | columns |          stable_name           |
======================================================================================================
 d1001                          | 2020-08-06 17:52:02.097 |       4 | meters                         |
Query OK, 1 row(s) in set (0.001091s)
</code></pre></div><h2 id="数据查询"><a href="#数据查询" class="header-anchor">#</a> <a id="select" class="anchor"></a>数据查询</h2> <h3 id="查询语法"><a href="#查询语法" class="header-anchor">#</a> 查询语法：</h3> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT select_expr [, select_expr ...]
    FROM {tb_name_list}
    [WHERE where_condition]
    [INTERVAL (interval_val [, interval_offset])]
    [FILL fill_val]
    [SLIDING fill_val]
    [GROUP BY col_list]
    [ORDER BY col_list { DESC | ASC }]
    [SLIMIT limit_val [, SOFFSET offset_val]]
    [LIMIT limit_val [, OFFSET offset_val]]
    [&gt;&gt; export_file];
</code></pre></div><h4 id="select子句"><a href="#select子句" class="header-anchor">#</a> SELECT子句</h4> <p>一个选择子句可以是联合查询（UNION）和另一个查询的子查询（SUBQUERY）。</p> <h5 id="通配符"><a href="#通配符" class="header-anchor">#</a> 通配符</h5> <p>通配符 * 可以用于代指全部列。对于普通表，结果中只有普通列。</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT * FROM d1001;
           ts            |       current        |   voltage   |        phase         |
======================================================================================
 2018-10-03 14:38:05.000 |             10.30000 |         219 |              0.31000 |
 2018-10-03 14:38:15.000 |             12.60000 |         218 |              0.33000 |
 2018-10-03 14:38:16.800 |             12.30000 |         221 |              0.31000 |
Query OK, 3 row(s) in set (0.001165s)
</code></pre></div><p>在针对超级表，通配符包含 <em>标签列</em> 。</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT * FROM meters;
           ts            |       current        |   voltage   |        phase         |            location            |   groupid   |
=====================================================================================================================================
 2018-10-03 14:38:05.500 |             11.80000 |         221 |              0.28000 | Beijing.Haidian                |           2 |
 2018-10-03 14:38:16.600 |             13.40000 |         223 |              0.29000 | Beijing.Haidian                |           2 |
 2018-10-03 14:38:05.000 |             10.80000 |         223 |              0.29000 | Beijing.Haidian                |           3 |
 2018-10-03 14:38:06.500 |             11.50000 |         221 |              0.35000 | Beijing.Haidian                |           3 |
 2018-10-03 14:38:04.000 |             10.20000 |         220 |              0.23000 | Beijing.Chaoyang               |           3 |
 2018-10-03 14:38:16.650 |             10.30000 |         218 |              0.25000 | Beijing.Chaoyang               |           3 |
 2018-10-03 14:38:05.000 |             10.30000 |         219 |              0.31000 | Beijing.Chaoyang               |           2 |
 2018-10-03 14:38:15.000 |             12.60000 |         218 |              0.33000 | Beijing.Chaoyang               |           2 |
 2018-10-03 14:38:16.800 |             12.30000 |         221 |              0.31000 | Beijing.Chaoyang               |           2 |
Query OK, 9 row(s) in set (0.002022s)
</code></pre></div><p>通配符支持表名前缀，以下两个SQL语句均为返回全部的列：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT * FROM d1001;
SELECT d1001.* FROM d1001;
</code></pre></div><p>在Join查询中，带前缀的*和不带前缀*返回的结果有差别， *返回全部表的所有列数据（不包含标签），带前缀的通配符，则只返回该表的列数据。</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT * FROM d1001, d1003 WHERE d1001.ts=d1003.ts;
           ts            | current |   voltage   |    phase     |           ts            | current |   voltage   |    phase     |
==================================================================================================================================
 2018-10-03 14:38:05.000 | 10.30000|         219 |      0.31000 | 2018-10-03 14:38:05.000 | 10.80000|         223 |      0.29000 |
Query OK, 1 row(s) in set (0.017385s)
</code></pre></div><div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT d1001.* FROM d1001,d1003 WHERE d1001.ts = d1003.ts;
           ts            |       current        |   voltage   |        phase         |
======================================================================================
 2018-10-03 14:38:05.000 |             10.30000 |         219 |              0.31000 |
Query OK, 1 row(s) in set (0.020443s)
</code></pre></div><p>在使用SQL函数来进行查询过程中，部分SQL函数支持通配符操作。其中的区别在于：
<code>count(\*)</code>函数只返回一列。<code>first</code>、<code>last</code>、<code>last_row</code>函数则是返回全部列。</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT COUNT(*) FROM d1001;
       count(*)        |
========================
                     3 |
Query OK, 1 row(s) in set (0.001035s)
</code></pre></div><div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT FIRST(*) FROM d1001;
        first(ts)        |    first(current)    | first(voltage) |     first(phase)     |
=========================================================================================
 2018-10-03 14:38:05.000 |             10.30000 |            219 |              0.31000 |
Query OK, 1 row(s) in set (0.000849s)
</code></pre></div><h5 id="标签列"><a href="#标签列" class="header-anchor">#</a> 标签列</h5> <p>从 2.0.14 版本开始，支持在普通表的查询中指定 <em>标签列</em>，且标签列的值会与普通列的数据一起返回。</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT location, groupid, current FROM d1001 LIMIT 2;
            location            |   groupid   |       current        |
======================================================================
 Beijing.Chaoyang               |           2 |             10.30000 |
 Beijing.Chaoyang               |           2 |             12.60000 |
Query OK, 2 row(s) in set (0.003112s)
</code></pre></div><p>注意：普通表的通配符 * 中并不包含 <em>标签列</em>。</p> <h5 id="获取标签列的去重取值"><a href="#获取标签列的去重取值" class="header-anchor">#</a> 获取标签列的去重取值</h5> <p>从 2.0.15 版本开始，支持在超级表查询标签列时，指定 distinct 关键字，这样将返回指定标签列的所有不重复取值。</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT DISTINCT tag_name FROM stb_name;
</code></pre></div><p>注意：目前 distinct 关键字只支持对超级表的标签列进行去重，而不能用于普通列。</p> <h4 id="结果集列名"><a href="#结果集列名" class="header-anchor">#</a> 结果集列名</h4> <p><code>SELECT</code>子句中，如果不指定返回结果集合的列名，结果集列名称默认使用<code>SELECT</code>子句中的表达式名称作为列名称。此外，用户可使用<code>AS</code>来重命名返回结果集合中列的名称。例如：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT ts, ts AS primary_key_ts FROM d1001;
           ts            |     primary_key_ts      |
====================================================
 2018-10-03 14:38:05.000 | 2018-10-03 14:38:05.000 |
 2018-10-03 14:38:15.000 | 2018-10-03 14:38:15.000 |
 2018-10-03 14:38:16.800 | 2018-10-03 14:38:16.800 |
Query OK, 3 row(s) in set (0.001191s)
</code></pre></div><p>但是针对<code>first(*)</code>、<code>last(*)</code>、<code>last_row(*)</code>不支持针对单列的重命名。</p> <h4 id="隐式结果列"><a href="#隐式结果列" class="header-anchor">#</a> 隐式结果列</h4> <p><code>Select_exprs</code>可以是表所属列的列名，也可以是基于列的函数表达式或计算式，数量的上限256个。当用户使用了<code>interval</code>或<code>group by tags</code>的子句以后，在最后返回结果中会强制返回时间戳列（第一列）和group by子句中的标签列。后续的版本中可以支持关闭group by子句中隐式列的输出，列输出完全由select子句控制。</p> <h4 id="表-超级表-列表"><a href="#表-超级表-列表" class="header-anchor">#</a> 表（超级表）列表</h4> <p>FROM关键字后面可以是若干个表（超级表）列表，也可以是子查询的结果。
如果没有指定用户的当前数据库，可以在表名称之前使用数据库的名称来指定表所属的数据库。例如：<code>power.d1001</code> 方式来跨库使用表。</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT * FROM power.d1001;
------------------------------
USE power;
SELECT * FROM d1001;
</code></pre></div><h4 id="特殊功能"><a href="#特殊功能" class="header-anchor">#</a> 特殊功能</h4> <p>部分特殊的查询功能可以不使用FROM子句执行。获取当前所在的数据库 database()</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT DATABASE();
           database()           |
=================================
 power                          |
Query OK, 1 row(s) in set (0.000079s)
</code></pre></div><p>如果登录的时候没有指定默认数据库，且没有使用<code>use</code>命令切换数据，则返回NULL。</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT DATABASE();
           database()           |
=================================
 NULL                           |
Query OK, 1 row(s) in set (0.000184s)
</code></pre></div><p>获取服务器和客户端版本号:</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT CLIENT_VERSION();
 client_version() |
===================
 2.0.0.0          |
Query OK, 1 row(s) in set (0.000070s)

taos&gt; SELECT SERVER_VERSION();
 server_version() |
===================
 2.0.0.0          |
Query OK, 1 row(s) in set (0.000077s)
</code></pre></div><p>服务器状态检测语句。如果服务器正常，返回一个数字（例如 1）。如果服务器异常，返回error code。该SQL语法能兼容连接池对于TDengine状态的检查及第三方工具对于数据库服务器状态的检查。并可以避免出现使用了错误的心跳检测SQL语句导致的连接池连接丢失的问题。</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT SERVER_STATUS();
 server_status() |
==================
               1 |
Query OK, 1 row(s) in set (0.000074s)

taos&gt; SELECT SERVER_STATUS() AS status;
   status    |
==============
           1 |
Query OK, 1 row(s) in set (0.000081s)
</code></pre></div><h4 id="taos-sql中特殊关键词"><a href="#taos-sql中特殊关键词" class="header-anchor">#</a> TAOS SQL中特殊关键词</h4> <blockquote><p>TBNAME： 在超级表查询中可视为一个特殊的标签，代表查询涉及的子表名<br>
_c0: 表示表（超级表）的第一列</p></blockquote> <h4 id="小技巧"><a href="#小技巧" class="header-anchor">#</a> 小技巧</h4> <p>获取一个超级表所有的子表名及相关的标签信息：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT TBNAME, location FROM meters;
</code></pre></div><p>统计超级表下辖子表数量：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT COUNT(TBNAME) FROM meters;
</code></pre></div><p>以上两个查询均只支持在Where条件子句中添加针对标签（TAGS）的过滤条件。例如：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT TBNAME, location FROM meters;
             tbname             |            location            |
==================================================================
 d1004                          | Beijing.Haidian                |
 d1003                          | Beijing.Haidian                |
 d1002                          | Beijing.Chaoyang               |
 d1001                          | Beijing.Chaoyang               |
Query OK, 4 row(s) in set (0.000881s)

taos&gt; SELECT COUNT(tbname) FROM meters WHERE groupId &gt; 2;
     count(tbname)     |
========================
                     2 |
Query OK, 1 row(s) in set (0.001091s)
</code></pre></div><ul><li>可以使用* 返回所有列，或指定列名。可以对数字列进行四则运算，可以给输出的列取列名</li> <li>where语句可以使用各种逻辑判断来过滤数字值，或使用通配符来过滤字符串</li> <li>输出结果缺省按首列时间戳升序排序，但可以指定按降序排序(_c0指首列时间戳)。使用ORDER BY对其他字段进行排序为非法操作。</li> <li>参数LIMIT控制输出条数，OFFSET指定从第几条开始输出。LIMIT/OFFSET对结果集的执行顺序在ORDER BY之后。</li> <li>通过”&gt;&gt;&quot;输出结果可以导出到指定文件</li></ul> <h3 id="支持的条件过滤操作"><a href="#支持的条件过滤操作" class="header-anchor">#</a> 支持的条件过滤操作</h3> <table><thead><tr><th>Operation</th> <th>Note</th> <th>Applicable Data Types</th></tr></thead> <tbody><tr><td>&gt;</td> <td>larger than</td> <td><strong><code>timestamp</code></strong> and all numeric types</td></tr> <tr><td>&lt;</td> <td>smaller than</td> <td><strong><code>timestamp</code></strong> and all numeric types</td></tr> <tr><td>&gt;=</td> <td>larger than or equal to</td> <td><strong><code>timestamp</code></strong> and all numeric types</td></tr> <tr><td>&lt;=</td> <td>smaller than or equal to</td> <td><strong><code>timestamp</code></strong> and all numeric types</td></tr> <tr><td>=</td> <td>equal to</td> <td>all types</td></tr> <tr><td>&lt;&gt;</td> <td>not equal to</td> <td>all types</td></tr> <tr><td>%</td> <td>match with any char sequences</td> <td><strong><code>binary</code></strong> <strong><code>nchar</code></strong></td></tr> <tr><td>_</td> <td>match with a single char</td> <td><strong><code>binary</code></strong> <strong><code>nchar</code></strong></td></tr></tbody></table> <ol><li>同时进行多个字段的范围过滤，需要使用关键词 AND 来连接不同的查询条件，暂不支持 OR 连接的不同列之间的查询过滤条件。</li> <li>针对单一字段的过滤，如果是时间过滤条件，则一条语句中只支持设定一个；但针对其他的（普通）列或标签列，则可以使用<code>OR</code> 关键字进行组合条件的查询过滤。例如：((value &gt; 20 and value &lt; 30) OR (value &lt; 12)) 。</li></ol> <h3 id="sql-示例"><a href="#sql-示例" class="header-anchor">#</a> SQL 示例</h3> <ul><li><p>对于下面的例子，表tb1用以下语句创建</p> <div class="language-mysql extra-class"><pre class="language-text"><code>CREATE TABLE tb1 (ts TIMESTAMP, col1 INT, col2 FLOAT, col3 BINARY(50));
</code></pre></div></li> <li><p>查询tb1刚过去的一个小时的所有记录</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT * FROM tb1 WHERE ts &gt;= NOW - 1h;
</code></pre></div></li> <li><p>查询表tb1从2018-06-01 08:00:00.000 到2018-06-02 08:00:00.000时间范围，并且col3的字符串是'nny'结尾的记录，结果按照时间戳降序</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT * FROM tb1 WHERE ts &gt; '2018-06-01 08:00:00.000' AND ts &lt;= '2018-06-02 08:00:00.000' AND col3 LIKE '%nny' ORDER BY ts DESC;
</code></pre></div></li> <li><p>查询col1与col2的和，并取名complex, 时间大于2018-06-01 08:00:00.000, col2大于1.2，结果输出仅仅10条记录，从第5条开始</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT (col1 + col2) AS 'complex' FROM tb1 WHERE ts &gt; '2018-06-01 08:00:00.000' AND col2 &gt; 1.2 LIMIT 10 OFFSET 5;
</code></pre></div></li> <li><p>查询过去10分钟的记录，col2的值大于3.14，并且将结果输出到文件 <code>/home/testoutpu.csv</code>.</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT COUNT(*) FROM tb1 WHERE ts &gt;= NOW - 10m AND col2 &gt; 3.14 &gt;&gt; /home/testoutpu.csv;
</code></pre></div></li></ul> <h2 id="sql-函数"><a href="#sql-函数" class="header-anchor">#</a> <a id="functions" class="anchor"></a>SQL 函数</h2> <h3 id="聚合函数"><a href="#聚合函数" class="header-anchor">#</a> 聚合函数</h3> <p>TDengine支持针对数据的聚合查询。提供支持的聚合和选择函数如下：</p> <ul><li><p><strong>COUNT</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT COUNT([*|field_name]) FROM tb_name [WHERE clause];
</code></pre></div><p>功能说明：统计表/超级表中记录行数或某列的非空值个数。</p> <p>返回结果数据类型：长整型INT64。</p> <p>应用字段：应用全部字段。</p> <p>适用于：表、超级表。</p> <p>说明：</p> <p>1）可以使用星号<em>来替代具体的字段，使用星号(</em>)返回全部记录数量。</p> <p>2）针对同一表的（不包含NULL值）字段查询结果均相同。</p> <p>3）如果统计对象是具体的列，则返回该列中非NULL值的记录数量。</p> <p>示例：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT COUNT(*), COUNT(voltage) FROM meters;
    count(*)        |    count(voltage)     |
================================================
                    9 |                     9 |
Query OK, 1 row(s) in set (0.004475s)

taos&gt; SELECT COUNT(*), COUNT(voltage) FROM d1001;
    count(*)        |    count(voltage)     |
================================================
                    3 |                     3 |
Query OK, 1 row(s) in set (0.001075s)
</code></pre></div></li> <li><p><strong>AVG</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT AVG(field_name) FROM tb_name [WHERE clause];
</code></pre></div><p>功能说明：统计表/超级表中某列的平均值。</p> <p>返回结果数据类型：双精度浮点数Double。</p> <p>应用字段：不能应用在timestamp、binary、nchar、bool字段。</p> <p>适用于：表、超级表。</p> <p>示例：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT AVG(current), AVG(voltage), AVG(phase) FROM meters;
    avg(current)        |       avg(voltage)        |        avg(phase)         |
====================================================================================
            11.466666751 |             220.444444444 |               0.293333333 |
Query OK, 1 row(s) in set (0.004135s)

taos&gt; SELECT AVG(current), AVG(voltage), AVG(phase) FROM d1001;
    avg(current)        |       avg(voltage)        |        avg(phase)         |
====================================================================================
            11.733333588 |             219.333333333 |               0.316666673 |
Query OK, 1 row(s) in set (0.000943s)
</code></pre></div></li> <li><p><strong>TWA</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT TWA(field_name) FROM tb_name WHERE clause;
</code></pre></div><p>功能说明：时间加权平均函数。统计表中某列在一段时间内的时间加权平均。</p> <p>返回结果数据类型：双精度浮点数Double。</p> <p>应用字段：不能应用在timestamp、binary、nchar、bool类型字段。</p> <p>适用于：表。</p></li> <li><p><strong>SUM</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT SUM(field_name) FROM tb_name [WHERE clause];
</code></pre></div><p>功能说明：统计表/超级表中某列的和。</p> <p>返回结果数据类型：双精度浮点数Double和长整型INT64。</p> <p>应用字段：不能应用在timestamp、binary、nchar、bool类型字段。</p> <p>适用于：表、超级表。</p> <p>示例：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT SUM(current), SUM(voltage), SUM(phase) FROM meters;
    sum(current)        |     sum(voltage)      |        sum(phase)         |
================================================================================
            103.200000763 |                  1984 |               2.640000001 |
Query OK, 1 row(s) in set (0.001702s)

taos&gt; SELECT SUM(current), SUM(voltage), SUM(phase) FROM d1001;
    sum(current)        |     sum(voltage)      |        sum(phase)         |
================================================================================
            35.200000763 |                   658 |               0.950000018 |
Query OK, 1 row(s) in set (0.000980s)
</code></pre></div></li> <li><p><strong>STDDEV</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT STDDEV(field_name) FROM tb_name [WHERE clause];
</code></pre></div><p>功能说明：统计表中某列的均方差。</p> <p>返回结果数据类型：双精度浮点数Double。</p> <p>应用字段：不能应用在timestamp、binary、nchar、bool类型字段。</p> <p>适用于：表。（从 2.0.15.1 版本开始，本函数也支持超级表）</p> <p>示例：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT STDDEV(current) FROM d1001;
    stddev(current)      |
============================
            1.020892909 |
Query OK, 1 row(s) in set (0.000915s)
</code></pre></div></li> <li><p><strong>LEASTSQUARES</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT LEASTSQUARES(field_name, start_val, step_val) FROM tb_name [WHERE clause];
</code></pre></div><p>功能说明：统计表中某列的值是主键（时间戳）的拟合直线方程。start_val是自变量初始值，step_val是自变量的步长值。</p> <p>返回结果数据类型：字符串表达式（斜率, 截距）。</p> <p>应用字段：不能应用在timestamp、binary、nchar、bool类型字段。</p> <p>说明：自变量是时间戳，因变量是该列的值。</p> <p>适用于：表。</p> <p>示例：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT LEASTSQUARES(current, 1, 1) FROM d1001;
            leastsquares(current, 1, 1)             |
=====================================================
{slop:1.000000, intercept:9.733334}                 |
Query OK, 1 row(s) in set (0.000921s)
</code></pre></div></li></ul> <h3 id="选择函数"><a href="#选择函数" class="header-anchor">#</a> 选择函数</h3> <ul><li><p><strong>MIN</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT MIN(field_name) FROM {tb_name | stb_name} [WHERE clause];
</code></pre></div><p>功能说明：统计表/超级表中某列的值最小值。</p> <p>返回结果数据类型：同应用的字段。</p> <p>应用字段：不能应用在timestamp、binary、nchar、bool类型字段。</p> <p>示例：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT MIN(current), MIN(voltage) FROM meters;
    min(current)     | min(voltage) |
======================================
            10.20000 |          218 |
Query OK, 1 row(s) in set (0.001765s)

taos&gt; SELECT MIN(current), MIN(voltage) FROM d1001;
    min(current)     | min(voltage) |
======================================
            10.30000 |          218 |
Query OK, 1 row(s) in set (0.000950s)
</code></pre></div></li> <li><p><strong>MAX</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT MAX(field_name) FROM { tb_name | stb_name } [WHERE clause];
</code></pre></div><p>功能说明：统计表/超级表中某列的值最大值。</p> <p>返回结果数据类型：同应用的字段。</p> <p>应用字段：不能应用在timestamp、binary、nchar、bool类型字段。</p> <p>示例：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT MAX(current), MAX(voltage) FROM meters;
    max(current)     | max(voltage) |
======================================
            13.40000 |          223 |
Query OK, 1 row(s) in set (0.001123s)

taos&gt; SELECT MAX(current), MAX(voltage) FROM d1001;
    max(current)     | max(voltage) |
======================================
            12.60000 |          221 |
Query OK, 1 row(s) in set (0.000987s)
</code></pre></div></li> <li><p><strong>FIRST</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT FIRST(field_name) FROM { tb_name | stb_name } [WHERE clause];
</code></pre></div><p>功能说明：统计表/超级表中某列的值最先写入的非NULL值。</p> <p>返回结果数据类型：同应用的字段。</p> <p>应用字段：所有字段。</p> <p>说明：</p> <p>1）如果要返回各个列的首个（时间戳最小）非NULL值，可以使用FIRST(*)；</p> <ol start="2"><li><p>如果结果集中的某列全部为NULL值，则该列的返回结果也是NULL；</p></li> <li><p>如果结果集中所有列全部为NULL值，则不返回结果。</p></li></ol> <p>示例：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT FIRST(*) FROM meters;
        first(ts)        |    first(current)    | first(voltage) |     first(phase)     |
=========================================================================================
2018-10-03 14:38:04.000 |             10.20000 |            220 |              0.23000 |
Query OK, 1 row(s) in set (0.004767s)

taos&gt; SELECT FIRST(current) FROM d1002;
    first(current)    |
=======================
            10.20000 |
Query OK, 1 row(s) in set (0.001023s)
</code></pre></div></li> <li><p><strong>LAST</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT LAST(field_name) FROM { tb_name | stb_name } [WHERE clause];
</code></pre></div><p>功能说明：统计表/超级表中某列的值最后写入的非NULL值。</p> <p>返回结果数据类型：同应用的字段。</p> <p>应用字段：所有字段。</p> <p>说明：</p> <p>1）如果要返回各个列的最后（时间戳最大）一个非NULL值，可以使用LAST(*)；</p> <p>2）如果结果集中的某列全部为NULL值，则该列的返回结果也是NULL；如果结果集中所有列全部为NULL值，则不返回结果。</p> <p>示例：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT LAST(*) FROM meters;
        last(ts)         |    last(current)     | last(voltage) |     last(phase)      |
========================================================================================
2018-10-03 14:38:16.800 |             12.30000 |           221 |              0.31000 |
Query OK, 1 row(s) in set (0.001452s)

taos&gt; SELECT LAST(current) FROM d1002;
    last(current)     |
=======================
            10.30000 |
Query OK, 1 row(s) in set (0.000843s)
</code></pre></div></li> <li><p><strong>TOP</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT TOP(field_name, K) FROM { tb_name | stb_name } [WHERE clause];
</code></pre></div><p>功能说明： 统计表/超级表中某列的值最大<em>k</em>个非NULL值。若多于k个列值并列最大，则返回时间戳小的。</p> <p>返回结果数据类型：同应用的字段。</p> <p>应用字段：不能应用在timestamp、binary、nchar、bool类型字段。</p> <p>说明：</p> <p>1）<em>k</em>值取值范围1≤<em>k</em>≤100；</p> <p>2）系统同时返回该记录关联的时间戳列。</p> <p>示例：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT TOP(current, 3) FROM meters;
        ts            |   top(current, 3)    |
=================================================
2018-10-03 14:38:15.000 |             12.60000 |
2018-10-03 14:38:16.600 |             13.40000 |
2018-10-03 14:38:16.800 |             12.30000 |
Query OK, 3 row(s) in set (0.001548s)

taos&gt; SELECT TOP(current, 2) FROM d1001;
        ts            |   top(current, 2)    |
=================================================
2018-10-03 14:38:15.000 |             12.60000 |
2018-10-03 14:38:16.800 |             12.30000 |
Query OK, 2 row(s) in set (0.000810s)
</code></pre></div></li> <li><p><strong>BOTTOM</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT BOTTOM(field_name, K) FROM { tb_name | stb_name } [WHERE clause];
</code></pre></div><p>功能说明：统计表/超级表中某列的值最小<em>k</em>个非NULL值。若多于k个列值并列最小，则返回时间戳小的。</p> <p>返回结果数据类型：同应用的字段。</p> <p>应用字段：不能应用在timestamp、binary、nchar、bool类型字段。</p> <p>说明：</p> <p>1）<em>k</em>值取值范围1≤<em>k</em>≤100；</p> <p>2）系统同时返回该记录关联的时间戳列。</p> <p>示例：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT BOTTOM(voltage, 2) FROM meters;
        ts            | bottom(voltage, 2) |
===============================================
2018-10-03 14:38:15.000 |                218 |
2018-10-03 14:38:16.650 |                218 |
Query OK, 2 row(s) in set (0.001332s)

taos&gt; SELECT BOTTOM(current, 2) FROM d1001;
        ts            |  bottom(current, 2)  |
=================================================
2018-10-03 14:38:05.000 |             10.30000 |
2018-10-03 14:38:16.800 |             12.30000 |
Query OK, 2 row(s) in set (0.000793s)
</code></pre></div></li> <li><p><strong>PERCENTILE</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT PERCENTILE(field_name, P) FROM { tb_name } [WHERE clause];
</code></pre></div><p>功能说明：统计表中某列的值百分比分位数。</p> <p>返回结果数据类型： 双精度浮点数Double。</p> <p>应用字段：不能应用在timestamp、binary、nchar、bool类型字段。</p> <p>说明：<em>P</em>值取值范围0≤<em>P</em>≤100，为0的时候等同于MIN，为100的时候等同于MAX。</p> <p>示例：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT PERCENTILE(current, 20) FROM d1001;
percentile(current, 20)  |
============================
            11.100000191 |
Query OK, 1 row(s) in set (0.000787s)
</code></pre></div></li> <li><p><strong>APERCENTILE</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT APERCENTILE(field_name, P) FROM { tb_name | stb_name } [WHERE clause];
</code></pre></div><p>功能说明：统计表中某列的值百分比分位数，与PERCENTILE函数相似，但是返回近似结果。</p> <p>返回结果数据类型： 双精度浮点数Double。</p> <p>应用字段：不能应用在timestamp、binary、nchar、bool类型字段。</p> <p>说明：<em>P</em>值取值范围0≤<em>P</em>≤100，为0的时候等同于MIN，为100的时候等同于MAX。推荐使用<code>APERCENTILE</code>函数，该函数性能远胜于<code>PERCENTILE</code>函数</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT APERCENTILE(current, 20) FROM d1001;
apercentile(current, 20)  |
============================
            10.300000191 |
Query OK, 1 row(s) in set (0.000645s)
</code></pre></div></li> <li><p><strong>LAST_ROW</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT LAST_ROW(field_name) FROM { tb_name | stb_name };
</code></pre></div><p>功能说明：返回表（超级表）的最后一条记录。</p> <p>返回结果数据类型：同应用的字段。</p> <p>应用字段：所有字段。</p> <p>说明：与last函数不同，last_row不支持时间范围限制，强制返回最后一条记录。</p> <p>示例：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT LAST_ROW(current) FROM meters;
last_row(current)   |
=======================
            12.30000 |
Query OK, 1 row(s) in set (0.001238s)

taos&gt; SELECT LAST_ROW(current) FROM d1002;
last_row(current)   |
=======================
            10.30000 |
Query OK, 1 row(s) in set (0.001042s)
</code></pre></div></li></ul> <h3 id="计算函数"><a href="#计算函数" class="header-anchor">#</a> 计算函数</h3> <ul><li><p><strong>DIFF</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT DIFF(field_name) FROM tb_name [WHERE clause];
</code></pre></div><p>功能说明：统计表中某列的值与前一行对应值的差。</p> <p>返回结果数据类型： 同应用字段。</p> <p>应用字段：不能应用在timestamp、binary、nchar、bool类型字段。</p> <p>说明：输出结果行数是范围内总行数减一，第一行没有结果输出。</p> <p>示例：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT DIFF(current) FROM d1001;
        ts            |    diff(current)     |
=================================================
2018-10-03 14:38:15.000 |              2.30000 |
2018-10-03 14:38:16.800 |             -0.30000 |
Query OK, 2 row(s) in set (0.001162s)
</code></pre></div></li> <li><p><strong>SPREAD</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT SPREAD(field_name) FROM { tb_name | stb_name } [WHERE clause];
</code></pre></div><p>功能说明：统计表/超级表中某列的最大值和最小值之差。</p> <p>返回结果数据类型： 双精度浮点数。</p> <p>应用字段：不能应用在binary、nchar、bool类型字段。</p> <p>说明：可用于TIMESTAMP字段，此时表示记录的时间覆盖范围。</p> <p>示例：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT SPREAD(voltage) FROM meters;
    spread(voltage)      |
============================
            5.000000000 |
Query OK, 1 row(s) in set (0.001792s)

taos&gt; SELECT SPREAD(voltage) FROM d1001;
    spread(voltage)      |
============================
            3.000000000 |
Query OK, 1 row(s) in set (0.000836s)
</code></pre></div></li> <li><p><strong>四则运算</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT field_name [+|-|*|/|%][Value|field_name] FROM { tb_name | stb_name }  [WHERE clause];
</code></pre></div><p>功能说明：统计表/超级表中某列或多列间的值加、减、乘、除、取余计算结果。</p> <p>返回结果数据类型：双精度浮点数。</p> <p>应用字段：不能应用在timestamp、binary、nchar、bool类型字段。</p> <p>说明：</p> <p>1）支持两列或多列之间进行计算，可使用括号控制计算优先级；</p> <p>2）NULL字段不参与计算，如果参与计算的某行中包含NULL，该行的计算结果为NULL。</p> <div class="language-mysql extra-class"><pre class="language-text"><code>taos&gt; SELECT current + voltage * phase FROM d1001;
(current+(voltage*phase)) |
============================
            78.190000713 |
            84.540003240 |
            80.810000718 |
Query OK, 3 row(s) in set (0.001046s)
</code></pre></div></li></ul> <h2 id="时间维度聚合"><a href="#时间维度聚合" class="header-anchor">#</a> <a id="aggregation" class="anchor"></a>时间维度聚合</h2> <p>TDengine支持按时间段进行聚合，可以将表中数据按照时间段进行切割后聚合生成结果，比如温度传感器每秒采集一次数据，但需查询每隔10分钟的温度平均值。这个聚合适合于降维(down sample)操作, 语法如下：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT function_list FROM tb_name
  [WHERE where_condition]
  INTERVAL (interval [, offset])
  [FILL ({NONE | VALUE | PREV | NULL | LINEAR})]

SELECT function_list FROM stb_name
  [WHERE where_condition]
  INTERVAL (interval [, offset])
  [FILL ({ VALUE | PREV | NULL | LINEAR})]
  [GROUP BY tags]
</code></pre></div><ul><li>聚合时间段的长度由关键词INTERVAL指定，最短时间间隔10毫秒（10a），并且支持偏移（偏移必须小于间隔）。聚合查询中，能够同时执行的聚合和选择函数仅限于单个输出的函数：count、avg、sum 、stddev、leastsquares、percentile、min、max、first、last，不能使用具有多行输出结果的函数（例如：top、bottom、diff以及四则运算）。</li> <li>WHERE语句可以指定查询的起止时间和其他过滤条件</li> <li>FILL语句指定某一时间区间数据缺失的情况下的填充模式。填充模式包括以下几种：
<ul><li>不进行填充：NONE(默认填充模式)。</li> <li>VALUE填充：固定值填充，此时需要指定填充的数值。例如：fill(value, 1.23)。</li> <li>NULL填充：使用NULL填充数据。例如：fill(null)。</li> <li>PREV填充：使用前一个非NULL值填充数据。例如：fill(prev)。</li></ul></li></ul> <p>说明：</p> <ol><li>使用FILL语句的时候可能生成大量的填充输出，务必指定查询的时间区间。针对每次查询，系统可返回不超过1千万条具有插值的结果。</li> <li>在时间维度聚合中，返回的结果中时间序列严格单调递增。</li> <li>如果查询对象是超级表，则聚合函数会作用于该超级表下满足值过滤条件的所有表的数据。如果查询中没有使用group by语句，则返回的结果按照时间序列严格单调递增；如果查询中使用了group by语句分组，则返回结果中每个group内不按照时间序列严格单调递增。</li></ol> <p><strong>示例:</strong> 智能电表的建表语句如下：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>CREATE TABLE meters (ts TIMESTAMP, current FLOAT, voltage INT, phase FLOAT) TAGS (location BINARY(64), groupId INT);
</code></pre></div><p>针对智能电表采集的数据，以10分钟为一个阶段，计算过去24小时的电流数据的平均值、最大值、电流的中位数、以及随着时间变化的电流走势拟合直线。如果没有计算值，用前一个非NULL值填充。
使用的查询语句如下：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT AVG(current), MAX(current), LEASTSQUARES(current, start_val, step_val), PERCENTILE(current, 50) FROM meters
  WHERE ts&gt;=NOW-1d
  INTERVAL(10m)
  FILL(PREV);
</code></pre></div><h2 id="taos-sql-边界限制"><a href="#taos-sql-边界限制" class="header-anchor">#</a> <a id="limitation" class="anchor"></a>TAOS SQL 边界限制</h2> <ul><li>数据库名最大长度为32</li> <li>表名最大长度为192，每行数据最大长度16k个字符</li> <li>列名最大长度为64，最多允许1024列，最少需要2列，第一列必须是时间戳</li> <li>标签最多允许128个，可以1个，标签总长度不超过16k个字符</li> <li>SQL语句最大长度65480个字符，但可通过系统配置参数maxSQLLength修改，最长可配置为1M</li> <li>库的数目，超级表的数目、表的数目，系统不做限制，仅受系统资源限制</li></ul> <h2 id="taos-sql其他约定"><a href="#taos-sql其他约定" class="header-anchor">#</a> TAOS SQL其他约定</h2> <p><strong>group by的限制</strong></p> <p>TAOS  SQL支持对标签、tbname进行group by操作，也支持普通列进行group by，前提是：仅限一列且该列的唯一值小于10万个。</p> <p><strong>join操作的限制</strong></p> <p>TAOS SQL支持表之间按主键时间戳来join两张表的列，暂不支持两个表之间聚合后的四则运算。</p> <p><strong>is not null与不为空的表达式适用范围</strong></p> <p>is not null支持所有类型的列。不为空的表达式为 &lt;&gt;&quot;&quot;，仅对非数值类型的列适用。</p></div> <!----></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/17/2021, 5:05:48 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/zh/dataanalysis/tdengine/11.administrator/docs.html" class="prev">TDengine的运营与维护</a></span> <span class="next"><a href="/zh/dataanalysis/tdengine/12.taos-sql/01.error-code/docs.html">错误码</a>
      →
    </span></p></div> </main></div><div class="global-ui"><div></div><div class="add-this"></div><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button title="Close (Esc)" class="pswp__button pswp__button--close"></button> <button title="Share" class="pswp__button pswp__button--share"></button> <button title="Toggle fullscreen" class="pswp__button pswp__button--fs"></button> <button title="Zoom in/out" class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button title="Previous (arrow left)" class="pswp__button pswp__button--arrow--left"></button> <button title="Next (arrow right)" class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/assets/js/app.b843b8a3.js" defer></script><script src="/assets/js/6.5fcf748f.js" defer></script><script src="/assets/js/5.ef440211.js" defer></script><script src="/assets/js/239.ee8d0d54.js" defer></script>
  </body>
</html>
