(window.webpackJsonp=window.webpackJsonp||[]).push([[117],{501:function(e,a,s){"use strict";s.r(a);var t=s(42),r=Object(t.a)({},(function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[e._v("#")]),e._v(" 安装")]),e._v(" "),s("p",[e._v("EMQ X 目前支持的操作系统:")]),e._v(" "),s("ul",[s("li",[e._v("CentOS 6")]),e._v(" "),s("li",[e._v("CentOS 7")]),e._v(" "),s("li",[e._v("CentOS 8")]),e._v(" "),s("li",[e._v("OpenSUSE tumbleweed")]),e._v(" "),s("li",[e._v("Debian 9")]),e._v(" "),s("li",[e._v("Debian 10")]),e._v(" "),s("li",[e._v("Ubuntu 16.04")]),e._v(" "),s("li",[e._v("Ubuntu 18.04")]),e._v(" "),s("li",[e._v("Ubuntu 20.04")]),e._v(" "),s("li",[e._v("macOS 10.13")]),e._v(" "),s("li",[e._v("macOS 10.14")]),e._v(" "),s("li",[e._v("macOS 10.15")]),e._v(" "),s("li",[e._v("Windows Server 2019")])]),e._v(" "),s("div",{staticClass:"custom-block danger"},[s("p",{staticClass:"custom-block-title"},[e._v("警告")]),e._v(" "),s("p",[e._v("产品部署建议 Linux 服务器，不推荐 Windows 服务器。")])]),e._v(" "),s("h2",{attrs:{id:"shell-脚本一键安装-linux"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#shell-脚本一键安装-linux"}},[e._v("#")]),e._v(" Shell 脚本一键安装 (Linux)")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" https://repos.emqx.io/install_emqx.sh "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("bash")]),e._v("\n")])])]),s("h2",{attrs:{id:"包管理器安装-linux"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#包管理器安装-linux"}},[e._v("#")]),e._v(" 包管理器安装 (Linux)")]),e._v(" "),s("h3",{attrs:{id:"centos"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#centos"}},[e._v("#")]),e._v(" CentOS")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("安装所需要的依赖包")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ sudo yum install -y yum-utils device-mapper-persistent-data lvm2\n")])])])]),e._v(" "),s("li",[s("p",[e._v("使用以下命令设置稳定存储库，以 CentOS 7 为例")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ sudo yum-config-manager --add-repo https://repos.emqx.io/emqx-ce/redhat/centos/7/emqx-ce.repo\n")])])])]),e._v(" "),s("li",[s("p",[e._v("安装最新版本的 EMQ X Broker")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ sudo yum install emqx\n")])])]),s("p",[e._v("如果提示接受 GPG 密钥，请确认密钥符合 fc84 1ba6 3775 5ca8 487b 1e3c c0b4 0946 3e64 0d53，并接受该指纹。")])]),e._v(" "),s("li",[s("p",[e._v("安装特定版本的 EMQ X Broker")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("查询可用版本")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ yum list emqx --showduplicates | sort -r\n\nemqx.x86_64                     4.0.0-1.el7                        emqx-stable\nemqx.x86_64                     3.0.1-1.el7                        emqx-stable\nemqx.x86_64                     3.0.0-1.el7                        emqx-stable\n")])])])]),e._v(" "),s("li",[s("p",[e._v("根据第二列中的版本字符串安装特定版本，例如 4.0.0")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ sudo yum install emqx-4.0.0\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("启动 EMQ X Broker")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("直接启动")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ emqx start\nemqx 4.0.0 is started successfully!\n\n$ emqx_ctl status\nNode 'emqx@127.0.0.1' is started\nemqx v4.0.0 is running\n")])])])]),e._v(" "),s("li",[s("p",[e._v("systemctl 启动")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ sudo systemctl start emqx\n")])])])]),e._v(" "),s("li",[s("p",[e._v("service 启动")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ sudo service emqx start\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("停止 EMQ X Broker")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ emqx stop\nok\n")])])])]),e._v(" "),s("li",[s("p",[e._v("卸载 EMQ X Broker")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ sudo yum remove emqx\n")])])])])]),e._v(" "),s("h3",{attrs:{id:"ubuntu、debian"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu、debian"}},[e._v("#")]),e._v(" Ubuntu、Debian")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("安装所需要的依赖包")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ sudo apt update && sudo apt install -y \\\n    apt-transport-https \\\n    ca-certificates \\\n    curl \\\n    gnupg-agent \\\n    software-properties-common\n")])])])]),e._v(" "),s("li",[s("p",[e._v("添加 EMQ X 的官方 GPG 密钥")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ curl -fsSL https://repos.emqx.io/gpg.pub | sudo apt-key add -\n")])])]),s("p",[e._v("验证密钥")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ sudo apt-key fingerprint 3E640D53\n\npub   rsa2048 2019-04-10 [SC]\n    FC84 1BA6 3775 5CA8 487B  1E3C C0B4 0946 3E64 0D53\nuid           [ unknown] emqx team <support@emqx.io>\n")])])])]),e._v(" "),s("li",[s("p",[e._v("使用以下命令设置 stable 存储库。 如果要添加 unstable 存储库，请在以下命令中的单词 stable 之后添加单词\nunstable。")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('$ sudo add-apt-repository \\\n    "deb [arch=amd64] https://repos.emqx.io/emqx-ce/deb/ubuntu/ \\\n    ./$(lsb_release -cs) \\\n    stable"\n')])])]),s("p",[e._v("lsb_release -cs 子命令返回发行版的名称，例如 xenial。 有时，在像 Linux Mint\n这样的发行版中，您可能需要将 $(lsb_release -cs) 更改为您的父发行版。\n例如，如果您使用的是 Linux Mint Tessa，则可以使用 bionic。 EMQ X Broker\n不对未经测试和不受支持的发行版提供任何保证。")])]),e._v(" "),s("li",[s("p",[e._v("更新 apt 包索引")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ sudo apt update\n")])])])]),e._v(" "),s("li",[s("p",[e._v("安装最新版本的 EMQ X Broker")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ sudo apt install emqx\n")])])]),s("p",[e._v("在启用了多个 EMQ X 仓库的情况下，如果 apt install 和 apt update\n命令没有指定版本号，那么会自动安装最新版的 EMQ\nX Broker。这对于有稳定性需求的用户来说是一个问题。")])]),e._v(" "),s("li",[s("p",[e._v("安装特定版本的 EMQ X Broker")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("查询可用版本")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ sudo apt-cache madison emqx\n\nemqx |      4.0.0 | https://repos.emqx.io/emqx-ce/deb/ubuntu bionic/stable amd64 Packages\nemqx |      3.0.1 | https://repos.emqx.io/emqx-ce/deb/ubuntu bionic/stable amd64 Packages\nemqx |      3.0.0 | https://repos.emqx.io/emqx-ce/deb/ubuntu bionic/stable amd64 Packages\n")])])])]),e._v(" "),s("li",[s("p",[e._v("使用第二列中的版本字符串安装特定版本，例如 4.0.0")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ sudo apt install emqx=4.0.0\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("启动 EMQ X Broker")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("直接启动")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ emqx start\nemqx 4.0.0 is started successfully!\n\n$ emqx_ctl status\nNode 'emqx@127.0.0.1' is started\nemqx v4.0.0 is running\n")])])])]),e._v(" "),s("li",[s("p",[e._v("systemctl 启动")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ sudo systemctl start emqx\n")])])])]),e._v(" "),s("li",[s("p",[e._v("service 启动")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ sudo service emqx start\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("停止 EMQ X Broker")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ emqx stop\nok\n")])])])]),e._v(" "),s("li",[s("p",[e._v("卸载 EMQ X Broker")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ sudo apt remove emqx\n")])])])])]),e._v(" "),s("h3",{attrs:{id:"opensuse"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#opensuse"}},[e._v("#")]),e._v(" OpenSUSE")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("下载 GPG 公钥并导入。")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ curl -L -o /tmp/gpg.pub https://repos.emqx.io/gpg.pub\n$ sudo rpmkeys --import /tmp/gpg.pub\n")])])])]),e._v(" "),s("li",[s("p",[e._v("添加储存库地址")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ sudo zypper ar -f -c https://repos.emqx.io/emqx-ce/redhat/opensuse/leap/stable emqx\n")])])])]),e._v(" "),s("li",[s("p",[e._v("安装最新版本的 EMQ X Broker")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ sudo zypper in emqx\n")])])])]),e._v(" "),s("li",[s("p",[e._v("安装特定版本的 EMQ X Broker")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("查询可用版本")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ sudo zypper pa emqx\n\nLoading repository data...\nReading installed packages...\nS | Repository | Name | Version  | Arch\n--+------------+------+----------+-------\n  | emqx       | emqx | 4.0.0-1  | x86_64\n  | emqx       | emqx | 3.0.1-1  | x86_64\n  | emqx       | emqx | 3.0.0-1  | x86_64\n")])])])]),e._v(" "),s("li",[s("p",[e._v("使用 Version 安装特定版本，例如 4.0.0")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ sudo zypper in emqx-4.0.0\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("启动 EMQ X Broker")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("直接启动")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ emqx start\nemqx 4.0.0 is started successfully!\n\n$ emqx_ctl status\nNode 'emqx@127.0.0.1' is started\nemqx v4.0.0 is running\n")])])])]),e._v(" "),s("li",[s("p",[e._v("systemctl 启动")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ sudo systemctl start emqx\n")])])])]),e._v(" "),s("li",[s("p",[e._v("service 启动")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ sudo service emqx start\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("停止 EMQ X Broker")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ emqx stop\nok\n")])])])]),e._v(" "),s("li",[s("p",[e._v("卸载 EMQ X Broker")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ sudo zypper rm emqx\n")])])])])]),e._v(" "),s("h2",{attrs:{id:"二进制包安装-linux"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二进制包安装-linux"}},[e._v("#")]),e._v(" 二进制包安装 (Linux)")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("通过 "),s("a",{attrs:{href:"https://www.emqx.io/downloads/broker?osType=Linux",target:"_blank",rel:"noopener noreferrer"}},[e._v("emqx.io"),s("OutboundLink")],1),e._v(" 或 "),s("a",{attrs:{href:"https://github.com/emqx/emqx/releases",target:"_blank",rel:"noopener noreferrer"}},[e._v("Github"),s("OutboundLink")],1),e._v(" 选择系统发行版，然后下载要安装的 EMQ X 版本的二进制包。")])]),e._v(" "),s("li",[s("p",[e._v("安装 EMQ X Broker，将下面的路径更改为您下载 EMQ X 软件包的路径。")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("RPM 包:")]),e._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[e._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("rpm")]),e._v(" -ivh emqx-cenots7-v4.0.0.x86_64.rpm\n")])])])]),e._v(" "),s("li",[s("p",[e._v("DEB 包:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ sudo dpkg -i emqx-ubuntu18.04-v4.0.0_amd64.deb\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("启动 EMQ X Broker")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("直接启动")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ emqx start\nemqx 4.0.0 is started successfully!\n$ emqx_ctl status\nNode 'emqx@127.0.0.1' is started\nemqx v4.0.0 is running\n")])])])]),e._v(" "),s("li",[s("p",[e._v("systemctl 启动")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ sudo systemctl start emqx\n")])])])]),e._v(" "),s("li",[s("p",[e._v("service 启动")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ sudo service emqx start\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("停止 EMQ X Broker")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ emqx stop\nok\n")])])])]),e._v(" "),s("li",[s("p",[e._v("卸载 EMQ X Broker")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("DEB 包:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ dpkg -r emqx\n")])])]),s("p",[e._v("或")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ dpkg -P emqx\n")])])])]),e._v(" "),s("li",[s("p",[e._v("RPM 包:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ rpm -e emqx\n")])])])])])])]),e._v(" "),s("h2",{attrs:{id:"zip-压缩包安装-linux、maxos、windows"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zip-压缩包安装-linux、maxos、windows"}},[e._v("#")]),e._v(" ZIP 压缩包安装 (Linux、MaxOS、Windows)")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("通过 "),s("a",{attrs:{href:"https://www.emqx.io/downloads/broker?osType=Linux",target:"_blank",rel:"noopener noreferrer"}},[e._v("emqx.io"),s("OutboundLink")],1),e._v(" 或 "),s("a",{attrs:{href:"https://github.com/emqx/emqx/releases",target:"_blank",rel:"noopener noreferrer"}},[e._v("Github"),s("OutboundLink")],1),e._v(" 下载要安装的 EMQ X 版本的 zip 包。")])]),e._v(" "),s("li",[s("p",[e._v("解压程序包")]),e._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[e._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("unzip")]),e._v(" emqx-ubuntu18.04-v4.0.0.zip\n")])])])]),e._v(" "),s("li",[s("p",[e._v("启动 EMQ X Broker")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ ./bin/emqx start\nemqx 4.0.0 is started successfully!\n\n$ ./bin/emqx_ctl status\nNode 'emqx@127.0.0.1' is started\nemqx v4.0.0 is running\n")])])])]),e._v(" "),s("li",[s("p",[e._v("停止 EMQ X Broker")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ ./bin/emqx stop\nok\n")])])])]),e._v(" "),s("li",[s("p",[e._v("卸载 EMQ X Broker")]),e._v(" "),s("p",[e._v("直接删除 EMQ X 目录即可")])])]),e._v(" "),s("h2",{attrs:{id:"通过-homebrew-安装-macos"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过-homebrew-安装-macos"}},[e._v("#")]),e._v(" 通过 Homebrew 安装 (MacOS)")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("添加 EMQ X 的 tap")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ brew tap emqx/emqx\n")])])])]),e._v(" "),s("li",[s("p",[e._v("安装 EMQ X Broker")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ brew install emqx\n")])])])]),e._v(" "),s("li",[s("p",[e._v("启动 EMQ X Broker")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ emqx start\nemqx 4.0.0 is started successfully!\n\n$ emqx_ctl status\nNode 'emqx@127.0.0.1' is started\nemqx v4.0.0 is running\n")])])])]),e._v(" "),s("li",[s("p",[e._v("停止 EMQ X Broker")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ emqx stop\nok\n")])])])]),e._v(" "),s("li",[s("p",[e._v("卸载 EMQ X Broker")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ brew uninstall emqx\n")])])])])]),e._v(" "),s("h2",{attrs:{id:"通过-docker-运行-包含简单的-docker-compose-集群"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过-docker-运行-包含简单的-docker-compose-集群"}},[e._v("#")]),e._v(" 通过 Docker 运行 (包含简单的 docker-compose 集群)")]),e._v(" "),s("h3",{attrs:{id:"运行单个容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#运行单个容器"}},[e._v("#")]),e._v(" 运行单个容器")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("获取 docker 镜像")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("通过 "),s("a",{attrs:{href:"https://hub.docker.com/r/emqx/emqx",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker Hub"),s("OutboundLink")],1),e._v(" 获取")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ docker pull emqx/emqx:v4.0.0\n")])])])]),e._v(" "),s("li",[s("p",[e._v("通过 "),s("a",{attrs:{href:"https://www.emqx.io/downloads/broker?osType=Linux",target:"_blank",rel:"noopener noreferrer"}},[e._v("emqx.io"),s("OutboundLink")],1),e._v(" 或 "),s("a",{attrs:{href:"https://github.com/emqx/emqx/releases",target:"_blank",rel:"noopener noreferrer"}},[e._v("Github"),s("OutboundLink")],1),e._v(" 下载 Docker 镜像，并手动加载")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ wget -O emqx-docker.zip https://www.emqx.io/downloads/broker/v4.0.0/emqx-docker-v4.0.0-alpine3.10-amd64.zip\n$ unzip emqx-docker.zip\n$ docker load < emqx-docker-v4.0.0\n")])])])])])]),e._v(" "),s("li",[s("p",[e._v("启动 docker 容器")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ docker run -d --name emqx -p 1883:1883 -p 8083:8083 -p 8883:8883 -p 8084:8084 -p 18083:18083 emqx/emqx:v4.0.0\n")])])])])]),e._v(" "),s("h3",{attrs:{id:"使用-docker-compose-创建简单的-static-集群"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-docker-compose-创建简单的-static-集群"}},[e._v("#")]),e._v(" 使用 docker-compose 创建简单的 static 集群")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("创建 "),s("code",[e._v("docker-compose.yaml")]),e._v(" 文件")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('version: \'3\'\n\nservices:\n  emqx1:\n    image: emqx/emqx:v4.0.0\n    environment:\n    - "EMQX_NAME=emqx"\n    - "EMQX_HOST=node1.emqx.io"\n    - "EMQX_CLUSTER__DISCOVERY=static"\n    - "EMQX_CLUSTER__STATIC__SEEDS=emqx@node1.emqx.io, emqx@node2.emqx.io"\n    healthcheck:\n      test: ["CMD", "/opt/emqx/bin/emqx_ctl", "status"]\n      interval: 5s\n      timeout: 25s\n      retries: 5\n    networks:\n      emqx-bridge:\n        aliases:\n        - node1.emqx.io\n  \n  emqx2:\n    image: emqx/emqx:v4.0.0\n    environment:\n    - "EMQX_NAME=emqx"\n    - "EMQX_HOST=node2.emqx.io"\n    - "EMQX_CLUSTER__DISCOVERY=static"\n    - "EMQX_CLUSTER__STATIC__SEEDS=emqx@node1.emqx.io, emqx@node2.emqx.io"\n    healthcheck:\n      test: ["CMD", "/opt/emqx/bin/emqx_ctl", "status"]\n      interval: 5s\n      timeout: 25s\n      retries: 5\n    networks:\n      emqx-bridge:\n        aliases:\n        - node2.emqx.io\n\nnetworks:\n  emqx-bridge:\n    driver: bridge\n\n')])])])]),e._v(" "),s("li",[s("p",[e._v("启动 docker-compose 集群")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ docker-compose -p my_emqx up -d\n")])])])]),e._v(" "),s("li",[s("p",[e._v("查看集群")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ docker exec -it my_emqx_emqx1_1 sh -c \"emqx_ctl cluster status\"\nCluster status: #{running_nodes => ['emqx@node1.emqx.io','emqx@node2.emqx.io'],\n                  stopped_nodes => []}\n")])])])])]),e._v(" "),s("p",[e._v("更多关于 EMQ X Docker 的信息请查看 "),s("a",{attrs:{href:"https://hub.docker.com/r/emqx/emqx",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker Hub"),s("OutboundLink")],1),e._v(" 或 "),s("a",{attrs:{href:"https://github.com/emqx/emqx-rel/tree/master/deploy/docker",target:"_blank",rel:"noopener noreferrer"}},[e._v("Github"),s("OutboundLink")],1)]),e._v(" "),s("h2",{attrs:{id:"通过-helkm-安装并集群-k8s、k3s"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过-helkm-安装并集群-k8s、k3s"}},[e._v("#")]),e._v(" 通过 Helkm 安装并集群 (K8S、K3S)")]),e._v(" "),s("ol",[s("li",[e._v("添加 helm 仓库")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ helm repo add emqx https://repos.emqx.io/charts\n$ helm repo update\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[e._v("查询 EMQ X Broker")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("helm search repo emqx\nNAME         CHART VERSION APP VERSION DESCRIPTION\nemqx/emqx    v4.0.0        v4.0.0      A Helm chart for EMQ X\nemqx/emqx-ee v4.0.0        v4.0.0      A Helm chart for EMQ X\nemqx/kuiper  0.1.1         0.1.1       A lightweight IoT edge analytic software\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[e._v("启动 EMQ X 集群")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ helm install my-emqx emqx/emqx\n")])])]),s("ol",{attrs:{start:"4"}},[s("li",[e._v("查看 EMQ X 集群情况")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ kubectl get pods\nNAME       READY  STATUS             RESTARTS  AGE\nmy-emqx-0  1/1     Running   0          56s\nmy-emqx-1  1/1     Running   0          40s\nmy-emqx-2  1/1     Running   0          21s\n\n$ kubectl exec -it my-emqx-0 -- emqx_ctl cluster status\nCluster status: #{running_nodes =>\n                      ['my-emqx@my-emqx-0.my-emqx-headless.default.svc.cluster.local',\n                       'my-emqx@my-emqx-1.my-emqx-headless.default.svc.cluster.local',\n                       'my-emqx@my-emqx-2.my-emqx-headless.default.svc.cluster.local'],\n                  stopped_nodes => []}\n")])])]),s("h2",{attrs:{id:"源码编译安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#源码编译安装"}},[e._v("#")]),e._v(" 源码编译安装")]),e._v(" "),s("ol",[s("li",[e._v("获取源码")])]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" clone -b v4.0.0 https://github.com/emqx/emqx-rel.git\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[e._v("设置环境变量")])]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("export")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("EMQX_DEPS_DEFAULT_VSN")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("v4.0.0\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[e._v("编译")])]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" emqx-rel "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("&&")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("make")]),e._v("\n")])])]),s("ol",{attrs:{start:"4"}},[s("li",[e._v("启动 EMQ X Broker")])]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" _build/emqx-rel/_rel/emqx\n\n$ ./bin/emqx start\nemqx "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("4.0")]),e._v(".0 is started successfully"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("!")]),e._v("\n\n$ ./bin/emqx_ctl status\nNode "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'emqx@127.0.0.1'")]),e._v(" is started\nemqx v4.0.0 is running\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);