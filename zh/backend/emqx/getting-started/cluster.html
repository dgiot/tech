<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>分布式集群 | 数蛙技术团队</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    <meta name="description" content="数蛙科技是一家致力于提供物联网垂直领域应用使能平台及解决方案的创新型公司。">
    <meta name="referrer" content="never">
    
    <link rel="preload" href="/assets/css/0.styles.bbccc6ad.css" as="style"><link rel="preload" href="/assets/js/app.0a7b53c3.js" as="script"><link rel="preload" href="/assets/js/6.c9e340e6.js" as="script"><link rel="preload" href="/assets/js/5.1f4aba7f.js" as="script"><link rel="preload" href="/assets/js/118.21aa0b65.js" as="script"><link rel="prefetch" href="/assets/js/10.5e2a446e.js"><link rel="prefetch" href="/assets/js/100.876a801d.js"><link rel="prefetch" href="/assets/js/101.3af714e9.js"><link rel="prefetch" href="/assets/js/102.464e0fb4.js"><link rel="prefetch" href="/assets/js/103.16a8ffe7.js"><link rel="prefetch" href="/assets/js/104.d5fec937.js"><link rel="prefetch" href="/assets/js/105.e026c56e.js"><link rel="prefetch" href="/assets/js/106.e3da14e3.js"><link rel="prefetch" href="/assets/js/107.53b23bcc.js"><link rel="prefetch" href="/assets/js/108.a8694ee4.js"><link rel="prefetch" href="/assets/js/109.caea2f90.js"><link rel="prefetch" href="/assets/js/11.1b4e5ac4.js"><link rel="prefetch" href="/assets/js/110.0f22bb85.js"><link rel="prefetch" href="/assets/js/111.00a81c8a.js"><link rel="prefetch" href="/assets/js/112.423c09c8.js"><link rel="prefetch" href="/assets/js/113.ad1c4fe4.js"><link rel="prefetch" href="/assets/js/114.a5a8c99c.js"><link rel="prefetch" href="/assets/js/115.04fa82f0.js"><link rel="prefetch" href="/assets/js/116.77205451.js"><link rel="prefetch" href="/assets/js/117.66bf9a34.js"><link rel="prefetch" href="/assets/js/119.bce48ac1.js"><link rel="prefetch" href="/assets/js/12.d6c55ff3.js"><link rel="prefetch" href="/assets/js/120.07bd7bbb.js"><link rel="prefetch" href="/assets/js/121.75b6a209.js"><link rel="prefetch" href="/assets/js/122.e1bb8b3d.js"><link rel="prefetch" href="/assets/js/123.094cade4.js"><link rel="prefetch" href="/assets/js/124.fe5336dc.js"><link rel="prefetch" href="/assets/js/125.d7f64cb3.js"><link rel="prefetch" href="/assets/js/126.de6adda7.js"><link rel="prefetch" href="/assets/js/127.264d2c28.js"><link rel="prefetch" href="/assets/js/128.2667924f.js"><link rel="prefetch" href="/assets/js/129.7248b627.js"><link rel="prefetch" href="/assets/js/13.721ad23d.js"><link rel="prefetch" href="/assets/js/130.8cf9c454.js"><link rel="prefetch" href="/assets/js/131.16566f1b.js"><link rel="prefetch" href="/assets/js/132.b2ddfde0.js"><link rel="prefetch" href="/assets/js/133.691f95dd.js"><link rel="prefetch" href="/assets/js/134.e01e9fd2.js"><link rel="prefetch" href="/assets/js/135.a4356011.js"><link rel="prefetch" href="/assets/js/136.9ee4f6f3.js"><link rel="prefetch" href="/assets/js/137.526c1d52.js"><link rel="prefetch" href="/assets/js/138.51eceba1.js"><link rel="prefetch" href="/assets/js/139.feeb4832.js"><link rel="prefetch" href="/assets/js/14.d0427821.js"><link rel="prefetch" href="/assets/js/140.5ea04046.js"><link rel="prefetch" href="/assets/js/141.3d0345dc.js"><link rel="prefetch" href="/assets/js/142.e4c92024.js"><link rel="prefetch" href="/assets/js/143.1a2771fd.js"><link rel="prefetch" href="/assets/js/144.38251559.js"><link rel="prefetch" href="/assets/js/145.d7d6c3aa.js"><link rel="prefetch" href="/assets/js/146.27fd8c1f.js"><link rel="prefetch" href="/assets/js/147.a648e020.js"><link rel="prefetch" href="/assets/js/148.c9205cb5.js"><link rel="prefetch" href="/assets/js/149.f4270566.js"><link rel="prefetch" href="/assets/js/15.4bbf15a6.js"><link rel="prefetch" href="/assets/js/150.11a0a163.js"><link rel="prefetch" href="/assets/js/151.a200938f.js"><link rel="prefetch" href="/assets/js/152.fd972b1b.js"><link rel="prefetch" href="/assets/js/153.cc6b9e3b.js"><link rel="prefetch" href="/assets/js/154.1417d6f7.js"><link rel="prefetch" href="/assets/js/155.7289dd96.js"><link rel="prefetch" href="/assets/js/156.0c85ac37.js"><link rel="prefetch" href="/assets/js/157.dc268475.js"><link rel="prefetch" href="/assets/js/158.927467b3.js"><link rel="prefetch" href="/assets/js/159.a1fbb301.js"><link rel="prefetch" href="/assets/js/16.aa486dd3.js"><link rel="prefetch" href="/assets/js/160.75f2a585.js"><link rel="prefetch" href="/assets/js/161.950dae13.js"><link rel="prefetch" href="/assets/js/162.c042b54b.js"><link rel="prefetch" href="/assets/js/163.d3fa2ae5.js"><link rel="prefetch" href="/assets/js/164.9d52005e.js"><link rel="prefetch" href="/assets/js/165.d7807a17.js"><link rel="prefetch" href="/assets/js/166.0f02d653.js"><link rel="prefetch" href="/assets/js/167.a07b346b.js"><link rel="prefetch" href="/assets/js/168.422ac913.js"><link rel="prefetch" href="/assets/js/169.82e7bf71.js"><link rel="prefetch" href="/assets/js/17.dd97b702.js"><link rel="prefetch" href="/assets/js/170.ae3f2372.js"><link rel="prefetch" href="/assets/js/171.eb6a1113.js"><link rel="prefetch" href="/assets/js/172.cc44f808.js"><link rel="prefetch" href="/assets/js/173.0937acf5.js"><link rel="prefetch" href="/assets/js/174.f14a4114.js"><link rel="prefetch" href="/assets/js/175.c0859dde.js"><link rel="prefetch" href="/assets/js/176.275b4c70.js"><link rel="prefetch" href="/assets/js/177.b4d174f3.js"><link rel="prefetch" href="/assets/js/178.b5ddaf79.js"><link rel="prefetch" href="/assets/js/179.0f6bcf63.js"><link rel="prefetch" href="/assets/js/18.9aca47cf.js"><link rel="prefetch" href="/assets/js/180.27b8e937.js"><link rel="prefetch" href="/assets/js/181.ee5ef28d.js"><link rel="prefetch" href="/assets/js/182.2a8adf24.js"><link rel="prefetch" href="/assets/js/183.86600113.js"><link rel="prefetch" href="/assets/js/184.25b9e70f.js"><link rel="prefetch" href="/assets/js/185.4388278d.js"><link rel="prefetch" href="/assets/js/186.e40cb73b.js"><link rel="prefetch" href="/assets/js/187.714bf7ae.js"><link rel="prefetch" href="/assets/js/188.9a791080.js"><link rel="prefetch" href="/assets/js/189.01da9bba.js"><link rel="prefetch" href="/assets/js/19.e195af0b.js"><link rel="prefetch" href="/assets/js/190.29c789ad.js"><link rel="prefetch" href="/assets/js/191.7201d4f9.js"><link rel="prefetch" href="/assets/js/192.fc8f6368.js"><link rel="prefetch" href="/assets/js/193.aea09e38.js"><link rel="prefetch" href="/assets/js/194.d09c9024.js"><link rel="prefetch" href="/assets/js/195.16834054.js"><link rel="prefetch" href="/assets/js/196.f5244e92.js"><link rel="prefetch" href="/assets/js/197.fc43d006.js"><link rel="prefetch" href="/assets/js/198.db79eb94.js"><link rel="prefetch" href="/assets/js/199.2790407b.js"><link rel="prefetch" href="/assets/js/20.dac0bac6.js"><link rel="prefetch" href="/assets/js/200.2b2601ff.js"><link rel="prefetch" href="/assets/js/201.391a0413.js"><link rel="prefetch" href="/assets/js/202.eaba16e6.js"><link rel="prefetch" href="/assets/js/203.61bc00ad.js"><link rel="prefetch" href="/assets/js/204.be876a06.js"><link rel="prefetch" href="/assets/js/205.04e64f4e.js"><link rel="prefetch" href="/assets/js/206.dfd2151e.js"><link rel="prefetch" href="/assets/js/207.d0cf47cd.js"><link rel="prefetch" href="/assets/js/208.a3904ff1.js"><link rel="prefetch" href="/assets/js/209.af1f8226.js"><link rel="prefetch" href="/assets/js/21.5fbf141c.js"><link rel="prefetch" href="/assets/js/210.f76f6d7e.js"><link rel="prefetch" href="/assets/js/211.17743954.js"><link rel="prefetch" href="/assets/js/212.f9d6e4fa.js"><link rel="prefetch" href="/assets/js/213.23a69c04.js"><link rel="prefetch" href="/assets/js/214.72e8b66e.js"><link rel="prefetch" href="/assets/js/215.41ea8b77.js"><link rel="prefetch" href="/assets/js/216.d09a29cf.js"><link rel="prefetch" href="/assets/js/217.0997e96d.js"><link rel="prefetch" href="/assets/js/218.51f340d3.js"><link rel="prefetch" href="/assets/js/219.ad5882f2.js"><link rel="prefetch" href="/assets/js/22.309f698c.js"><link rel="prefetch" href="/assets/js/220.4ce5707a.js"><link rel="prefetch" href="/assets/js/221.fa6f784c.js"><link rel="prefetch" href="/assets/js/222.ffa61594.js"><link rel="prefetch" href="/assets/js/223.14e06b67.js"><link rel="prefetch" href="/assets/js/224.dc66140a.js"><link rel="prefetch" href="/assets/js/225.08a9339f.js"><link rel="prefetch" href="/assets/js/226.8c99d401.js"><link rel="prefetch" href="/assets/js/227.744fb928.js"><link rel="prefetch" href="/assets/js/228.46afafeb.js"><link rel="prefetch" href="/assets/js/229.cc4ff64d.js"><link rel="prefetch" href="/assets/js/23.4401eb2a.js"><link rel="prefetch" href="/assets/js/230.5424bfbc.js"><link rel="prefetch" href="/assets/js/231.fc3e75a3.js"><link rel="prefetch" href="/assets/js/232.40e4e105.js"><link rel="prefetch" href="/assets/js/233.3c18dd4f.js"><link rel="prefetch" href="/assets/js/234.db422d99.js"><link rel="prefetch" href="/assets/js/235.22e86f27.js"><link rel="prefetch" href="/assets/js/236.9f562704.js"><link rel="prefetch" href="/assets/js/237.c2d9b4a9.js"><link rel="prefetch" href="/assets/js/238.9352e592.js"><link rel="prefetch" href="/assets/js/239.f21bfdb1.js"><link rel="prefetch" href="/assets/js/24.475899d3.js"><link rel="prefetch" href="/assets/js/240.9a18da6c.js"><link rel="prefetch" href="/assets/js/241.b54a2610.js"><link rel="prefetch" href="/assets/js/242.55273f4f.js"><link rel="prefetch" href="/assets/js/243.eebaf8e0.js"><link rel="prefetch" href="/assets/js/244.fe70e049.js"><link rel="prefetch" href="/assets/js/245.4a0d94ca.js"><link rel="prefetch" href="/assets/js/246.22e31d8d.js"><link rel="prefetch" href="/assets/js/247.96ba73a0.js"><link rel="prefetch" href="/assets/js/248.05cc54fc.js"><link rel="prefetch" href="/assets/js/249.08c946e9.js"><link rel="prefetch" href="/assets/js/25.668cbbc9.js"><link rel="prefetch" href="/assets/js/250.4f23bc6a.js"><link rel="prefetch" href="/assets/js/251.1049b63f.js"><link rel="prefetch" href="/assets/js/252.7cff6a94.js"><link rel="prefetch" href="/assets/js/253.29a86ff6.js"><link rel="prefetch" href="/assets/js/254.aecbd962.js"><link rel="prefetch" href="/assets/js/255.4f1aba86.js"><link rel="prefetch" href="/assets/js/256.5e8b5493.js"><link rel="prefetch" href="/assets/js/257.b3632b85.js"><link rel="prefetch" href="/assets/js/258.65d72e5c.js"><link rel="prefetch" href="/assets/js/259.d9d21d41.js"><link rel="prefetch" href="/assets/js/26.aef97d84.js"><link rel="prefetch" href="/assets/js/260.87624018.js"><link rel="prefetch" href="/assets/js/261.2bb75980.js"><link rel="prefetch" href="/assets/js/262.63a1076f.js"><link rel="prefetch" href="/assets/js/263.512357ea.js"><link rel="prefetch" href="/assets/js/264.dbc099a3.js"><link rel="prefetch" href="/assets/js/265.2d5b7999.js"><link rel="prefetch" href="/assets/js/266.95b0f517.js"><link rel="prefetch" href="/assets/js/267.a955c011.js"><link rel="prefetch" href="/assets/js/268.6a59270e.js"><link rel="prefetch" href="/assets/js/269.cd74e7c0.js"><link rel="prefetch" href="/assets/js/27.225f2981.js"><link rel="prefetch" href="/assets/js/270.7e25387b.js"><link rel="prefetch" href="/assets/js/271.af12bde6.js"><link rel="prefetch" href="/assets/js/272.b4e031ed.js"><link rel="prefetch" href="/assets/js/273.0d7a0fa3.js"><link rel="prefetch" href="/assets/js/274.3844f6f5.js"><link rel="prefetch" href="/assets/js/275.9bd3d394.js"><link rel="prefetch" href="/assets/js/276.2cb01dd5.js"><link rel="prefetch" href="/assets/js/277.a1693523.js"><link rel="prefetch" href="/assets/js/278.000525df.js"><link rel="prefetch" href="/assets/js/279.11df7a2f.js"><link rel="prefetch" href="/assets/js/28.ba7a02ae.js"><link rel="prefetch" href="/assets/js/280.b8273560.js"><link rel="prefetch" href="/assets/js/281.09676438.js"><link rel="prefetch" href="/assets/js/282.b0f3bf7e.js"><link rel="prefetch" href="/assets/js/283.6d330a91.js"><link rel="prefetch" href="/assets/js/284.3a383352.js"><link rel="prefetch" href="/assets/js/285.c38bfe41.js"><link rel="prefetch" href="/assets/js/286.bdfe72ea.js"><link rel="prefetch" href="/assets/js/287.9d71697b.js"><link rel="prefetch" href="/assets/js/288.33c865fe.js"><link rel="prefetch" href="/assets/js/289.4597b346.js"><link rel="prefetch" href="/assets/js/29.a3a82aad.js"><link rel="prefetch" href="/assets/js/290.b87934ee.js"><link rel="prefetch" href="/assets/js/291.846e6183.js"><link rel="prefetch" href="/assets/js/292.5b7c8615.js"><link rel="prefetch" href="/assets/js/293.f6554a06.js"><link rel="prefetch" href="/assets/js/294.68f922b0.js"><link rel="prefetch" href="/assets/js/295.d63b9a40.js"><link rel="prefetch" href="/assets/js/296.cbd7c5a3.js"><link rel="prefetch" href="/assets/js/297.8883d1a7.js"><link rel="prefetch" href="/assets/js/298.55dd45b8.js"><link rel="prefetch" href="/assets/js/299.2eb003e9.js"><link rel="prefetch" href="/assets/js/30.4906e89a.js"><link rel="prefetch" href="/assets/js/300.2eb024d8.js"><link rel="prefetch" href="/assets/js/301.2b02d45a.js"><link rel="prefetch" href="/assets/js/302.ab057941.js"><link rel="prefetch" href="/assets/js/303.4fa892f8.js"><link rel="prefetch" href="/assets/js/304.3c752008.js"><link rel="prefetch" href="/assets/js/305.ed3398f3.js"><link rel="prefetch" href="/assets/js/306.0c0ea1a4.js"><link rel="prefetch" href="/assets/js/307.de37da75.js"><link rel="prefetch" href="/assets/js/308.ebb124a1.js"><link rel="prefetch" href="/assets/js/309.497784b5.js"><link rel="prefetch" href="/assets/js/31.5d13f1e8.js"><link rel="prefetch" href="/assets/js/310.58778d29.js"><link rel="prefetch" href="/assets/js/311.95408620.js"><link rel="prefetch" href="/assets/js/312.1ace179f.js"><link rel="prefetch" href="/assets/js/313.7a1ebca1.js"><link rel="prefetch" href="/assets/js/314.2f44ca72.js"><link rel="prefetch" href="/assets/js/315.0814b10a.js"><link rel="prefetch" href="/assets/js/316.0d5e7a63.js"><link rel="prefetch" href="/assets/js/317.0781654c.js"><link rel="prefetch" href="/assets/js/318.bca832d1.js"><link rel="prefetch" href="/assets/js/319.58f7b7cb.js"><link rel="prefetch" href="/assets/js/32.5d2a65c0.js"><link rel="prefetch" href="/assets/js/320.3e5d920f.js"><link rel="prefetch" href="/assets/js/321.06722555.js"><link rel="prefetch" href="/assets/js/322.2e333c96.js"><link rel="prefetch" href="/assets/js/323.f9137a10.js"><link rel="prefetch" href="/assets/js/324.8e29f2da.js"><link rel="prefetch" href="/assets/js/325.d1bf0a3f.js"><link rel="prefetch" href="/assets/js/326.3aa0f029.js"><link rel="prefetch" href="/assets/js/327.16088463.js"><link rel="prefetch" href="/assets/js/328.fbed29c1.js"><link rel="prefetch" href="/assets/js/329.1c9982a7.js"><link rel="prefetch" href="/assets/js/33.40f695a3.js"><link rel="prefetch" href="/assets/js/330.3fb4a91f.js"><link rel="prefetch" href="/assets/js/331.014cf8ca.js"><link rel="prefetch" href="/assets/js/332.b15a2cc0.js"><link rel="prefetch" href="/assets/js/333.5b5817a1.js"><link rel="prefetch" href="/assets/js/334.b64a6c8e.js"><link rel="prefetch" href="/assets/js/335.7253f3fd.js"><link rel="prefetch" href="/assets/js/336.23b3985c.js"><link rel="prefetch" href="/assets/js/337.de52ebfb.js"><link rel="prefetch" href="/assets/js/338.6b80ef00.js"><link rel="prefetch" href="/assets/js/339.fc616664.js"><link rel="prefetch" href="/assets/js/34.16622482.js"><link rel="prefetch" href="/assets/js/340.1340266c.js"><link rel="prefetch" href="/assets/js/341.96b50b0b.js"><link rel="prefetch" href="/assets/js/342.79488899.js"><link rel="prefetch" href="/assets/js/343.babf68d7.js"><link rel="prefetch" href="/assets/js/344.88887946.js"><link rel="prefetch" href="/assets/js/345.0ff39dc4.js"><link rel="prefetch" href="/assets/js/346.09e61388.js"><link rel="prefetch" href="/assets/js/347.d537ab52.js"><link rel="prefetch" href="/assets/js/348.dd8f6c17.js"><link rel="prefetch" href="/assets/js/349.b3d34215.js"><link rel="prefetch" href="/assets/js/35.383787aa.js"><link rel="prefetch" href="/assets/js/350.fe3bba70.js"><link rel="prefetch" href="/assets/js/351.483b5714.js"><link rel="prefetch" href="/assets/js/352.d29d304d.js"><link rel="prefetch" href="/assets/js/353.302b7228.js"><link rel="prefetch" href="/assets/js/354.6eceda09.js"><link rel="prefetch" href="/assets/js/355.12dda429.js"><link rel="prefetch" href="/assets/js/356.2d955226.js"><link rel="prefetch" href="/assets/js/357.a9ef4b4a.js"><link rel="prefetch" href="/assets/js/358.066c8251.js"><link rel="prefetch" href="/assets/js/359.deaaf772.js"><link rel="prefetch" href="/assets/js/36.e9bed857.js"><link rel="prefetch" href="/assets/js/360.75a7363a.js"><link rel="prefetch" href="/assets/js/361.614b7ee2.js"><link rel="prefetch" href="/assets/js/362.fd9e37b0.js"><link rel="prefetch" href="/assets/js/363.a5d59ca6.js"><link rel="prefetch" href="/assets/js/364.d509a330.js"><link rel="prefetch" href="/assets/js/365.9b0cde33.js"><link rel="prefetch" href="/assets/js/366.728f1390.js"><link rel="prefetch" href="/assets/js/367.1e467cf9.js"><link rel="prefetch" href="/assets/js/368.c2129f3a.js"><link rel="prefetch" href="/assets/js/369.5074de32.js"><link rel="prefetch" href="/assets/js/37.a7cecef9.js"><link rel="prefetch" href="/assets/js/370.5770006f.js"><link rel="prefetch" href="/assets/js/371.be39b0f5.js"><link rel="prefetch" href="/assets/js/372.0b3530e4.js"><link rel="prefetch" href="/assets/js/373.b3c25bfd.js"><link rel="prefetch" href="/assets/js/374.f5bebebf.js"><link rel="prefetch" href="/assets/js/375.3cd02b21.js"><link rel="prefetch" href="/assets/js/376.1fd9b7f9.js"><link rel="prefetch" href="/assets/js/377.665a0bdd.js"><link rel="prefetch" href="/assets/js/378.92a5b88e.js"><link rel="prefetch" href="/assets/js/379.bb80d735.js"><link rel="prefetch" href="/assets/js/38.5839ab70.js"><link rel="prefetch" href="/assets/js/380.c2f2ecf4.js"><link rel="prefetch" href="/assets/js/381.b4d01a7c.js"><link rel="prefetch" href="/assets/js/382.017d5117.js"><link rel="prefetch" href="/assets/js/383.bcd6c3a1.js"><link rel="prefetch" href="/assets/js/384.7f155b2b.js"><link rel="prefetch" href="/assets/js/385.8b9cbf46.js"><link rel="prefetch" href="/assets/js/386.2af49b69.js"><link rel="prefetch" href="/assets/js/387.32447d56.js"><link rel="prefetch" href="/assets/js/388.7cff1720.js"><link rel="prefetch" href="/assets/js/389.3ed5ee74.js"><link rel="prefetch" href="/assets/js/39.9020bf17.js"><link rel="prefetch" href="/assets/js/390.2ea131ee.js"><link rel="prefetch" href="/assets/js/391.3fad4f41.js"><link rel="prefetch" href="/assets/js/392.ffb7dcc8.js"><link rel="prefetch" href="/assets/js/393.35383f9b.js"><link rel="prefetch" href="/assets/js/394.6cf24f79.js"><link rel="prefetch" href="/assets/js/395.61a79aa8.js"><link rel="prefetch" href="/assets/js/396.1c474508.js"><link rel="prefetch" href="/assets/js/397.f99f83c3.js"><link rel="prefetch" href="/assets/js/398.553d3762.js"><link rel="prefetch" href="/assets/js/399.a5cc9916.js"><link rel="prefetch" href="/assets/js/40.48d45767.js"><link rel="prefetch" href="/assets/js/400.2ec5d3c8.js"><link rel="prefetch" href="/assets/js/401.5ec5289c.js"><link rel="prefetch" href="/assets/js/402.d5dbd5cd.js"><link rel="prefetch" href="/assets/js/403.ace027d2.js"><link rel="prefetch" href="/assets/js/404.f439be50.js"><link rel="prefetch" href="/assets/js/405.73b707aa.js"><link rel="prefetch" href="/assets/js/406.35c5ec99.js"><link rel="prefetch" href="/assets/js/407.e634640d.js"><link rel="prefetch" href="/assets/js/408.65c692c8.js"><link rel="prefetch" href="/assets/js/409.bb5b5f9a.js"><link rel="prefetch" href="/assets/js/41.56fc6918.js"><link rel="prefetch" href="/assets/js/410.b5db05da.js"><link rel="prefetch" href="/assets/js/411.fd869eb0.js"><link rel="prefetch" href="/assets/js/412.fd0a682e.js"><link rel="prefetch" href="/assets/js/413.bfb3342e.js"><link rel="prefetch" href="/assets/js/414.5730c1bd.js"><link rel="prefetch" href="/assets/js/415.7f0fcb30.js"><link rel="prefetch" href="/assets/js/416.17ff0237.js"><link rel="prefetch" href="/assets/js/417.05a6b30c.js"><link rel="prefetch" href="/assets/js/418.80a3d060.js"><link rel="prefetch" href="/assets/js/419.b62aaf4f.js"><link rel="prefetch" href="/assets/js/42.8c4b702a.js"><link rel="prefetch" href="/assets/js/420.0a6ce637.js"><link rel="prefetch" href="/assets/js/421.c9c76a4b.js"><link rel="prefetch" href="/assets/js/422.9ef21af2.js"><link rel="prefetch" href="/assets/js/423.5542f305.js"><link rel="prefetch" href="/assets/js/424.627a3bb5.js"><link rel="prefetch" href="/assets/js/425.8bfdd485.js"><link rel="prefetch" href="/assets/js/426.3d4c2047.js"><link rel="prefetch" href="/assets/js/427.6273b9fc.js"><link rel="prefetch" href="/assets/js/428.ca5eb4ef.js"><link rel="prefetch" href="/assets/js/429.1b9549cf.js"><link rel="prefetch" href="/assets/js/43.c7475b71.js"><link rel="prefetch" href="/assets/js/430.72bb650b.js"><link rel="prefetch" href="/assets/js/431.f170a5cb.js"><link rel="prefetch" href="/assets/js/432.318cbbb4.js"><link rel="prefetch" href="/assets/js/433.044c0c3c.js"><link rel="prefetch" href="/assets/js/434.e68fe428.js"><link rel="prefetch" href="/assets/js/44.7b19b588.js"><link rel="prefetch" href="/assets/js/45.9d3945a6.js"><link rel="prefetch" href="/assets/js/46.b24ec770.js"><link rel="prefetch" href="/assets/js/47.592cf21b.js"><link rel="prefetch" href="/assets/js/48.468aba5c.js"><link rel="prefetch" href="/assets/js/49.55886fb7.js"><link rel="prefetch" href="/assets/js/50.af6ed1cd.js"><link rel="prefetch" href="/assets/js/51.607e3bd3.js"><link rel="prefetch" href="/assets/js/52.b8b0b581.js"><link rel="prefetch" href="/assets/js/53.29329c0a.js"><link rel="prefetch" href="/assets/js/54.6938a4dc.js"><link rel="prefetch" href="/assets/js/55.909c10ce.js"><link rel="prefetch" href="/assets/js/56.8f179c58.js"><link rel="prefetch" href="/assets/js/57.fcd0b00a.js"><link rel="prefetch" href="/assets/js/58.02c27d56.js"><link rel="prefetch" href="/assets/js/59.8fcfc9b4.js"><link rel="prefetch" href="/assets/js/60.df1a1cde.js"><link rel="prefetch" href="/assets/js/61.e20ff949.js"><link rel="prefetch" href="/assets/js/62.cb79772e.js"><link rel="prefetch" href="/assets/js/63.23368f92.js"><link rel="prefetch" href="/assets/js/64.56d9c759.js"><link rel="prefetch" href="/assets/js/65.533ff635.js"><link rel="prefetch" href="/assets/js/66.21b18496.js"><link rel="prefetch" href="/assets/js/67.3349d37f.js"><link rel="prefetch" href="/assets/js/68.12b77b93.js"><link rel="prefetch" href="/assets/js/69.0f1edbe2.js"><link rel="prefetch" href="/assets/js/7.b8330c35.js"><link rel="prefetch" href="/assets/js/70.441b6850.js"><link rel="prefetch" href="/assets/js/71.da7d0846.js"><link rel="prefetch" href="/assets/js/72.1fa1e945.js"><link rel="prefetch" href="/assets/js/73.04e8e04c.js"><link rel="prefetch" href="/assets/js/74.f0746a1f.js"><link rel="prefetch" href="/assets/js/75.66f17814.js"><link rel="prefetch" href="/assets/js/76.02b003ad.js"><link rel="prefetch" href="/assets/js/77.2624fdaa.js"><link rel="prefetch" href="/assets/js/78.045b3c5c.js"><link rel="prefetch" href="/assets/js/79.aa87e94a.js"><link rel="prefetch" href="/assets/js/8.f670391f.js"><link rel="prefetch" href="/assets/js/80.fd9632dd.js"><link rel="prefetch" href="/assets/js/81.44784700.js"><link rel="prefetch" href="/assets/js/82.d9b79d36.js"><link rel="prefetch" href="/assets/js/83.88c4fa7f.js"><link rel="prefetch" href="/assets/js/84.a3ae504e.js"><link rel="prefetch" href="/assets/js/85.24d2fff8.js"><link rel="prefetch" href="/assets/js/86.6748c0a6.js"><link rel="prefetch" href="/assets/js/87.0a081699.js"><link rel="prefetch" href="/assets/js/88.7a75bbe1.js"><link rel="prefetch" href="/assets/js/89.da7139ae.js"><link rel="prefetch" href="/assets/js/9.09bd567b.js"><link rel="prefetch" href="/assets/js/90.7db4ecf9.js"><link rel="prefetch" href="/assets/js/91.16de667d.js"><link rel="prefetch" href="/assets/js/92.debdb932.js"><link rel="prefetch" href="/assets/js/93.98234aa4.js"><link rel="prefetch" href="/assets/js/94.fc455971.js"><link rel="prefetch" href="/assets/js/95.025651b3.js"><link rel="prefetch" href="/assets/js/96.552f2a1b.js"><link rel="prefetch" href="/assets/js/97.32e72e8d.js"><link rel="prefetch" href="/assets/js/98.8351f68e.js"><link rel="prefetch" href="/assets/js/99.3a7ab3ee.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.d7ff67ab.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.8a23fed3.js"><link rel="prefetch" href="/assets/js/vendors~photo-swipe.f4bfc23e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.bbccc6ad.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">数蛙技术团队</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="用户手册" class="dropdown-title"><span class="title">用户手册</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/manual/cloud/" class="nav-link">数蛙工业数据云平台</a></li><li class="dropdown-item"><!----> <a href="/zh/manual/edge/" class="nav-link">数蛙工业边缘网关</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="产品说明" class="dropdown-title"><span class="title">产品说明</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/product/dgiot/" class="nav-link">一站式物联网平台</a></li><li class="dropdown-item"><!----> <a href="/zh/product/dgtest/" class="nav-link">一站式云压测平台</a></li><li class="dropdown-item"><!----> <a href="/zh/product/dgii/" class="nav-link">工业互联网平台</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发指南" class="dropdown-title"><span class="title">开发指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/backend/" class="nav-link router-link-active">服务架构</a></li><li class="dropdown-item"><!----> <a href="/zh/frontend/" class="nav-link">交互技术</a></li><li class="dropdown-item"><!----> <a href="/zh/dataanalysis/" class="nav-link">数据分析</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实战教程" class="dropdown-title"><span class="title">实战教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/blog/knowledge/" class="nav-link">基础知识</a></li><li class="dropdown-item"><!----> <a href="/zh/blog/study/" class="nav-link">案例教程</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/backend/emqx/getting-started/cluster.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">English</a></li></ul></div></div> <a href="https://github.com/dgiot" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="用户手册" class="dropdown-title"><span class="title">用户手册</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/manual/cloud/" class="nav-link">数蛙工业数据云平台</a></li><li class="dropdown-item"><!----> <a href="/zh/manual/edge/" class="nav-link">数蛙工业边缘网关</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="产品说明" class="dropdown-title"><span class="title">产品说明</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/product/dgiot/" class="nav-link">一站式物联网平台</a></li><li class="dropdown-item"><!----> <a href="/zh/product/dgtest/" class="nav-link">一站式云压测平台</a></li><li class="dropdown-item"><!----> <a href="/zh/product/dgii/" class="nav-link">工业互联网平台</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发指南" class="dropdown-title"><span class="title">开发指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/backend/" class="nav-link router-link-active">服务架构</a></li><li class="dropdown-item"><!----> <a href="/zh/frontend/" class="nav-link">交互技术</a></li><li class="dropdown-item"><!----> <a href="/zh/dataanalysis/" class="nav-link">数据分析</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实战教程" class="dropdown-title"><span class="title">实战教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/blog/knowledge/" class="nav-link">基础知识</a></li><li class="dropdown-item"><!----> <a href="/zh/blog/study/" class="nav-link">案例教程</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/backend/emqx/getting-started/cluster.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">English</a></li></ul></div></div> <a href="https://github.com/dgiot" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <div style="padding-left:1.5rem;"><div></div></div> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>产品概览</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>EMQX</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh/backend/emqx/" aria-current="page" class="sidebar-link">EMQX 简介</a></li><li><a href="/zh/backend/emqx/introduction/checklist.html" class="sidebar-link">EMQX 功能列表</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>开始使用</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh/backend/emqx/getting-started/install-ee.html" class="sidebar-link">安装</a></li><li><a href="/zh/backend/emqx/getting-started/start.html" class="sidebar-link">启动 EMQ X</a></li><li><a href="/zh/backend/emqx/getting-started/command-line.html" class="sidebar-link">基本命令</a></li><li><a href="/zh/backend/emqx/getting-started/cluster.html" aria-current="page" class="active sidebar-link">分布式集群</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/getting-started/cluster.html#erlang-otp-分布式编程" class="sidebar-link">Erlang/OTP 分布式编程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/getting-started/cluster.html#节点-node" class="sidebar-link">节点(Node)</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/getting-started/cluster.html#emq-x-分布集群设计" class="sidebar-link">EMQ X 分布集群设计</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/getting-started/cluster.html#主题树-topic-trie-与路由表-route-table" class="sidebar-link">主题树(Topic Trie)与路由表(Route Table)</a></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/getting-started/cluster.html#订阅-subscription-与消息派发" class="sidebar-link">订阅(Subscription)与消息派发</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/getting-started/cluster.html#节点发现与自动集群" class="sidebar-link">节点发现与自动集群</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/backend/emqx/getting-started/cluster.html#手动-manual-方式管理集群介绍" class="sidebar-link">手动(manual) 方式管理集群介绍</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/backend/emqx/getting-started/cluster.html#防火墙设置" class="sidebar-link">防火墙设置</a></li></ul></li><li><a href="/zh/backend/emqx/getting-started/directory.html" class="sidebar-link">目录结构</a></li><li><a href="/zh/backend/emqx/getting-started/config.html" class="sidebar-link">配置说明</a></li><li><a href="/zh/backend/emqx/getting-started/log.html" class="sidebar-link">日志与追踪</a></li><li><a href="/zh/backend/emqx/getting-started/dashboard-ee.html" class="sidebar-link">Dashboard</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>用户指南</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>模块管理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>规则引擎</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>插件管理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>运维操作</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/zh/backend/emqx/advanced/http-api.html" class="sidebar-link">HTTP API</a></li><li><a href="/zh/backend/emqx/configuration/configuration.html" class="sidebar-link">参数配置</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>命令行接口</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/zh/backend/emqx/advanced/relup.html" class="sidebar-link">版本热升级</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>FAQ 常见问题解答</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>SDK &amp; Tools</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>协议介绍</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>版本发布</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>相关资料</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li></ul> </aside> <!----> <!----> <main class="page"><div class="theme-default-content" style="margin-top:3.6rem;padding-top:0;padding-bottom:0;"></div> <div class="theme-default-content"><div class="content__default"><h1 id="分布式集群"><a href="#分布式集群" class="header-anchor">#</a> 分布式集群</h1> <h2 id="erlang-otp-分布式编程"><a href="#erlang-otp-分布式编程" class="header-anchor">#</a> Erlang/OTP 分布式编程</h2> <p>Erlang/OTP 最初是爱立信为开发电信设备系统设计的编程语言平台，电信设备(路由器、接入网关等)典型设计是通过背板连接主控板卡与多块业务板卡的分布式系统。</p> <p>Erlang/OTP 语言平台的分布式程序，由分布互联的 Erlang 运行系统组成，每个 Erlang 运行系统被称为节点(Node)，节点(Node) 间通过 TCP 互联，消息传递的方式通信:</p> <p><img src="http://dgiot-1253666439.cos.ap-shanghai-fsi.myqcloud.com/shuwa_tech/zh/backend/emqx/assets/cluster_1.png" alt="cluster_1.png"></p> <h3 id="节点-node"><a href="#节点-node" class="header-anchor">#</a> 节点(Node)</h3> <p>Erlang 节点由唯一的节点名称标识，节点间通过名称进行通信寻址。 例如在本机启动四个 Erlang 节点，节点名称分别为:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>erl -name node1@127.0.0.1
erl -name node2@127.0.0.1
erl -name node3@127.0.0.1
erl -name node4@127.0.0.1
</code></pre></div><p>node1@127.0.0.1 控制台下建立与其他节点的连接:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">(</span>node1@127.0.0.1<span class="token punctuation">)</span><span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> net_kernel:connect_node<span class="token punctuation">(</span><span class="token string">'node2@127.0.0.1'</span><span class="token punctuation">)</span>.
<span class="token boolean">true</span>
<span class="token punctuation">(</span>node1@127.0.0.1<span class="token punctuation">)</span><span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> net_kernel:connect_node<span class="token punctuation">(</span><span class="token string">'node3@127.0.0.1'</span><span class="token punctuation">)</span>.
<span class="token boolean">true</span>
<span class="token punctuation">(</span>node1@127.0.0.1<span class="token punctuation">)</span><span class="token operator"><span class="token file-descriptor important">3</span>&gt;</span> net_kernel:connect_node<span class="token punctuation">(</span><span class="token string">'node4@127.0.0.1'</span><span class="token punctuation">)</span>.
<span class="token boolean">true</span>
<span class="token punctuation">(</span>node1@127.0.0.1<span class="token punctuation">)</span><span class="token operator"><span class="token file-descriptor important">4</span>&gt;</span> nodes<span class="token punctuation">(</span><span class="token punctuation">)</span>.
<span class="token punctuation">[</span><span class="token string">'node2@127.0.0.1'</span>,<span class="token string">'node3@127.0.0.1'</span>,<span class="token string">'node4@127.0.0.1'</span><span class="token punctuation">]</span>
</code></pre></div><h2 id="emq-x-分布集群设计"><a href="#emq-x-分布集群设计" class="header-anchor">#</a> EMQ X 分布集群设计</h2> <p>EMQ X 消息服务器集群基于 Erlang/OTP 分布式设计，集群原理可简述为下述两条规则:</p> <p>MQTT 客户端订阅主题时，所在节点订阅成功后广播通知其他节点：某个主题(Topic)被本节点订阅。</p> <p>MQTT 客户端发布消息时，所在节点会根据消息主题(Topic)，检索订阅并路由消息到相关节点。</p> <p>EMQ X 消息服务器同一集群的所有节点，都会复制一份主题(Topic) -&gt; 节点(Node)映射的路由表，例如:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>topic1 -<span class="token operator">&gt;</span> node1, node2
topic2 -<span class="token operator">&gt;</span> node3
topic3 -<span class="token operator">&gt;</span> node2, node4
</code></pre></div><h3 id="主题树-topic-trie-与路由表-route-table"><a href="#主题树-topic-trie-与路由表-route-table" class="header-anchor">#</a> 主题树(Topic Trie)与路由表(Route Table)</h3> <p>EMQ X 消息服务器每个集群节点，都保存一份主题树(Topic Trie)和路由表。</p> <p>例如下述主题订阅关系:</p> <table><thead><tr><th>客户端</th> <th>节点</th> <th>订阅主题</th></tr></thead> <tbody><tr><td>client1</td> <td>node1</td> <td>t/+/x, t/+/y</td></tr> <tr><td>client2</td> <td>node2</td> <td>t/#</td></tr> <tr><td>client3</td> <td>node3</td> <td>t/+/x, t/a</td></tr></tbody></table> <p>最终会生成如下主题树(Topic Trie)和路由表(Route Table):</p> <p><img src="http://dgiot-1253666439.cos.ap-shanghai-fsi.myqcloud.com/shuwa_tech/zh/backend/emqx/assets/cluster_2.png" alt="cluster_2.png"></p> <h3 id="订阅-subscription-与消息派发"><a href="#订阅-subscription-与消息派发" class="header-anchor">#</a> 订阅(Subscription)与消息派发</h3> <p>客户端的主题订阅(Subscription)关系，只保存在客户端所在节点，用于本节点内派发消息到客户端。</p> <p>例如client1向主题’t/a’发布消息，消息在节点间的路由与派发流程:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>title: Message Route and Deliver

client1 -<span class="token operator">&gt;</span> node1: Publish<span class="token punctuation">[</span>t/a<span class="token punctuation">]</span>
    node1 --<span class="token operator">&gt;</span> node2: Route<span class="token punctuation">[</span>t/<span class="token comment">#]</span>
        node2 --<span class="token operator">&gt;</span> client2: Deliver<span class="token punctuation">[</span>t/<span class="token comment">#]</span>
    node1 --<span class="token operator">&gt;</span> node3: Route<span class="token punctuation">[</span>t/a<span class="token punctuation">]</span>
        node3 --<span class="token operator">&gt;</span> client3: Deliver<span class="token punctuation">[</span>t/a<span class="token punctuation">]</span>
</code></pre></div><p><img src="http://dgiot-1253666439.cos.ap-shanghai-fsi.myqcloud.com/shuwa_tech/zh/backend/emqx/assets/design_9.png" alt="design_9.png"></p> <h2 id="节点发现与自动集群"><a href="#节点发现与自动集群" class="header-anchor">#</a> 节点发现与自动集群</h2> <p>EMQ X 支持基于 Ekka 库的集群自动发现 (Autocluster)。Ekka 是为 Erlang/OTP 应用开发的集群管理库，支持
Erlang 节点自动发现 (Service Discovery)、自动集群 (Autocluster)、脑裂自动愈合 (Network Partition
Autoheal)、自动删除宕机节点 (Autoclean)。</p> <p>EMQ X 支持多种节点发现策略:</p> <table><thead><tr><th>策略</th> <th>说明</th></tr></thead> <tbody><tr><td>manual</td> <td>手动命令创建集群</td></tr> <tr><td>static</td> <td>静态节点列表自动集群</td></tr> <tr><td>mcast</td> <td>UDP 组播方式自动集群</td></tr> <tr><td>dns</td> <td>DNS A 记录自动集群</td></tr> <tr><td>etcd</td> <td>通过 etcd 自动集群</td></tr> <tr><td>k8s</td> <td>Kubernetes 服务自动集群</td></tr></tbody></table> <h3 id="手动-manual-方式管理集群介绍"><a href="#手动-manual-方式管理集群介绍" class="header-anchor">#</a> 手动(manual) 方式管理集群介绍</h3> <p>假设要在两台服务器 s1.emqx.io, s2.emqx.io 上部署 EMQ X 集群:</p> <table><thead><tr><th>节点名</th> <th>主机名 (FQDN)</th> <th>IP 地址</th></tr></thead> <tbody><tr><td>emqx@s1.emqx.io 或 emqx@192.168.0.10</td> <td>s1.emqx.io</td> <td>192.168.0.10</td></tr> <tr><td>emqx@s2.emqx.io 或 emqx@192.168.0.20</td> <td>s2.emqx.io</td> <td>192.168.0.20</td></tr></tbody></table> <p><strong>注意：</strong> 节点名格式为 <a href="mailto:Name@Host">Name@Host</a>, Host 必须是 IP 地址或 FQDN (主机名。域名)</p> <h4 id="配置-emqx-s1-emqx-io-节点"><a href="#配置-emqx-s1-emqx-io-节点" class="header-anchor">#</a> 配置 emqx@s1.emqx.io 节点</h4> <p>emqx/etc/emqx.conf:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>node.name <span class="token operator">=</span> emqx@s1.emqx.io
<span class="token comment"># 或</span>
node.name <span class="token operator">=</span> emqx@192.168.0.10
</code></pre></div><p>也可通过环境变量:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">EMQX_NODE_NAME</span><span class="token operator">=</span>emqx@s1.emqx.io <span class="token operator">&amp;&amp;</span> ./bin/emqx start
</code></pre></div><p><strong>注意:</strong> 节点启动加入集群后，节点名称不能变更。</p> <h4 id="配置-emqx-s2-emqx-io-节点"><a href="#配置-emqx-s2-emqx-io-节点" class="header-anchor">#</a> 配置 emqx@s2.emqx.io 节点</h4> <p>emqx/etc/emqx.conf:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>node.name <span class="token operator">=</span> emqx@s2.emqx.io
<span class="token comment"># 或</span>
node.name <span class="token operator">=</span> emqx@192.168.0.20
</code></pre></div><h4 id="节点加入集群"><a href="#节点加入集群" class="header-anchor">#</a> 节点加入集群</h4> <p>启动两台节点后，在 s2.emqx.io 上执行:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ ./bin/emqx_ctl cluster <span class="token function">join</span> emqx@s1.emqx.io

Join the cluster successfully.
Cluster status: <span class="token punctuation">[</span><span class="token punctuation">{</span>running_nodes,<span class="token punctuation">[</span><span class="token string">'emqx@s1.emqx.io'</span>,<span class="token string">'emqx@s2.emqx.io'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><p><strong>注意:</strong> s2.emqx.io加入集群后会清除本身全部的数据，同步s1.emqx.io节点的数据。如果还有s3.emqx.io节点，那么需要在s3.emqx.io节点去执行命令加入emqx@s1.emqx.io或者emqx@s2.emqx.io， 已经在集群的节点不能在join到其他节点，否则会退出当前集群和join的节点组成一个新的集群</p> <p>在任意节点上查询集群状态:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ ./bin/emqx_ctl cluster status

Cluster status: <span class="token punctuation">[</span><span class="token punctuation">{</span>running_nodes,<span class="token punctuation">[</span><span class="token string">'emqx@s1.emqx.io'</span>,<span class="token string">'emqx@s2.emqx.io'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><h4 id="退出集群"><a href="#退出集群" class="header-anchor">#</a> 退出集群</h4> <p>节点退出集群，两种方式:</p> <ol><li>leave: 让本节点退出集群</li> <li>force-leave: 从集群删除其他节点</li></ol> <p>让 emqx@s2.emqx.io 主动退出集群:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ ./bin/emqx_ctl cluster leave
</code></pre></div><p>或在 s1.emqx.io 上，从集群删除 emqx@s2.emqx.io 节点:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ ./bin/emqx_ctl cluster force-leave emqx@s2.emqx.io
</code></pre></div><h2 id="防火墙设置"><a href="#防火墙设置" class="header-anchor">#</a> 防火墙设置</h2> <p>若预先设置了环境变量 WITH_EPMD=1, 启动 emqx 时会使用启动 epmd (监听端口 4369) 做节点发现。称为 <code>epmd 模式</code>。
若环境变量 WITH_EPMD 没有设置，则启动 emqx 时不启用 epmd，而使用 emqx ekka 的节点发现，这也是 4.0 之后的默认节点发现方式。称为 <code>ekka 模式</code>。</p> <p><strong>epmd 模式：</strong>
如果集群节点间存在防火墙，防火墙需要开启 TCP 4369 端口和一个 TCP 端口段。4369 由 epmd 端口映射服务使用，TCP
端口段用于节点间建立连接与通信。</p> <p>防火墙设置后，需要在 <code>emqx/etc/emqx.conf</code> 中配置相同的端口段:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">## Distributed node port range</span>
node.dist_listen_min <span class="token operator">=</span> <span class="token number">6369</span>
node.dist_listen_max <span class="token operator">=</span> <span class="token number">7369</span>
</code></pre></div><p><strong>ekka 模式（4.0 版本之后的默认模式）：</strong></p> <p>如果集群节点间存在防火墙，默认情况下，只需要开启 TCP 4370 端口。</p> <p>但如果 node.name 配置制定的节点名字里，带有数字后缀(Offset)，则需要开启 4370 + Offset 端口。</p> <p>比如：</p> <div class="language- extra-class"><pre class="language-text"><code>node.name = emqx-1@192.168.0.12
</code></pre></div><p>则需要开启 4371 端口。</p></div> <!----></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/23/2021, 10:27:16 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/zh/backend/emqx/getting-started/command-line.html" class="prev">基本命令</a></span> <span class="next"><a href="/zh/backend/emqx/getting-started/directory.html">目录结构</a>
      →
    </span></p></div> </main></div><div class="global-ui"><div></div><div class="add-this"></div><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button title="Close (Esc)" class="pswp__button pswp__button--close"></button> <button title="Share" class="pswp__button pswp__button--share"></button> <button title="Toggle fullscreen" class="pswp__button pswp__button--fs"></button> <button title="Zoom in/out" class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button title="Previous (arrow left)" class="pswp__button pswp__button--arrow--left"></button> <button title="Next (arrow right)" class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/assets/js/app.0a7b53c3.js" defer></script><script src="/assets/js/6.c9e340e6.js" defer></script><script src="/assets/js/5.1f4aba7f.js" defer></script><script src="/assets/js/118.21aa0b65.js" defer></script>
  </body>
</html>
