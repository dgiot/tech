(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{446:function(s,a,t){"use strict";t.r(a);var e=t(10),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"命令行接口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#命令行接口"}},[s._v("#")]),s._v(" 命令行接口")]),s._v(" "),t("p",[s._v("EMQ X 提供了 "),t("code",[s._v("./bin/emqx_ctl")]),s._v(" 的管理命令行，用于用户对 EMQ X 进行管理、配置、查询。")]),s._v(" "),t("h2",{attrs:{id:"status-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#status-命令"}},[s._v("#")]),s._v(" status 命令")]),s._v(" "),t("p",[s._v("查询 EMQ X 运行状态:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl status\nNode "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'emqx@127.0.0.1'")]),s._v(" is started\nemqx v4.0.0 is running\n")])])]),t("h2",{attrs:{id:"mgmt-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mgmt-命令"}},[s._v("#")]),s._v(" mgmt 命令")]),s._v(" "),t("p",[s._v("mgmt 命令查询应用程序。")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("命令")]),s._v(" "),t("th",[s._v("描述")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("code",[s._v("mgmt list")])]),s._v(" "),t("td",[s._v("列出应用程序列表")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("mgmt insert <AppId> <Name>")])]),s._v(" "),t("td",[s._v("添加允许访问 HTTP API 的应用程序")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("mgmt update <AppId> <status>")])]),s._v(" "),t("td",[s._v("更新允许访问 HTTP API 的应用程序")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("mgmt lookup <AppId>")])]),s._v(" "),t("td",[s._v("获取允许访问 HTTP API 的应用程序详情")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("mgmt delete <AppId>")])]),s._v(" "),t("td",[s._v("删除允许访问 HTTP API 的应用程序")])])])]),s._v(" "),t("h3",{attrs:{id:"mgmt-list"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mgmt-list"}},[s._v("#")]),s._v(" mgmt list")]),s._v(" "),t("p",[s._v("列出应用程序列表:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl mgmt list\napp_id: 901abdba8eb8c, secret: MjgzMzQ5MjM1MzUzMTc4MjgyMjE3NzU4ODcwMDg0NjQ4OTG, name: hello, desc: , status: true, expired: undefined\n")])])]),t("h3",{attrs:{id:"mgmt-insert"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mgmt-insert"}},[s._v("#")]),s._v(" mgmt insert "),t("AppId",[t("Name")],1)],1),s._v(" "),t("p",[s._v("添加 HTTP API 的应用程序:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl mgmt insert dbcb6e023370b world\nAppSecret: MjgzMzQ5MjYyMTY3ODk4MjA5NzMwODExODMxMDM1NDk0NDA\n")])])]),t("h3",{attrs:{id:"mgmt-update"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mgmt-update"}},[s._v("#")]),s._v(" mgmt update "),t("AppId",[t("status")],1)],1),s._v(" "),t("p",[s._v("更新 HTTP API 的应用程序:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl mgmt update dbcb6e023370b stop\nupdate successfully.\n")])])]),t("h3",{attrs:{id:"mgmt-lookup"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mgmt-lookup"}},[s._v("#")]),s._v(" mgmt lookup "),t("AppId")],1),s._v(" "),t("p",[s._v("获取 HTTP API 的应用程序详情:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl mgmt lookup dbcb6e023370b\napp_id: dbcb6e023370b\nsecret: MjgzMzQ5MjYyMTY3ODk4MjA5NzMwODExODMxMDM1NDk0NDA\nname: world\ndesc: Application user\nstatus: stop\nexpired: undefined\n")])])]),t("h3",{attrs:{id:"mgmt-delete"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mgmt-delete"}},[s._v("#")]),s._v(" mgmt delete "),t("AppId")],1),s._v(" "),t("p",[s._v("删除 HTTP API 的应用程序:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl mgmt delete dbcb6e023370b\nok\n")])])]),t("h2",{attrs:{id:"broker-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#broker-命令"}},[s._v("#")]),s._v(" broker 命令")]),s._v(" "),t("p",[s._v("broker 命令查询服务器基本信息，启动时间，统计数据与性能数据。")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("命令")]),s._v(" "),t("th",[s._v("描述")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("code",[s._v("broker")])]),s._v(" "),t("td",[s._v("查询 EMQ X 描述、版本、启动时间")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("broker stats")])]),s._v(" "),t("td",[s._v("查询连接 (Connection)、会话 (Session)、主题 (Topic)、订阅 (Subscription)、路由 (Route) 统计信息")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("broker metrics")])]),s._v(" "),t("td",[s._v("查询 MQTT 报文 (Packet)、消息 (Message) 收发统计")])])])]),s._v(" "),t("p",[s._v("查询 EMQ X 基本信息，包括版本、启动时间等:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl broker\nsysdescr  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" EMQ X Broker\nversion   "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.0")]),s._v(".0\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("uptime")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" minutes, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("52")]),s._v(" seconds\ndatetime  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-02-21 09:39:58\n")])])]),t("h3",{attrs:{id:"broker-stats"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#broker-stats"}},[s._v("#")]),s._v(" broker stats")]),s._v(" "),t("p",[s._v("查询服务器客户端连接 (Connections)、主题 (Topics)、订阅 (Subscriptions)、路由 (Routes) 统计:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl broker stats\nactions.count                 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\nactions.max                   "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\nchannels.count                "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nchannels.max                  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nconnections.count             "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nconnections.max               "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nresources.count               "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nresources.max                 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nretained.count                "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\nretained.max                  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\nroutes.count                  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nroutes.max                    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nrules.count                   "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nrules.max                     "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsessions.count                "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsessions.max                  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsuboptions.count              "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsuboptions.max                "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsubscribers.count             "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsubscribers.max               "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsubscriptions.count           "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsubscriptions.max             "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsubscriptions.shared.count    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsubscriptions.shared.max      "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\ntopics.count                  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\ntopics.max                    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])])]),t("h3",{attrs:{id:"broker-metrics"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#broker-metrics"}},[s._v("#")]),s._v(" broker metrics")]),s._v(" "),t("p",[s._v("查询服务器流量 (Bytes)、MQTT 报文 (Packets)、消息 (Messages) 收发统计:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl broker metrics\nactions.success               "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nbytes.received                "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nbytes.sent                    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nclient.auth.anonymous         "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nclient.authenticate           "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nclient.check_acl              "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nclient.connack                "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nclient.connect                "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nclient.connected              "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nclient.disconnected           "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nclient.subscribe              "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nclient.unsubscribe            "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\ndelivery.dropped              "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\ndelivery.dropped.expired      "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\ndelivery.dropped.no_local     "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\ndelivery.dropped.qos0_msg     "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\ndelivery.dropped.queue_full   "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\ndelivery.dropped.too_large    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.acked                "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.delayed              "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.delivered            "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.dropped              "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.dropped.expired      "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.dropped.no_subscriber: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.forward              "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.publish              "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.qos0.received        "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.qos0.sent            "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.qos1.received        "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.qos1.sent            "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.qos2.received        "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.qos2.sent            "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.received             "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.retained             "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\nmessages.sent                 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.auth.received         "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.auth.sent             "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.connack.auth_error    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.connack.error         "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.connack.sent          "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.connect.received      "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.disconnect.received   "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.disconnect.sent       "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.pingreq.received      "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.pingresp.sent         "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.puback.inuse          "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.puback.missed         "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.puback.received       "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.puback.sent           "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.pubcomp.inuse         "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.pubcomp.missed        "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.pubcomp.received      "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.pubcomp.sent          "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.publish.auth_error    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.publish.dropped       "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.publish.error         "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.publish.received      "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.publish.sent          "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.pubrec.inuse          "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.pubrec.missed         "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.pubrec.received       "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.pubrec.sent           "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.pubrel.missed         "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.pubrel.received       "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.pubrel.sent           "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.received              "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.sent                  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.suback.sent           "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.subscribe.auth_error  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.subscribe.error       "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.subscribe.received    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.unsuback.sent         "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.unsubscribe.error     "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.unsubscribe.received  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nrules.matched                 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsession.created               "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsession.discarded             "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsession.resumed               "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsession.takeovered            "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsession.terminated            "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])])]),t("h2",{attrs:{id:"cluster-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cluster-命令"}},[s._v("#")]),s._v(" cluster 命令")]),s._v(" "),t("p",[s._v("cluster 命令可以管理由多个 EMQ X 节点（进程）组成的集群:")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("命令")]),s._v(" "),t("th",[s._v("描述")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("code",[s._v("cluster join <Node>")])]),s._v(" "),t("td",[s._v("加入集群")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("cluster leave")])]),s._v(" "),t("td",[s._v("离开集群")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("cluster force-leave <Node>")])]),s._v(" "),t("td",[s._v("从集群删除节点")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("cluster status")])]),s._v(" "),t("td",[s._v("查询集群状态")])])])]),s._v(" "),t("p",[s._v("示例:")]),s._v(" "),t("p",[s._v("为更好地展示 cluster 命令，我们先在本机启动两个节点并组成集群，为避免端口冲突，我们对 emqx2 节点的监听端口做出了调整，例如 MQTT/TCP 监听端口由默认的 1883 改为了 2883，详情请参见 "),t("RouterLink",{attrs:{to:"/zh/backend/emqx/getting-started/config.html"}},[s._v("配置说明")]),s._v(" 与 "),t("RouterLink",{attrs:{to:"/zh/backend/emqx/configuration/configuration.html"}},[s._v("配置项")]),s._v("。")],1),s._v(" "),t("p",[s._v("启动 emqx1 :")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" emqx1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" ./bin/emqx start\n")])])]),t("p",[s._v("启动 emqx2 :")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" emqx2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" ./bin/emqx start\n")])])]),t("p",[s._v("使用 "),t("code",[s._v("cluster join <Node>")]),s._v(" 将两个节点组成集群：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" emqx2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" ./bin/emqx_ctl cluster "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),s._v(" emqx1@127.0.0.1\n \nJoin the cluster successfully.\nCluster status: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("running_nodes,"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'emqx1@127.0.0.1'")]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'emqx2@127.0.0.1'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),t("p",[s._v("任意节点目录下查询集群状态:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl cluster status\nCluster status: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("running_nodes,"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'emqx2@127.0.0.1'")]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'emqx1@127.0.0.1'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),t("p",[s._v("集群消息路由测试:\nMQTT 命令行工具使用由 EMQ X 团队开发的 "),t("a",{attrs:{href:"https://github.com/emqx/emqtt/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("emqtt"),t("OutboundLink")],1),s._v(" 客户端。")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# emqx1 节点（1883 端口）订阅主题 x")]),s._v("\n$ ./bin/emqtt sub -t x -q "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1883")]),s._v("\nClient emqtt-a7de8fffbe2fbeb2fadb sent CONNECT\nClient emqtt-a7de8fffbe2fbeb2fadb subscribed to x\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 向 emqx2 节点（2883 端口 ）发布消息")]),s._v("\n$ ./bin/emqtt pub -t x -q "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2883")]),s._v(" --payload hello\nClient emqtt-0898fa447676e17479a5 sent CONNECT\nClient emqtt-0898fa447676e17479a5 sent PUBLISH "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Q1, R0, D0, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Topic")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("x, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Payload")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" bytes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v("\nClient emqtt-0898fa447676e17479a5 sent DISCONNECT\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# emqx1 节点（1883 端口）收到消息")]),s._v("\n$ ./bin/emqtt sub -t x -q "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1883")]),s._v("\nhello\n")])])]),t("p",[s._v("emqx2 节点离开集群:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" emqx2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" ./bin/emqx_ctl cluster leave\n")])])]),t("p",[s._v("强制 emqx2 节点离开集群，需要在集群下的目标节点以外的节点上进行操作:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" emqx1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" ./bin/emqx_ctl cluster force-leave emqx2@127.0.0.1\n")])])]),t("p",[s._v("注意，EMQ X 不支持一个已经在一个集群中的节点加入另外一个集群，因为这会导致两个集群数据不一致，但支持加入过集群的节点在离开该集群后加入另一个集群。")]),s._v(" "),t("h2",{attrs:{id:"acl-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#acl-命令"}},[s._v("#")]),s._v(" acl 命令")]),s._v(" "),t("p",[s._v("重新加载 acl 规则:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl acl reload\nok\n")])])]),t("h2",{attrs:{id:"clients-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#clients-命令"}},[s._v("#")]),s._v(" clients 命令")]),s._v(" "),t("p",[s._v("clients 命令查询连接的 MQTT 客户端。")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("命令")]),s._v(" "),t("th",[s._v("描述")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("code",[s._v("clients list")])]),s._v(" "),t("td",[s._v("列出所有客户端连接")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("clients show <ClientId>")])]),s._v(" "),t("td",[s._v("查询指定 ClientId 的客户端")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("clients kick <ClientId>")])]),s._v(" "),t("td",[s._v("踢除指定 ClientId 的客户端，连接与会话将一并终结。")])])])]),s._v(" "),t("h3",{attrs:{id:"clients-list"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#clients-list"}},[s._v("#")]),s._v(" clients list")]),s._v(" "),t("p",[s._v("列出所有客户端连接:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl clients list\nClient "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mosqsub/43832-airlee.lo, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("username")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("test1, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("peername")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:62135, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("clean_start")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("keepalive")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("session_expiry_interval")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("subscriptions")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("inflight")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("awaiting_rel")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("delivered_msgs")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("enqueued_msgs")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dropped_msgs")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("connected")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("created_at")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1582249657")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("connected_at")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1582249657")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nClient "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mosqsub/44011-airlee.lo, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("username")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("test2, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("peername")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:64961, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("clean_start")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("keepalive")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("session_expiry_interval")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("subscriptions")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("inflight")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("awaiting_rel")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("delivered_msgs")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("enqueued_msgs")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dropped_msgs")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("connected")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("created_at")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1582249657")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("connected_at")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1582249657")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("disconnected_at")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1582249702")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])])]),t("p",[s._v("返回 Client 对象的属性:")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("Name")]),s._v(" "),t("th",[s._v("描述")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("username")]),s._v(" "),t("td",[s._v("用户名")])]),s._v(" "),t("tr",[t("td",[s._v("peername")]),s._v(" "),t("td",[s._v("客户端 IP 与端口")])]),s._v(" "),t("tr",[t("td",[s._v("clean_start")]),s._v(" "),t("td",[s._v("MQTT Clean Start")])]),s._v(" "),t("tr",[t("td",[s._v("keepalive")]),s._v(" "),t("td",[s._v("MQTT KeepAlive")])]),s._v(" "),t("tr",[t("td",[s._v("session_expiry_interval")]),s._v(" "),t("td",[s._v("会话过期间隔")])]),s._v(" "),t("tr",[t("td",[s._v("subscriptions")]),s._v(" "),t("td",[s._v("当前订阅数量")])]),s._v(" "),t("tr",[t("td",[s._v("inflight")]),s._v(" "),t("td",[s._v("当前正在下发的 QoS 1 和 QoS 2 的消息总数")])]),s._v(" "),t("tr",[t("td",[s._v("awaiting_rel")]),s._v(" "),t("td",[s._v("等待客户端发送 PUBREL 的 QoS2 消息数")])]),s._v(" "),t("tr",[t("td",[s._v("delivered_msgs")]),s._v(" "),t("td",[s._v("EMQ X 向此客户端转发的消息数量 (包含重传)")])]),s._v(" "),t("tr",[t("td",[s._v("enqueued_msgs")]),s._v(" "),t("td",[s._v("消息队列当前长度")])]),s._v(" "),t("tr",[t("td",[s._v("dropped_msgs")]),s._v(" "),t("td",[s._v("消息队列达到最大长度后丢弃的消息数量")])]),s._v(" "),t("tr",[t("td",[s._v("connected")]),s._v(" "),t("td",[s._v("是否在线")])]),s._v(" "),t("tr",[t("td",[s._v("created_at")]),s._v(" "),t("td",[s._v("会话创建时间戳")])]),s._v(" "),t("tr",[t("td",[s._v("connected_at")]),s._v(" "),t("td",[s._v("客户端连接时间戳")])]),s._v(" "),t("tr",[t("td",[s._v("disconnected_at")]),s._v(" "),t("td",[s._v("客户端断开连接时间戳（仅当断开连接还保留会话时才会出现）")])])])]),s._v(" "),t("h3",{attrs:{id:"clients-show"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#clients-show"}},[s._v("#")]),s._v(" clients show "),t("ClientId")],1),s._v(" "),t("p",[s._v("查询指定 ClientId 的客户端:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl clients show "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mosqsub/43832-airlee.lo"')]),s._v("\nClient "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mosqsub/43832-airlee.lo, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("username")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("test1, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("peername")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:62747, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("clean_start")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("keepalive")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("session_expiry_interval")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7200")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("subscriptions")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("inflight")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("awaiting_rel")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("delivered_msgs")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("enqueued_msgs")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dropped_msgs")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("connected")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("created_at")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1576479557")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("connected_at")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1576479557")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h3",{attrs:{id:"clients-kick"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#clients-kick"}},[s._v("#")]),s._v(" clients kick "),t("ClientId")],1),s._v(" "),t("p",[s._v("踢除指定 ClientId 的客户端:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl clients kick "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"clientid"')]),s._v("\nok\n")])])]),t("h2",{attrs:{id:"routes-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#routes-命令"}},[s._v("#")]),s._v(" routes 命令")]),s._v(" "),t("p",[s._v("routes 命令用于查询路由信息。")]),s._v(" "),t("p",[s._v("EMQ X 中路由是指主题与节点的映射关系，用于在多个节点之间路由消息。")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("命令")]),s._v(" "),t("th",[s._v("描述")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("code",[s._v("routes list")])]),s._v(" "),t("td",[s._v("列出所有路由")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("routes show <Topic>")])]),s._v(" "),t("td",[s._v("查询指定 Topic 的路由")])])])]),s._v(" "),t("h3",{attrs:{id:"routes-list"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#routes-list"}},[s._v("#")]),s._v(" routes list")]),s._v(" "),t("p",[s._v("列出所有路由:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl routes list\nt2/"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -> emqx2@127.0.0.1")]),s._v("\nt/+/x -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" emqx2@127.0.0.1,emqx@127.0.0.1\n")])])]),t("h3",{attrs:{id:"routes-show"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#routes-show"}},[s._v("#")]),s._v(" routes show "),t("Topic")],1),s._v(" "),t("p",[s._v("查询指定 Topic d的路由:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl routes show t/+/x\nt/+/x -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" emqx2@127.0.0.1,emqx@127.0.0.1\n")])])]),t("h2",{attrs:{id:"subscriptions-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#subscriptions-命令"}},[s._v("#")]),s._v(" subscriptions 命令")]),s._v(" "),t("p",[s._v("subscriptions 命令查询消息服务器的订阅 (Subscription) 表。")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("命令")]),s._v(" "),t("th",[s._v("描述")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("code",[s._v("subscriptions list")])]),s._v(" "),t("td",[s._v("列出所有订阅")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("subscriptions show <ClientId>")])]),s._v(" "),t("td",[s._v("查询指定 ClientId 客户端的订阅")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("subscriptions add <ClientId> <Topic> <QoS>")])]),s._v(" "),t("td",[s._v("手动添加静态订阅")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("subscriptions del <ClientId> <Topic>")])]),s._v(" "),t("td",[s._v("手动删除静态订阅")])])])]),s._v(" "),t("h3",{attrs:{id:"subscriptions-list"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#subscriptions-list"}},[s._v("#")]),s._v(" subscriptions list")]),s._v(" "),t("p",[s._v("列出所有订阅:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl subscriptions list\nmosqsub/91042-airlee.lo -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" t/y:1\nmosqsub/90475-airlee.lo -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" t/+/x:2\n")])])]),t("h3",{attrs:{id:"subscriptions-show"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#subscriptions-show"}},[s._v("#")]),s._v(" subscriptions show "),t("ClientId")],1),s._v(" "),t("p",[s._v("查询某个 Client 的订阅:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl subscriptions show "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mosqsub/90475-airlee.lo'")]),s._v("\nmosqsub/90475-airlee.lo -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" t/+/x:2\n")])])]),t("h3",{attrs:{id:"subscriptions-add"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#subscriptions-add"}},[s._v("#")]),s._v(" subscriptions add "),t("ClientId",[t("Topic",[t("QoS")],1)],1)],1),s._v(" "),t("p",[s._v("手动添加订阅关系:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl subscriptions "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mosqsub/90475-airlee.lo'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/world'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nok\n")])])]),t("h3",{attrs:{id:"subscriptions-del"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#subscriptions-del"}},[s._v("#")]),s._v(" subscriptions del "),t("ClientId",[t("Topic")],1)],1),s._v(" "),t("p",[s._v("手动删除订阅关系:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl subscriptions del "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mosqsub/90475-airlee.lo'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/world'")]),s._v("\nok\n")])])]),t("h2",{attrs:{id:"plugins-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#plugins-命令"}},[s._v("#")]),s._v(" plugins 命令")]),s._v(" "),t("p",[s._v("plugins 命令用于加载、卸载、查询插件应用。EMQ X 通过插件扩展认证、定制功能，插件配置位于 "),t("code",[s._v("etc/plugins/")]),s._v(" 目录下。")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("命令")]),s._v(" "),t("th",[s._v("描述")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("code",[s._v("plugins list")])]),s._v(" "),t("td",[s._v("列出全部插件 (Plugin)")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("plugins load <Plugin>")])]),s._v(" "),t("td",[s._v("加载插件 (Plugin)")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("plugins unload <Plugin>")])]),s._v(" "),t("td",[s._v("卸载插件 (Plugin)")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("plugins reload <Plugin>")])]),s._v(" "),t("td",[s._v("重载插件 (Plugin)")])])])]),s._v(" "),t("p",[s._v("当配置文件发生更改，如果需要配置立即生效，你可以执行 "),t("code",[s._v("emqx_ctl reload <Plugin\\> 命令，即使插件在配置修改时并未处于运行状态，你也应当使用此命令而不是")]),s._v("emqx_ctl load <Plugin>，因为 `emqx_ctl load <Plugin> 不会编译新的配置文件。")]),s._v(" "),t("h3",{attrs:{id:"plugins-list"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#plugins-list"}},[s._v("#")]),s._v(" plugins list")]),s._v(" "),t("p",[s._v("列出全部插件:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl plugins list\nPlugin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_auth_clientid, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("v4.0.0, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X Authentication with ClientId/Password, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPlugin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_auth_http, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("v4.0.0, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X Authentication/ACL with HTTP API, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPlugin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_auth_jwt, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("v4.0.0, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X Authentication with JWT, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPlugin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_auth_ldap, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("v4.0.0, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X Authentication/ACL with LDAP, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPlugin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_auth_mongo, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("v4.0.0, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X Authentication/ACL with MongoDB, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPlugin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_auth_mysql, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("v4.0.0, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X Authentication/ACL with MySQL, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPlugin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_auth_pgsql, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("v4.0.0, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X Authentication/ACL with PostgreSQL, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPlugin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_auth_redis, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("v4.0.0, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X Authentication/ACL with Redis, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPlugin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_auth_username, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("v4.0.0, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X Authentication with Username and Password, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPlugin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_bridge_mqtt, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("v4.0.0, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X Bridge to MQTT Broker, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPlugin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_coap, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("v4.0.0, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X CoAP Gateway, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPlugin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_dashboard, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("v4.0.0, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X Web Dashboard, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPlugin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_delayed_publish, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("v4.0.0, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X Delayed Publish, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPlugin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_lua_hook, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("v4.0.0, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X Lua Hooks, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPlugin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_lwm2m, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("v4.0.0, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X LwM2M Gateway, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPlugin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_management, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("v4.0.0, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X Management API and CLI, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPlugin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_plugin_template, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("v4.0.0, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X Plugin Template, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPlugin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_psk_file, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("v4.0.0, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQX PSK Plugin from File, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPlugin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_recon, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("v4.0.0, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X Recon Plugin, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPlugin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_reloader, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("v4.0.0, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X Reloader Plugin, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPlugin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_retainer, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("v4.0.0, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X Retainer, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPlugin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_rule_engine, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("v4.0.0, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X Rule Engine, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPlugin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_sn, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("v4.0.0, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X MQTT SN Plugin, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPlugin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_statsd, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("v4.0.0, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Statsd "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" EMQ X, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPlugin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_stomp, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("v4.0.0, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X Stomp Protocol Plugin, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPlugin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_web_hook, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("v4.0.0, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X Webhook Plugin, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("p",[s._v("插件属性:")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("Name")]),s._v(" "),t("th",[s._v("描述")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("version")]),s._v(" "),t("td",[s._v("插件版本")])]),s._v(" "),t("tr",[t("td",[s._v("description")]),s._v(" "),t("td",[s._v("插件描述")])]),s._v(" "),t("tr",[t("td",[s._v("active")]),s._v(" "),t("td",[s._v("是否已加载")])])])]),s._v(" "),t("h3",{attrs:{id:"plugins-load"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#plugins-load"}},[s._v("#")]),s._v(" plugins load "),t("Plugin")],1),s._v(" "),t("p",[s._v("加载插件:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl plugins load emqx_lua_hook\nPlugin emqx_lua_hook loaded successfully.\n")])])]),t("h3",{attrs:{id:"plugins-unload"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#plugins-unload"}},[s._v("#")]),s._v(" plugins unload "),t("Plugin")],1),s._v(" "),t("p",[s._v("卸载插件:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl plugins unload emqx_lua_hook\nPlugin emqx_lua_hook unloaded successfully.\n")])])]),t("h3",{attrs:{id:"plugins-reload"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#plugins-reload"}},[s._v("#")]),s._v(" plugins reload "),t("Plugin")],1),s._v(" "),t("p",[s._v("重载插件:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl plugins reload emqx_lua_hook\nPlugin emqx_lua_hook reloaded successfully.\n")])])]),t("h2",{attrs:{id:"modules-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#modules-命令"}},[s._v("#")]),s._v(" modules 命令")]),s._v(" "),t("p",[s._v("modules 命令用于加载、卸载和查询内置模块。")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("命令")]),s._v(" "),t("th",[s._v("描述")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("code",[s._v("modules list")])]),s._v(" "),t("td",[s._v("列出全部内置模块 (Module)")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("modules load <Module>")])]),s._v(" "),t("td",[s._v("加载内置模块 (Module)")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("modules unload <Module>")])]),s._v(" "),t("td",[s._v("卸载内置模块 (Module)")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("modules reload <Module>")])]),s._v(" "),t("td",[s._v("重载内置模块 (Module)")])])])]),s._v(" "),t("h3",{attrs:{id:"modules-list"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#modules-list"}},[s._v("#")]),s._v(" modules list")]),s._v(" "),t("p",[s._v("列出全部内置模块:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl modules list\nModule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_mod_delayed, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X Delayed Publish Module, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nModule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_mod_topic_metrics, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X Topic Metrics Module, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nModule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_mod_subscription, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X Subscription Module, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nModule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_mod_acl_internal, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X Internal ACL Module, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nModule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_mod_rewrite, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X Topic Rewrite Module, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nModule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_mod_presence, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQ X Presence Module, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h3",{attrs:{id:"modules-load"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#modules-load"}},[s._v("#")]),s._v(" modules load")]),s._v(" "),t("p",[s._v("加载内置模块:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl modules load emqx_mod_delayed\nModule emqx_mod_delayed loaded successfully.\n")])])]),t("h3",{attrs:{id:"modules-unload"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#modules-unload"}},[s._v("#")]),s._v(" modules unload")]),s._v(" "),t("p",[s._v("卸载内置模块:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl modules unload emqx_mod_delayed\nModule emqx_mod_delayed unloaded successfully.\n")])])]),t("h3",{attrs:{id:"modules-reload"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#modules-reload"}},[s._v("#")]),s._v(" modules reload")]),s._v(" "),t("p",[s._v("重载内置模块:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl modules reload emqx_mod_acl_internal\nModule emqx_mod_acl_internal reloaded successfully.\n")])])]),t("h2",{attrs:{id:"vm-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vm-命令"}},[s._v("#")]),s._v(" vm 命令")]),s._v(" "),t("p",[s._v("vm 命令用于查询 Erlang 虚拟机负载、内存、进程、IO 信息。")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("命令")]),s._v(" "),t("th",[s._v("描述")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("code",[s._v("vm")])]),s._v(" "),t("td",[s._v("等同于 vm all")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("vm all")])]),s._v(" "),t("td",[s._v("查询 VM 全部信息")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("vm load")])]),s._v(" "),t("td",[s._v("查询 VM 负载")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("vm memory")])]),s._v(" "),t("td",[s._v("查询 VM 内存")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("vm process")])]),s._v(" "),t("td",[s._v("查询 VM Erlang 进程数量")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("vm io")])]),s._v(" "),t("td",[s._v("查询 VM io 最大文件句柄")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("vm ports")])]),s._v(" "),t("td",[s._v("查询 VM 的端口")])])])]),s._v(" "),t("h3",{attrs:{id:"vm-all"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vm-all"}},[s._v("#")]),s._v(" vm all")]),s._v(" "),t("p",[s._v("查询 VM 全部信息，包括负载、内存、Erlang 进程数量等:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl vm all\ncpu/load1               "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.22")]),s._v("\ncpu/load5               "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.29")]),s._v("\ncpu/load15              "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.16")]),s._v("\nmemory/total            "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("99995208")]),s._v("\nmemory/processes        "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("38998248")]),s._v("\nmemory/processes_used   "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("38938520")]),s._v("\nmemory/system           "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("60996960")]),s._v("\nmemory/atom             "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1189073")]),s._v("\nmemory/atom_used        "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1173808")]),s._v("\nmemory/binary           "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100336")]),s._v("\nmemory/code             "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("25439961")]),s._v("\nmemory/ets              "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7161128")]),s._v("\nprocess/limit           "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2097152")]),s._v("\nprocess/count           "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("315")]),s._v("\nio/max_fds              "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10240")]),s._v("\nio/active_fds           "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nports/count             "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v("\nports/limit             "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576")]),s._v("\n")])])]),t("h3",{attrs:{id:"vm-load"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vm-load"}},[s._v("#")]),s._v(" vm load")]),s._v(" "),t("p",[s._v("查询 VM 负载:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl vm load\ncpu/load1               "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.21")]),s._v("\ncpu/load5               "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.60")]),s._v("\ncpu/load15              "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.36")]),s._v("\n")])])]),t("h3",{attrs:{id:"vm-memory"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vm-memory"}},[s._v("#")]),s._v(" vm memory")]),s._v(" "),t("p",[s._v("查询 VM 内存:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl vm memory\nmemory/total            "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23967736")]),s._v("\nmemory/processes        "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3594216")]),s._v("\nmemory/processes_used   "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3593112")]),s._v("\nmemory/system           "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20373520")]),s._v("\nmemory/atom             "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("512601")]),s._v("\nmemory/atom_used        "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("491955")]),s._v("\nmemory/binary           "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("51432")]),s._v("\nmemory/code             "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13401565")]),s._v("\nmemory/ets              "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1082848")]),s._v("\n")])])]),t("h3",{attrs:{id:"vm-process"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vm-process"}},[s._v("#")]),s._v(" vm process")]),s._v(" "),t("p",[s._v("查询 Erlang 进程数量及其限制:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl vm process\nprocess/limit           "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2097152")]),s._v("\nprocess/count           "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("314")]),s._v("\n")])])]),t("h3",{attrs:{id:"vm-io"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vm-io"}},[s._v("#")]),s._v(" vm io")]),s._v(" "),t("p",[s._v("查询文件描述符数量及其限制:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl vm io\nio/max_fds              "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10240")]),s._v("\nio/active_fds           "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])])]),t("h3",{attrs:{id:"vm-ports"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vm-ports"}},[s._v("#")]),s._v(" vm ports")]),s._v(" "),t("p",[s._v("查询端口占用数量及其限制:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl vm ports\nports/count           "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v("\nports/limit           "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576")]),s._v("\n")])])]),t("h2",{attrs:{id:"mnesia-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mnesia-命令"}},[s._v("#")]),s._v(" mnesia 命令")]),s._v(" "),t("p",[s._v("查询 mnesia 数据库系统状态。")]),s._v(" "),t("h2",{attrs:{id:"log-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#log-命令"}},[s._v("#")]),s._v(" log 命令")]),s._v(" "),t("p",[s._v("log 命令用于设置日志等级。访问 "),t("a",{attrs:{href:"http://erlang.org/doc/apps/kernel/logger_chapter.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Documentation of logger"),t("OutboundLink")],1),s._v(" 以获取详细信息")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("命令")]),s._v(" "),t("th",[s._v("描述")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("code",[s._v("log set-level <Level>")])]),s._v(" "),t("td",[s._v("设置主日志等级和所有 Handlers 日志等级")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("log primary-level")])]),s._v(" "),t("td",[s._v("查看主日志等级")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("log primary-lelvel <Level>")])]),s._v(" "),t("td",[s._v("设置主日志等级")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("log handlers list")])]),s._v(" "),t("td",[s._v("查看当前安装的所有 Handlers")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("log handlers start <HandlerId>")])]),s._v(" "),t("td",[s._v("启动某个已停止的 Handler")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("log handlers stop <HandlerId>")])]),s._v(" "),t("td",[s._v("停止某个 Handler")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("log handlers set-level <HandlerId> <Level>")])]),s._v(" "),t("td",[s._v("设置指定 Handler 的日志等级")])])])]),s._v(" "),t("p",[s._v("日志的等级由低到高分别为："),t("code",[s._v("debug | info | notice | warning | error | critical | alert | emergency")]),s._v("，日志等级越低，系统输出的日志数量越多，消耗的系统资源越大。为提高系统运行性能，默认的主日志等级是 error。")]),s._v(" "),t("h3",{attrs:{id:"log-set-level"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#log-set-level"}},[s._v("#")]),s._v(" log set-level "),t("Level")],1),s._v(" "),t("p",[s._v("设置主日志等级和所有 Handlers 日志等级:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl log set-level debug\ndebug\n")])])]),t("h3",{attrs:{id:"log-primary-level"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#log-primary-level"}},[s._v("#")]),s._v(" log primary-level")]),s._v(" "),t("p",[s._v("查看主日志等级:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl log primary-level\ndebug\n")])])]),t("h3",{attrs:{id:"log-primary-level-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#log-primary-level-2"}},[s._v("#")]),s._v(" log primary-level "),t("Level")],1),s._v(" "),t("p",[s._v("设置主日志等级:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl log primary-level info\ninfo\n")])])]),t("h3",{attrs:{id:"log-handlers-list"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#log-handlers-list"}},[s._v("#")]),s._v(" log handlers list")]),s._v(" "),t("p",[s._v("查看当前安装的所有 Handlers:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl log handlers list\nLogHandler"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ssl_handler, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("level")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("debug, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("destination")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("console, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("started"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nLogHandler"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("file, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("level")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("warning, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("destination")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("log/emqx.log, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("started"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nLogHandler"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("default, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("level")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("warning, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("destination")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("console, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("started"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h3",{attrs:{id:"log-handlers-start"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#log-handlers-start"}},[s._v("#")]),s._v(" log handlers start "),t("HandlerId")],1),s._v(" "),t("p",[s._v("启动 log handler "),t("code",[s._v("'default'")]),s._v(":")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl log handlers start default\nlog handler default started\n")])])]),t("h3",{attrs:{id:"log-handlers-stop"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#log-handlers-stop"}},[s._v("#")]),s._v(" log handlers stop "),t("HandlerId")],1),s._v(" "),t("p",[s._v("停止 log handler "),t("code",[s._v("'default'")]),s._v(":")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl log handlers stop default\nlog handler default stopped\n")])])]),t("h3",{attrs:{id:"log-handlers-set-level"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#log-handlers-set-level"}},[s._v("#")]),s._v(" log handlers set-level "),t("HandlerId",[t("Level")],1)],1),s._v(" "),t("p",[s._v("设置指定 Handler 的日志等级:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl log handlers set-level emqx_logger_handler error\nerror\n")])])]),t("h2",{attrs:{id:"trace-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#trace-命令"}},[s._v("#")]),s._v(" trace 命令")]),s._v(" "),t("p",[s._v("trace 命令用于追踪某个 Client 或 Topic，打印日志信息到文件，详情请查看 "),t("RouterLink",{attrs:{to:"/zh/backend/emqx/getting-started/log.html"}},[s._v("日志与追踪")]),s._v("。")],1),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("命令")]),s._v(" "),t("th",[s._v("描述")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("code",[s._v("trace list")])]),s._v(" "),t("td",[s._v("列出所有开启的追踪")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("trace start client <ClientId> <File> [<Level>]")])]),s._v(" "),t("td",[s._v("开启 Client 追踪，存储指定等级的日志到文件")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("trace stop client <ClientId>")])]),s._v(" "),t("td",[s._v("关闭 Client 追踪")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("trace start topic <Topic> <File> [<Level>]")])]),s._v(" "),t("td",[s._v("开启 Topic 追踪，存储指定等级的日志到文件")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("trace stop topic <Topic>")])]),s._v(" "),t("td",[s._v("关闭 Topic 追踪")])])])]),s._v(" "),t("h3",{attrs:{id:"trace-start-client"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#trace-start-client"}},[s._v("#")]),s._v(" trace start client "),t("ClientId",[t("File",[s._v(" [ "),t("Level",[s._v(" ]")])],1)],1)],1),s._v(" "),t("p",[s._v("开启 Client 追踪:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl log primary-level debug\ndebug\n    \n$ ./bin/emqx_ctl trace start client clientid log/clientid_trace.log\ntrace clientid clientid successfully\n    \n$ ./bin/emqx_ctl trace start client clientid2 log/clientid2_trace.log error\ntrace clientid clientid2 successfully\n")])])]),t("h3",{attrs:{id:"trace-stop-client"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#trace-stop-client"}},[s._v("#")]),s._v(" trace stop client "),t("ClientId")],1),s._v(" "),t("p",[s._v("关闭 Client 追踪:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl trace stop client clientid\nstop tracing clientid clientid successfully\n")])])]),t("h3",{attrs:{id:"trace-start-topic"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#trace-start-topic"}},[s._v("#")]),s._v(" trace start topic "),t("Topic",[t("File",[s._v(" [ "),t("Level",[s._v(" ]")])],1)],1)],1),s._v(" "),t("p",[s._v("开启 Topic 追踪:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl log primary-level debug\ndebug\n\n$ ./bin/emqx_ctl trace start topic topic log/topic_trace.log\ntrace topic topic successfully\n\n$ ./bin/emqx_ctl trace start topic topic2 log/topic2_trace.log error\ntrace topic topic2 successfully\n")])])]),t("h3",{attrs:{id:"trace-stop-topic"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#trace-stop-topic"}},[s._v("#")]),s._v(" trace stop topic "),t("Topic")],1),s._v(" "),t("p",[s._v("关闭 Topic 追踪:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl trace topic topic off\nstop tracing topic topic successfully\n")])])]),t("h3",{attrs:{id:"trace-list"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#trace-list"}},[s._v("#")]),s._v(" trace list")]),s._v(" "),t("p",[s._v("列出所有开启的追踪:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl trace list\nTrace "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("clientid"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("clientid2, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("level")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("error, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("destination")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"log/clientid2_trace.log"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nTrace "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("topic"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("topic2, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("level")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("error, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("destination")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"log/topic2_trace.log"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h2",{attrs:{id:"listeners"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#listeners"}},[s._v("#")]),s._v(" listeners")]),s._v(" "),t("p",[s._v("listeners 命令用于查询开启的 TCP 服务监听器。")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("命令")]),s._v(" "),t("th",[s._v("描述")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("code",[s._v("listeners")])]),s._v(" "),t("td",[s._v("查询开启的服务监听器")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("listeners stop <Identifier>")])]),s._v(" "),t("td",[s._v("停止一个监听器，"),t("code",[s._v("Identifier")]),s._v(" 式为 "),t("code",[s._v("<Protocol>[:<Transport>]:<Name>")]),s._v(", 例如 "),t("code",[s._v("mqtt:tcp:internal")]),s._v("，"),t("code",[s._v("http:management")])])])])]),s._v(" "),t("h3",{attrs:{id:"listeners-list"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#listeners-list"}},[s._v("#")]),s._v(" listeners list")]),s._v(" "),t("p",[s._v("查询开启的 TCP 服务监听器:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl listeners\nmqtt:ssl:external\n  listen_on       "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:8883\n  acceptors       "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("\n  max_conns       "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("102400")]),s._v("\n  current_conn    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  shutdown_count  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nmqtt:tcp:external\n  listen_on       "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:1883\n  acceptors       "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\n  max_conns       "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024000")]),s._v("\n  current_conn    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  shutdown_count  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nmqtt:tcp:internal\n  listen_on       "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:11883\n  acceptors       "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n  max_conns       "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024000")]),s._v("\n  current_conn    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  shutdown_count  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nhttp:dashboard\n  listen_on       "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:18083\n  acceptors       "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n  max_conns       "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v("\n  current_conn    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  shutdown_count  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nhttp:management\n  listen_on       "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:8081\n  acceptors       "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  max_conns       "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v("\n  current_conn    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  shutdown_count  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nmqtt:ws:external\n  listen_on       "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:8083\n  acceptors       "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n  max_conns       "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("102400")]),s._v("\n  current_conn    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  shutdown_count  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nmqtt:wss:external\n  listen_on       "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:8084\n  acceptors       "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n  max_conns       "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("\n  current_conn    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  shutdown_count  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),t("p",[s._v("listener 参数说明:")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("Name")]),s._v(" "),t("th",[s._v("描述")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("acceptors")]),s._v(" "),t("td",[s._v("TCP Acceptor 池")])]),s._v(" "),t("tr",[t("td",[s._v("max_conns")]),s._v(" "),t("td",[s._v("最大允许连接数")])]),s._v(" "),t("tr",[t("td",[s._v("current_conns")]),s._v(" "),t("td",[s._v("当前连接数")])]),s._v(" "),t("tr",[t("td",[s._v("shutdown_count")]),s._v(" "),t("td",[s._v("连接关闭原因统计")])])])]),s._v(" "),t("h3",{attrs:{id:"listeners-stop"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#listeners-stop"}},[s._v("#")]),s._v(" listeners stop")]),s._v(" "),t("p",[s._v("停止监听端口:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl listeners stop mqtt:tcp:external\nStop mqtt:tcp:external listener on "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:1883 successfully.\n")])])]),t("h2",{attrs:{id:"recon-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#recon-命令"}},[s._v("#")]),s._v(" recon 命令")]),s._v(" "),t("p",[s._v("EMQ X 的 recon 命令基于 Erlang Recon 库实现，用于帮助 DevOps 人员诊断生产节点中的问题，普通用户无需关心。使用 recon 命令会耗费一定的性能，请谨慎使用。")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("命令")]),s._v(" "),t("th",[s._v("描述")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("code",[s._v("recon memory")])]),s._v(" "),t("td",[t("a",{attrs:{href:"http://ferd.github.io/recon/recon_alloc.html#memory-2",target:"_blank",rel:"noopener noreferrer"}},[s._v("recon_alloc:memory/2"),t("OutboundLink")],1)])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("recon allocated")])]),s._v(" "),t("td",[t("a",{attrs:{href:"http://ferd.github.io/recon/recon_alloc.html#memory-2",target:"_blank",rel:"noopener noreferrer"}},[s._v("recon_alloc:memory (allocated_types, current/max)"),t("OutboundLink")],1)])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("recon bin_leak")])]),s._v(" "),t("td",[t("a",{attrs:{href:"http://ferd.github.io/recon/recon.html#bin_leak-1",target:"_blank",rel:"noopener noreferrer"}},[s._v("recon:bin_leak (100)"),t("OutboundLink")],1)])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("recon node_stats")])]),s._v(" "),t("td",[t("a",{attrs:{href:"http://ferd.github.io/recon/recon.html#node_stats_print-2",target:"_blank",rel:"noopener noreferrer"}},[s._v("recon:node_stats_print(10, 1000)"),t("OutboundLink")],1)])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("recon remote_load Mod")])]),s._v(" "),t("td",[t("a",{attrs:{href:"http://ferd.github.io/recon/recon.html#remote_load-1",target:"_blank",rel:"noopener noreferrer"}},[s._v("recon:remote_load (Mod)"),t("OutboundLink")],1)])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("recon proc_count Attr N")])]),s._v(" "),t("td",[t("a",{attrs:{href:"http://ferd.github.io/recon/recon.html#proc_count-2",target:"_blank",rel:"noopener noreferrer"}},[s._v("recon:proc_count(Attr, N)"),t("OutboundLink")],1)])])])]),s._v(" "),t("p",[s._v("访问 "),t("a",{attrs:{href:"http://ferd.github.io/recon/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Documentation for recon"),t("OutboundLink")],1),s._v(" 以获取详细信息。")]),s._v(" "),t("h2",{attrs:{id:"retainer-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#retainer-命令"}},[s._v("#")]),s._v(" retainer 命令")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("命令")]),s._v(" "),t("th",[s._v("描述")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("code",[s._v("retainer info")])]),s._v(" "),t("td",[s._v("显示保留消息的数量")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("retainer topics")])]),s._v(" "),t("td",[s._v("显示当前存储的保留消息的所有主题")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("retainer clean")])]),s._v(" "),t("td",[s._v("清除所有保留的消息")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("retainer clean <Topic>")])]),s._v(" "),t("td",[s._v("清除指定的主题下的保留的消息")])])])]),s._v(" "),t("h3",{attrs:{id:"retainer-info"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#retainer-info"}},[s._v("#")]),s._v(" retainer info")]),s._v(" "),t("p",[s._v("显示保留消息的数量:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl retainer info\nretained/total: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n")])])]),t("h3",{attrs:{id:"retainer-topics"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#retainer-topics"}},[s._v("#")]),s._v(" retainer topics")]),s._v(" "),t("p",[s._v("显示当前存储的保留消息的所有主题:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl retainer topics\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$SYS")]),s._v("/brokers/emqx@127.0.0.1/version\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$SYS")]),s._v("/brokers/emqx@127.0.0.1/sysdescr\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$SYS")]),s._v("/brokers\n")])])]),t("h3",{attrs:{id:"retainer-clean"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#retainer-clean"}},[s._v("#")]),s._v(" retainer clean")]),s._v(" "),t("p",[s._v("清除所有保留的消息:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl retainer clean\nCleaned "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" retained messages\n")])])]),t("h3",{attrs:{id:"retainer-clean-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#retainer-clean-2"}},[s._v("#")]),s._v(" retainer clean "),t("Topic")],1),s._v(" "),t("p",[s._v("清除指定的主题下的保留的消息:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl retainer clean topic\nCleaned "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" retained messages\n")])])]),t("h2",{attrs:{id:"admins-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#admins-命令"}},[s._v("#")]),s._v(" admins 命令")]),s._v(" "),t("p",[s._v("用于创建、删除管理员账号，重置管理员密码。")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("命令")]),s._v(" "),t("th",[s._v("描述")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("code",[s._v("admins add <Username> <Password> <Tags>")])]),s._v(" "),t("td",[s._v("创建 admin 账号")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("admins passwd <Username> <Password>")])]),s._v(" "),t("td",[s._v("重置 admin 密码")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("admins del <Username>")])]),s._v(" "),t("td",[s._v("删除 admin 账号")])])])]),s._v(" "),t("h3",{attrs:{id:"admins-add"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#admins-add"}},[s._v("#")]),s._v(" admins add "),t("Username",[t("Password",[t("Tags")],1)],1)],1),s._v(" "),t("p",[s._v("创建 admin 账户:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl admins "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" root public "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\nok\n")])])]),t("h3",{attrs:{id:"admins-passwd"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#admins-passwd"}},[s._v("#")]),s._v(" admins passwd "),t("Username",[t("Password")],1)],1),s._v(" "),t("p",[s._v("重置 admin 账户密码:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl admins "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v(" root private\nok\n")])])]),t("h3",{attrs:{id:"admins-del"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#admins-del"}},[s._v("#")]),s._v(" admins del "),t("Username")],1),s._v(" "),t("p",[s._v("删除 admin 账户:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl admins del root\nok\n")])])]),t("h2",{attrs:{id:"规则引擎-rule-engine-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#规则引擎-rule-engine-命令"}},[s._v("#")]),s._v(" 规则引擎(rule engine) 命令")]),s._v(" "),t("h3",{attrs:{id:"rules-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rules-命令"}},[s._v("#")]),s._v(" rules 命令")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("命令")]),s._v(" "),t("th",[s._v("描述")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("code",[s._v("rules list")])]),s._v(" "),t("td",[s._v("List all rules")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("rules show <RuleId>")])]),s._v(" "),t("td",[s._v("Show a rule")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("rules create <sql> <actions> [-d [<descr>]]")])]),s._v(" "),t("td",[s._v("Create a rule")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("rules delete <RuleId>")])]),s._v(" "),t("td",[s._v("Delete a rule")])])])]),s._v(" "),t("h4",{attrs:{id:"rules-create"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rules-create"}},[s._v("#")]),s._v(" rules create")]),s._v(" "),t("p",[s._v("创建一个新的规则。参数:")]),s._v(" "),t("ul",[t("li",[t("em",[t("code",[s._v("<sql>")])]),s._v(": 规则 SQL")]),s._v(" "),t("li",[t("em",[t("code",[s._v("<actions>")])]),s._v(": JSON 格式的动作列表")]),s._v(" "),t("li",[t("em",[t("code",[s._v("-d <descr>")])]),s._v(": 可选，规则描述信息")])]),s._v(" "),t("p",[s._v("使用举例:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 创建一个测试规则，简单打印所有发送到 't/a' 主题的消息内容")]),s._v("\n$ ./bin/emqx_ctl rules create "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'select * from \"t/a\"'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'[{"name":"inspect", "params": {"a": 1}}]\'')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -d "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Rule for debug'")]),s._v("\n\nRule rule:9a6a725d created\n")])])]),t("p",[s._v("上例创建了一个 ID 为 "),t("code",[s._v("rule:9a6a725d")]),s._v(" 的规则，动作列表里只有一个动作：动作名为 inspect，动作的参数是\n"),t("code",[s._v('{"a": 1}')]),s._v("。")]),s._v(" "),t("h4",{attrs:{id:"rules-list"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rules-list"}},[s._v("#")]),s._v(" rules list")]),s._v(" "),t("p",[s._v("列出当前所有的规则:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl rules list\n\nrule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rule:9a6a725d'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("for")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'['")]),s._v("t/a"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("']'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("rawsql")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'select * from \"t/a\"'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("actions")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"metrics"')]),s._v(":"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".,"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"inspect"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"params"')]),s._v(":"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("metrics")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("., "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("enabled")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'true'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Rule for debug'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h4",{attrs:{id:"rules-show"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rules-show"}},[s._v("#")]),s._v(" rules show")]),s._v(" "),t("p",[s._v("查询规则:")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("## 查询 RuleID 为 'rule:9a6a725d' 的规则\n$ ./bin/emqx_ctl rules show 'rule:9a6a725d'\n\nrule(id='rule:9a6a725d', for='['t/a']', rawsql='select * from \"t/a\"', actions=[{\"metrics\":...,\"name\":\"inspect\",\"params\":...}], metrics=..., enabled='true', description='Rule for debug')\n")])])]),t("h4",{attrs:{id:"rules-delete"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rules-delete"}},[s._v("#")]),s._v(" rules delete")]),s._v(" "),t("p",[s._v("删除规则:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 删除 RuleID 为 'rule:9a6a725d' 的规则")]),s._v("\n$ ./bin/emqx_ctl rules delete "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rule:9a6a725d'")]),s._v("\n\nok\n")])])]),t("h3",{attrs:{id:"rule-actions-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rule-actions-命令"}},[s._v("#")]),s._v(" rule-actions 命令")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("命令")]),s._v(" "),t("th",[s._v("描述")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("code",[s._v("rule-actions list")])]),s._v(" "),t("td",[s._v("List actions")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("rule-actions show <ActionId>")])]),s._v(" "),t("td",[s._v("Show a rule action")])])])]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),t("p",[s._v("动作可以由 EMQ X 内置(称为系统内置动作)，或者由 EMQ X 插件编写，但不能通过 CLI/API 添加或删除。")])]),s._v(" "),t("h4",{attrs:{id:"rule-actions-show"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rule-actions-show"}},[s._v("#")]),s._v(" rule-actions show")]),s._v(" "),t("p",[s._v("查询动作:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 查询名为 'inspect' 的动作")]),s._v("\n$ ./bin/emqx_ctl rule-actions show "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'inspect'")]),s._v("\n\naction"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'inspect'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'emqx_rule_engine'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("types")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", title "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Inspect (debug)'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Inspect the details of action params for debug purpose'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h4",{attrs:{id:"rule-actions-list"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rule-actions-list"}},[s._v("#")]),s._v(" rule-actions list")]),s._v(" "),t("p",[s._v("列出符合条件的动作:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 列出当前所有的动作")]),s._v("\n$ ./bin/emqx_ctl rule-actions list\n\naction"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'data_to_rabbit'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'emqx_bridge_rabbit'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("types")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("bridge_rabbit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", title "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Data bridge to RabbitMQ'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Store Data to Kafka'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\naction"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'data_to_timescaledb'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'emqx_backend_pgsql'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("types")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("timescaledb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", title "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Data to TimescaleDB'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Store data to TimescaleDB'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])])]),t("h3",{attrs:{id:"resources-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#resources-命令"}},[s._v("#")]),s._v(" resources 命令")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("命令")]),s._v(" "),t("th",[s._v("描述")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("code",[s._v("resources create <type> [-c [<config>]] [-d [<descr>]]")])]),s._v(" "),t("td",[s._v("Create a resource")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("resources list [-t <ResourceType>]")])]),s._v(" "),t("td",[s._v("List resources")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("resources show <ResourceId>")])]),s._v(" "),t("td",[s._v("Show a resource")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("resources delete <ResourceId>")])]),s._v(" "),t("td",[s._v("Delete a resource")])])])]),s._v(" "),t("h4",{attrs:{id:"resources-create"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#resources-create"}},[s._v("#")]),s._v(" resources create")]),s._v(" "),t("p",[s._v("创建一个新的资源，参数:")]),s._v(" "),t("ul",[t("li",[s._v("type: 资源类型")]),s._v(" "),t("li",[s._v("-c config: JSON 格式的配置")]),s._v(" "),t("li",[s._v("-d descr: 可选，资源的描述")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl resources create "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'web_hook'")]),s._v(" -c "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{"url": "http://host-name/chats"}\'')]),s._v(" -d "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'forward msgs to host-name/chats'")]),s._v("\n\nResource resource:a7a38187 created\n")])])]),t("h4",{attrs:{id:"resources-list"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#resources-list"}},[s._v("#")]),s._v(" resources list")]),s._v(" "),t("p",[s._v("列出当前所有的资源:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl resources list\n\nresource"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'resource:a7a38187'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'web_hook'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("config")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#{<<"url">> => <<"http://host-name/chats">>}, status=#{is_alive => false}, description=\'forward msgs to host-name/chats\')')]),s._v("\n")])])]),t("p",[s._v("列出当前某个类型的资源:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl resources list --type"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'web_hook'")]),s._v("\n\nresource"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'resource:a7a38187'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'web_hook'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("config")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#{<<"url">> => <<"http://host-name/chats">>}, status=#{is_alive => false}, description=\'forward msgs to host-name/chats\')')]),s._v("\n")])])]),t("h4",{attrs:{id:"resources-show"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#resources-show"}},[s._v("#")]),s._v(" resources show")]),s._v(" "),t("p",[s._v("查询资源:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl resources show "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'resource:a7a38187'")]),s._v("\n\nresource"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'resource:a7a38187'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'web_hook'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("config")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#{<<"url">> => <<"http://host-name/chats">>}, status=#{is_alive => false}, description=\'forward msgs to host-name/chats\')')]),s._v("\n")])])]),t("h4",{attrs:{id:"resources-delete"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#resources-delete"}},[s._v("#")]),s._v(" resources delete")]),s._v(" "),t("p",[s._v("删除资源:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl resources delete "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'resource:a7a38187'")]),s._v("\n\nok\n")])])]),t("h3",{attrs:{id:"resource-types-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#resource-types-命令"}},[s._v("#")]),s._v(" resource-types 命令")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("命令")]),s._v(" "),t("th",[s._v("描述")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("resource-types list")]),s._v(" "),t("td",[s._v("List all resource-types")])]),s._v(" "),t("tr",[t("td",[s._v("resource-types show "),t("code",[s._v("<Type>")])]),s._v(" "),t("td",[s._v("Show a resource-type")])])])]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),t("p",[s._v("资源类型可以由 EMQ X 内置(称为系统内置资源类型)，或者由 EMQ X 插件编写，但不能通过 CLI/API 添加或删除。")])]),s._v(" "),t("h4",{attrs:{id:"resource-types-list"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#resource-types-list"}},[s._v("#")]),s._v(" resource-types list")]),s._v(" "),t("p",[s._v("列出当前所有的资源类型:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("./bin/emqx_ctl resource-types list\n\nresource_type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'backend_mongo_rs'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("provider")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'emqx_backend_mongo'")]),s._v(", title "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'MongoDB Replica Set Mode'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'MongoDB Replica Set Mode'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nresource_type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'backend_cassa'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("provider")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'emqx_backend_cassa'")]),s._v(", title "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Cassandra'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Cassandra Database'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])])]),t("h4",{attrs:{id:"resource-types-show"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#resource-types-show"}},[s._v("#")]),s._v(" resource-types show")]),s._v(" "),t("p",[s._v("查询资源类型:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./bin/emqx_ctl resource-types show backend_mysql\n\nresource_type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'backend_mysql'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("provider")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'emqx_backend_mysql'")]),s._v(", title "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'MySQL'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'MySQL Database'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h2",{attrs:{id:"与规则引擎相关的状态、统计指标和告警"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#与规则引擎相关的状态、统计指标和告警"}},[s._v("#")]),s._v(" 与规则引擎相关的状态、统计指标和告警")]),s._v(" "),t("h3",{attrs:{id:"规则状态和统计指标"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#规则状态和统计指标"}},[s._v("#")]),s._v(" 规则状态和统计指标")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://dgiot-1253666439.cos.ap-shanghai-fsi.myqcloud.com/develop_png/zh_CN/assets/rule_metrics.png",alt:"rule_metrics.png"}})]),s._v(" "),t("ul",[t("li",[s._v("已命中: 规则命中(规则 SQL 匹配成功)的次数，")]),s._v(" "),t("li",[s._v("命中速度: 规则命中的速度(次/秒)")]),s._v(" "),t("li",[s._v("最大命中速度: 规则命中速度的峰值(次/秒)")]),s._v(" "),t("li",[s._v("5分钟平均速度: 5分钟内规则的平均命中速度(次/秒)")])]),s._v(" "),t("h3",{attrs:{id:"动作状态和统计指标"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#动作状态和统计指标"}},[s._v("#")]),s._v(" 动作状态和统计指标")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://dgiot-1253666439.cos.ap-shanghai-fsi.myqcloud.com/develop_png/zh_CN/assets/action_metrics.png",alt:"action_metrics.png"}})]),s._v(" "),t("ul",[t("li",[s._v("成功: 动作执行成功次数")]),s._v(" "),t("li",[s._v("失败: 动作执行失败次数")])]),s._v(" "),t("h3",{attrs:{id:"资源状态和告警"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#资源状态和告警"}},[s._v("#")]),s._v(" 资源状态和告警")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://dgiot-1253666439.cos.ap-shanghai-fsi.myqcloud.com/develop_png/zh_CN/assets/resource_status.png",alt:"resource_status.png"}})]),s._v(" "),t("ul",[t("li",[s._v("可用: 资源可用")]),s._v(" "),t("li",[s._v("不可用: 资源不可用(比如数据库连接断开)")])])])}),[],!1,null,null,null);a.default=r.exports}}]);