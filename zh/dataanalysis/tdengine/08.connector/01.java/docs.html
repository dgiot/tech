<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java Connector | 数蛙技术团队</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
    <script type="text/javascript" src="https://s9.cnzz.com/z_stat.php?id=1279876880&amp;web_id=1279876880"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    <meta name="description" content="数蛙科技是一家致力于提供物联网垂直领域应用使能平台及解决方案的创新型公司。">
    <meta name="referrer" content="never">
    
    <link rel="preload" href="/assets/css/0.styles.30e04dfa.css" as="style"><link rel="preload" href="/assets/js/app.cae30ac7.js" as="script"><link rel="preload" href="/assets/js/7.5b24c3a5.js" as="script"><link rel="preload" href="/assets/js/5.7fd7e714.js" as="script"><link rel="preload" href="/assets/js/78.52b15e1d.js" as="script"><link rel="prefetch" href="/assets/js/10.62caf3d8.js"><link rel="prefetch" href="/assets/js/100.41a991cf.js"><link rel="prefetch" href="/assets/js/101.793606ac.js"><link rel="prefetch" href="/assets/js/102.1ab08e07.js"><link rel="prefetch" href="/assets/js/103.d74d27d5.js"><link rel="prefetch" href="/assets/js/104.e8db623f.js"><link rel="prefetch" href="/assets/js/105.0e30d8c3.js"><link rel="prefetch" href="/assets/js/106.6326febd.js"><link rel="prefetch" href="/assets/js/107.3d2a98b8.js"><link rel="prefetch" href="/assets/js/108.89ef46ac.js"><link rel="prefetch" href="/assets/js/109.ab726492.js"><link rel="prefetch" href="/assets/js/11.5a838491.js"><link rel="prefetch" href="/assets/js/110.0e7972ba.js"><link rel="prefetch" href="/assets/js/111.95d55777.js"><link rel="prefetch" href="/assets/js/112.54168525.js"><link rel="prefetch" href="/assets/js/113.0fde5c8d.js"><link rel="prefetch" href="/assets/js/114.d25bfa2a.js"><link rel="prefetch" href="/assets/js/115.0b6dfb6b.js"><link rel="prefetch" href="/assets/js/116.fc1e77bc.js"><link rel="prefetch" href="/assets/js/117.92a2bbaa.js"><link rel="prefetch" href="/assets/js/118.82481221.js"><link rel="prefetch" href="/assets/js/119.8bc466f5.js"><link rel="prefetch" href="/assets/js/12.f4c8bad1.js"><link rel="prefetch" href="/assets/js/120.81a07022.js"><link rel="prefetch" href="/assets/js/121.46d33a3b.js"><link rel="prefetch" href="/assets/js/122.76ea41a0.js"><link rel="prefetch" href="/assets/js/123.c5a41494.js"><link rel="prefetch" href="/assets/js/124.fffd6a9f.js"><link rel="prefetch" href="/assets/js/125.32d8e72f.js"><link rel="prefetch" href="/assets/js/126.3dbf9d44.js"><link rel="prefetch" href="/assets/js/127.2a398482.js"><link rel="prefetch" href="/assets/js/128.ddea611a.js"><link rel="prefetch" href="/assets/js/129.dc9fb181.js"><link rel="prefetch" href="/assets/js/13.1a4ce8c3.js"><link rel="prefetch" href="/assets/js/130.0afb6681.js"><link rel="prefetch" href="/assets/js/131.17fe9c4d.js"><link rel="prefetch" href="/assets/js/132.283a6aa8.js"><link rel="prefetch" href="/assets/js/133.97b7f282.js"><link rel="prefetch" href="/assets/js/134.e31416bb.js"><link rel="prefetch" href="/assets/js/135.c923ead8.js"><link rel="prefetch" href="/assets/js/136.d5c091b4.js"><link rel="prefetch" href="/assets/js/137.327e04ac.js"><link rel="prefetch" href="/assets/js/138.7b915dd1.js"><link rel="prefetch" href="/assets/js/139.95c3ca05.js"><link rel="prefetch" href="/assets/js/14.6b2cf9a8.js"><link rel="prefetch" href="/assets/js/140.7eb03ee4.js"><link rel="prefetch" href="/assets/js/141.bf6a3d71.js"><link rel="prefetch" href="/assets/js/142.4bb62b00.js"><link rel="prefetch" href="/assets/js/143.19ab508d.js"><link rel="prefetch" href="/assets/js/144.b1786c02.js"><link rel="prefetch" href="/assets/js/145.68281933.js"><link rel="prefetch" href="/assets/js/146.0ae27f9d.js"><link rel="prefetch" href="/assets/js/147.87740ce3.js"><link rel="prefetch" href="/assets/js/148.d0efa2ce.js"><link rel="prefetch" href="/assets/js/149.b28f14bb.js"><link rel="prefetch" href="/assets/js/15.362a57ae.js"><link rel="prefetch" href="/assets/js/150.b2f1d371.js"><link rel="prefetch" href="/assets/js/151.d7fd9324.js"><link rel="prefetch" href="/assets/js/152.b33c63aa.js"><link rel="prefetch" href="/assets/js/153.c68c20e5.js"><link rel="prefetch" href="/assets/js/154.75978296.js"><link rel="prefetch" href="/assets/js/155.b2573e32.js"><link rel="prefetch" href="/assets/js/156.d20364e8.js"><link rel="prefetch" href="/assets/js/157.ff541e45.js"><link rel="prefetch" href="/assets/js/158.9675e1e9.js"><link rel="prefetch" href="/assets/js/159.19bebba7.js"><link rel="prefetch" href="/assets/js/16.3e326f12.js"><link rel="prefetch" href="/assets/js/160.1ab861f0.js"><link rel="prefetch" href="/assets/js/161.f9e18eae.js"><link rel="prefetch" href="/assets/js/162.42d2f459.js"><link rel="prefetch" href="/assets/js/163.06bf73b3.js"><link rel="prefetch" href="/assets/js/164.f1cb2f25.js"><link rel="prefetch" href="/assets/js/165.06519f26.js"><link rel="prefetch" href="/assets/js/166.ab96e3af.js"><link rel="prefetch" href="/assets/js/167.c9979ea1.js"><link rel="prefetch" href="/assets/js/168.05e77523.js"><link rel="prefetch" href="/assets/js/169.8238e03f.js"><link rel="prefetch" href="/assets/js/17.d04ffa32.js"><link rel="prefetch" href="/assets/js/170.8997bb8d.js"><link rel="prefetch" href="/assets/js/171.78871d9a.js"><link rel="prefetch" href="/assets/js/172.4cd87fed.js"><link rel="prefetch" href="/assets/js/173.e330b0b0.js"><link rel="prefetch" href="/assets/js/174.2404ca4c.js"><link rel="prefetch" href="/assets/js/175.13c08107.js"><link rel="prefetch" href="/assets/js/176.766a53ae.js"><link rel="prefetch" href="/assets/js/177.6da8df96.js"><link rel="prefetch" href="/assets/js/178.2d676bc2.js"><link rel="prefetch" href="/assets/js/179.9bcd85c7.js"><link rel="prefetch" href="/assets/js/18.e704569f.js"><link rel="prefetch" href="/assets/js/180.6451ac33.js"><link rel="prefetch" href="/assets/js/181.92dd325d.js"><link rel="prefetch" href="/assets/js/182.c8f7207f.js"><link rel="prefetch" href="/assets/js/183.78d7312d.js"><link rel="prefetch" href="/assets/js/184.3317c1cb.js"><link rel="prefetch" href="/assets/js/185.8128eb7f.js"><link rel="prefetch" href="/assets/js/186.eb06ccad.js"><link rel="prefetch" href="/assets/js/187.0d17001f.js"><link rel="prefetch" href="/assets/js/188.833657d7.js"><link rel="prefetch" href="/assets/js/189.026cb254.js"><link rel="prefetch" href="/assets/js/19.d23d7910.js"><link rel="prefetch" href="/assets/js/190.7d76024c.js"><link rel="prefetch" href="/assets/js/191.419b5193.js"><link rel="prefetch" href="/assets/js/192.451e0725.js"><link rel="prefetch" href="/assets/js/193.2db7e1a7.js"><link rel="prefetch" href="/assets/js/194.fb32b747.js"><link rel="prefetch" href="/assets/js/195.ed4393da.js"><link rel="prefetch" href="/assets/js/196.90fe2b30.js"><link rel="prefetch" href="/assets/js/197.cfb5c64c.js"><link rel="prefetch" href="/assets/js/198.ae595b31.js"><link rel="prefetch" href="/assets/js/199.cf1553ba.js"><link rel="prefetch" href="/assets/js/20.f1aacde5.js"><link rel="prefetch" href="/assets/js/200.8ed4a41c.js"><link rel="prefetch" href="/assets/js/201.f2e9d0e6.js"><link rel="prefetch" href="/assets/js/202.b8d8f1fe.js"><link rel="prefetch" href="/assets/js/203.7b7f0e44.js"><link rel="prefetch" href="/assets/js/204.376f9524.js"><link rel="prefetch" href="/assets/js/205.e30060b9.js"><link rel="prefetch" href="/assets/js/206.30504235.js"><link rel="prefetch" href="/assets/js/207.7edd3f76.js"><link rel="prefetch" href="/assets/js/208.e4a955ec.js"><link rel="prefetch" href="/assets/js/209.dbcd642e.js"><link rel="prefetch" href="/assets/js/21.d6352ddc.js"><link rel="prefetch" href="/assets/js/210.9b10a244.js"><link rel="prefetch" href="/assets/js/211.336f4943.js"><link rel="prefetch" href="/assets/js/212.6ed2530c.js"><link rel="prefetch" href="/assets/js/213.8b2a89e2.js"><link rel="prefetch" href="/assets/js/214.1c25da5f.js"><link rel="prefetch" href="/assets/js/215.11173b07.js"><link rel="prefetch" href="/assets/js/216.5a124825.js"><link rel="prefetch" href="/assets/js/217.eca4ffaf.js"><link rel="prefetch" href="/assets/js/218.b6034e1c.js"><link rel="prefetch" href="/assets/js/219.a013ac0e.js"><link rel="prefetch" href="/assets/js/22.b814d20f.js"><link rel="prefetch" href="/assets/js/220.9c6b0501.js"><link rel="prefetch" href="/assets/js/221.0c735561.js"><link rel="prefetch" href="/assets/js/222.2f1f4bae.js"><link rel="prefetch" href="/assets/js/223.ec13dcba.js"><link rel="prefetch" href="/assets/js/224.dd70249c.js"><link rel="prefetch" href="/assets/js/225.ec03833b.js"><link rel="prefetch" href="/assets/js/226.9325f80c.js"><link rel="prefetch" href="/assets/js/227.81e9482a.js"><link rel="prefetch" href="/assets/js/228.01c55f35.js"><link rel="prefetch" href="/assets/js/229.d3a8c831.js"><link rel="prefetch" href="/assets/js/23.742167d4.js"><link rel="prefetch" href="/assets/js/230.60b58e8b.js"><link rel="prefetch" href="/assets/js/231.6ea81e3f.js"><link rel="prefetch" href="/assets/js/232.0c2f3bc0.js"><link rel="prefetch" href="/assets/js/233.c0ae0625.js"><link rel="prefetch" href="/assets/js/234.7d63076b.js"><link rel="prefetch" href="/assets/js/235.318c482b.js"><link rel="prefetch" href="/assets/js/236.ee0e2477.js"><link rel="prefetch" href="/assets/js/237.478c2297.js"><link rel="prefetch" href="/assets/js/238.50084307.js"><link rel="prefetch" href="/assets/js/239.fa0b9b55.js"><link rel="prefetch" href="/assets/js/24.fe4b1f8e.js"><link rel="prefetch" href="/assets/js/240.c18aaccb.js"><link rel="prefetch" href="/assets/js/241.806c1aa8.js"><link rel="prefetch" href="/assets/js/242.47a0e807.js"><link rel="prefetch" href="/assets/js/243.eb9f89c1.js"><link rel="prefetch" href="/assets/js/244.a7e88a2c.js"><link rel="prefetch" href="/assets/js/245.1bb60083.js"><link rel="prefetch" href="/assets/js/246.da3162a3.js"><link rel="prefetch" href="/assets/js/247.10a1c0fa.js"><link rel="prefetch" href="/assets/js/248.54c33457.js"><link rel="prefetch" href="/assets/js/249.cdfdd5d7.js"><link rel="prefetch" href="/assets/js/25.eaf90b73.js"><link rel="prefetch" href="/assets/js/250.693dfb9e.js"><link rel="prefetch" href="/assets/js/251.402ce2ae.js"><link rel="prefetch" href="/assets/js/252.cdcd583c.js"><link rel="prefetch" href="/assets/js/253.5a4db6bb.js"><link rel="prefetch" href="/assets/js/254.d5887e14.js"><link rel="prefetch" href="/assets/js/255.0f35be01.js"><link rel="prefetch" href="/assets/js/256.c56801e4.js"><link rel="prefetch" href="/assets/js/257.9bfca7bb.js"><link rel="prefetch" href="/assets/js/258.f05e2b00.js"><link rel="prefetch" href="/assets/js/259.2393514e.js"><link rel="prefetch" href="/assets/js/26.30dcc348.js"><link rel="prefetch" href="/assets/js/260.26d66ac5.js"><link rel="prefetch" href="/assets/js/261.6ae6f89c.js"><link rel="prefetch" href="/assets/js/262.5c88302d.js"><link rel="prefetch" href="/assets/js/263.6c474bf6.js"><link rel="prefetch" href="/assets/js/264.5137ed8c.js"><link rel="prefetch" href="/assets/js/265.29a169ba.js"><link rel="prefetch" href="/assets/js/266.e8b9590c.js"><link rel="prefetch" href="/assets/js/267.fb31cd45.js"><link rel="prefetch" href="/assets/js/268.4a646815.js"><link rel="prefetch" href="/assets/js/269.a600c8bc.js"><link rel="prefetch" href="/assets/js/27.6219b1fb.js"><link rel="prefetch" href="/assets/js/270.11e5a6ff.js"><link rel="prefetch" href="/assets/js/271.75303dc2.js"><link rel="prefetch" href="/assets/js/272.27ed9b64.js"><link rel="prefetch" href="/assets/js/273.e976b7f0.js"><link rel="prefetch" href="/assets/js/274.b7f08f46.js"><link rel="prefetch" href="/assets/js/275.ed766a1a.js"><link rel="prefetch" href="/assets/js/276.90d591a7.js"><link rel="prefetch" href="/assets/js/277.9b96d5fa.js"><link rel="prefetch" href="/assets/js/278.0f59063b.js"><link rel="prefetch" href="/assets/js/28.fb38ecdf.js"><link rel="prefetch" href="/assets/js/29.4ef5adc0.js"><link rel="prefetch" href="/assets/js/30.ead0b8ea.js"><link rel="prefetch" href="/assets/js/31.f8831c2f.js"><link rel="prefetch" href="/assets/js/32.1bf8b2f8.js"><link rel="prefetch" href="/assets/js/33.01e7cfc2.js"><link rel="prefetch" href="/assets/js/34.d6942c64.js"><link rel="prefetch" href="/assets/js/35.ad35a726.js"><link rel="prefetch" href="/assets/js/36.7c253cef.js"><link rel="prefetch" href="/assets/js/37.4d561a56.js"><link rel="prefetch" href="/assets/js/38.f819d8f2.js"><link rel="prefetch" href="/assets/js/39.08770cfa.js"><link rel="prefetch" href="/assets/js/40.d0cc0175.js"><link rel="prefetch" href="/assets/js/41.a74db857.js"><link rel="prefetch" href="/assets/js/42.71264edc.js"><link rel="prefetch" href="/assets/js/43.fbb3f834.js"><link rel="prefetch" href="/assets/js/44.fff24446.js"><link rel="prefetch" href="/assets/js/45.0257073c.js"><link rel="prefetch" href="/assets/js/46.773a77a4.js"><link rel="prefetch" href="/assets/js/47.a7ad5d95.js"><link rel="prefetch" href="/assets/js/48.93b47b97.js"><link rel="prefetch" href="/assets/js/49.35a05694.js"><link rel="prefetch" href="/assets/js/50.c926dde9.js"><link rel="prefetch" href="/assets/js/51.122b50e9.js"><link rel="prefetch" href="/assets/js/52.7ec3b3e9.js"><link rel="prefetch" href="/assets/js/53.821a6e1a.js"><link rel="prefetch" href="/assets/js/54.b6528d66.js"><link rel="prefetch" href="/assets/js/55.5cab16db.js"><link rel="prefetch" href="/assets/js/56.d9b6e4f9.js"><link rel="prefetch" href="/assets/js/57.86b52e5f.js"><link rel="prefetch" href="/assets/js/58.c3429ecd.js"><link rel="prefetch" href="/assets/js/59.85e56f88.js"><link rel="prefetch" href="/assets/js/6.300c849a.js"><link rel="prefetch" href="/assets/js/60.f5248f17.js"><link rel="prefetch" href="/assets/js/61.0298b597.js"><link rel="prefetch" href="/assets/js/62.4cd45563.js"><link rel="prefetch" href="/assets/js/63.8afb6a57.js"><link rel="prefetch" href="/assets/js/64.0defe1fa.js"><link rel="prefetch" href="/assets/js/65.6b0afb59.js"><link rel="prefetch" href="/assets/js/66.39ee9f9f.js"><link rel="prefetch" href="/assets/js/67.4f5c6701.js"><link rel="prefetch" href="/assets/js/68.c4eb2d25.js"><link rel="prefetch" href="/assets/js/69.50c1863d.js"><link rel="prefetch" href="/assets/js/70.72fbcd1c.js"><link rel="prefetch" href="/assets/js/71.c07a0fd2.js"><link rel="prefetch" href="/assets/js/72.c1e58979.js"><link rel="prefetch" href="/assets/js/73.77ebe771.js"><link rel="prefetch" href="/assets/js/74.dfcbe292.js"><link rel="prefetch" href="/assets/js/75.3eb8823c.js"><link rel="prefetch" href="/assets/js/76.223106ba.js"><link rel="prefetch" href="/assets/js/77.0f2bc4f2.js"><link rel="prefetch" href="/assets/js/79.7673e049.js"><link rel="prefetch" href="/assets/js/8.cb709667.js"><link rel="prefetch" href="/assets/js/80.abf84cfb.js"><link rel="prefetch" href="/assets/js/81.691e80c2.js"><link rel="prefetch" href="/assets/js/82.aa4a47ff.js"><link rel="prefetch" href="/assets/js/83.e1ee7e29.js"><link rel="prefetch" href="/assets/js/84.aceb9c03.js"><link rel="prefetch" href="/assets/js/85.a8ae9e6f.js"><link rel="prefetch" href="/assets/js/86.ae794988.js"><link rel="prefetch" href="/assets/js/87.6d13921d.js"><link rel="prefetch" href="/assets/js/88.12fb5865.js"><link rel="prefetch" href="/assets/js/89.c72fc4db.js"><link rel="prefetch" href="/assets/js/9.cfab03b0.js"><link rel="prefetch" href="/assets/js/90.76c8f59a.js"><link rel="prefetch" href="/assets/js/91.5eed03ed.js"><link rel="prefetch" href="/assets/js/92.43e03ad0.js"><link rel="prefetch" href="/assets/js/93.c1a6699a.js"><link rel="prefetch" href="/assets/js/94.cc34e051.js"><link rel="prefetch" href="/assets/js/95.5c230a10.js"><link rel="prefetch" href="/assets/js/96.e0c1c420.js"><link rel="prefetch" href="/assets/js/97.581e6166.js"><link rel="prefetch" href="/assets/js/98.219eb4ae.js"><link rel="prefetch" href="/assets/js/99.90422682.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.8d7743fe.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.f20d812e.js"><link rel="prefetch" href="/assets/js/vendors~photo-swipe.751a6989.js">
    <link rel="stylesheet" href="/assets/css/0.styles.30e04dfa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">数蛙技术团队</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="用户手册" class="dropdown-title"><span class="title">用户手册</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/manual/cloud/" class="nav-link">数蛙工业数据云平台</a></li><li class="dropdown-item"><!----> <a href="/zh/manual/edge/" class="nav-link">数蛙工业边缘网关</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="产品说明" class="dropdown-title"><span class="title">产品说明</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/product/dgiot/" class="nav-link">一站式物联网平台</a></li><li class="dropdown-item"><!----> <a href="/zh/product/dgpress/" class="nav-link">一站式云压测平台</a></li><li class="dropdown-item"><!----> <a href="/zh/product/dgtest/" class="nav-link">一站式云检测平台</a></li><li class="dropdown-item"><!----> <a href="/zh/product/dgii/" class="nav-link">工业互联网平台</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发指南" class="dropdown-title"><span class="title">开发指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/backend/" class="nav-link">服务架构</a></li><li class="dropdown-item"><!----> <a href="/zh/frontend/" class="nav-link">交互技术</a></li><li class="dropdown-item"><!----> <a href="/zh/dataanalysis/" class="nav-link router-link-active">数据分析</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实战教程" class="dropdown-title"><span class="title">实战教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/blog/knowledge/" class="nav-link">基础知识</a></li><li class="dropdown-item"><!----> <a href="/zh/blog/study/" class="nav-link">案例教程</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/dataanalysis/tdengine/08.connector/01.java/docs.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">English</a></li></ul></div></div> <a href="https://github.com/dgiot" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="用户手册" class="dropdown-title"><span class="title">用户手册</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/manual/cloud/" class="nav-link">数蛙工业数据云平台</a></li><li class="dropdown-item"><!----> <a href="/zh/manual/edge/" class="nav-link">数蛙工业边缘网关</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="产品说明" class="dropdown-title"><span class="title">产品说明</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/product/dgiot/" class="nav-link">一站式物联网平台</a></li><li class="dropdown-item"><!----> <a href="/zh/product/dgpress/" class="nav-link">一站式云压测平台</a></li><li class="dropdown-item"><!----> <a href="/zh/product/dgtest/" class="nav-link">一站式云检测平台</a></li><li class="dropdown-item"><!----> <a href="/zh/product/dgii/" class="nav-link">工业互联网平台</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发指南" class="dropdown-title"><span class="title">开发指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/backend/" class="nav-link">服务架构</a></li><li class="dropdown-item"><!----> <a href="/zh/frontend/" class="nav-link">交互技术</a></li><li class="dropdown-item"><!----> <a href="/zh/dataanalysis/" class="nav-link router-link-active">数据分析</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实战教程" class="dropdown-title"><span class="title">实战教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/blog/knowledge/" class="nav-link">基础知识</a></li><li class="dropdown-item"><!----> <a href="/zh/blog/study/" class="nav-link">案例教程</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/dataanalysis/tdengine/08.connector/01.java/docs.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">English</a></li></ul></div></div> <a href="https://github.com/dgiot" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <div style="padding-left:1.5rem;"><div></div></div> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据分析</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>TDengine</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh/dataanalysis/tdengine/00.index/docs.html" class="sidebar-link">TDengine文档</a></li><li><a href="/zh/dataanalysis/tdengine/01.evaluation/docs.html" class="sidebar-link">TDengine 介绍</a></li><li><a href="/zh/dataanalysis/tdengine/02.getting-started/docs.html" class="sidebar-link">立即开始</a></li><li><a href="/zh/dataanalysis/tdengine/03.architecture/docs.html" class="sidebar-link">数据模型和整体架构</a></li><li><a href="/zh/dataanalysis/tdengine/04.model/docs.html" class="sidebar-link">数据建模</a></li><li><a href="/zh/dataanalysis/tdengine/05.insert/docs.html" class="sidebar-link">高效写入数据</a></li><li><a href="/zh/dataanalysis/tdengine/06.queries/docs.html" class="sidebar-link">高效查询数据</a></li><li><a href="/zh/dataanalysis/tdengine/07.advanced-features/docs.html" class="sidebar-link">高级功能</a></li><li><a href="/zh/dataanalysis/tdengine/08.connector/docs.html" class="sidebar-link">连接器简介</a></li><li><a href="/zh/dataanalysis/tdengine/08.connector/01.java/docs.html" aria-current="page" class="active sidebar-link">Java Connector</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/08.connector/01.java/docs.html#jdbc-jni和jdbc-restful的对比" class="sidebar-link">JDBC-JNI和JDBC-RESTful的对比</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/08.connector/01.java/docs.html#如何获取-taos-jdbcdriver" class="sidebar-link">如何获取 taos-jdbcdriver</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/08.connector/01.java/docs.html#maven-仓库" class="sidebar-link">maven 仓库</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/08.connector/01.java/docs.html#源码编译打包" class="sidebar-link">源码编译打包</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/08.connector/01.java/docs.html#jdbc的使用说明" class="sidebar-link">JDBC的使用说明</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/08.connector/01.java/docs.html#获取连接" class="sidebar-link">获取连接</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/08.connector/01.java/docs.html#创建数据库和表" class="sidebar-link">创建数据库和表</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/08.connector/01.java/docs.html#插入数据" class="sidebar-link">插入数据</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/08.connector/01.java/docs.html#查询数据" class="sidebar-link">查询数据</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/08.connector/01.java/docs.html#订阅" class="sidebar-link">订阅</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/08.connector/01.java/docs.html#关闭资源" class="sidebar-link">关闭资源</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/08.connector/01.java/docs.html#与连接池使用" class="sidebar-link">与连接池使用</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/08.connector/01.java/docs.html#与框架使用" class="sidebar-link">与框架使用</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/08.connector/01.java/docs.html#taos-jdbcdriver-版本以及支持的-tdengine-版本和-jdk-版本" class="sidebar-link">TAOS-JDBCDriver 版本以及支持的 TDengine 版本和 JDK 版本</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/08.connector/01.java/docs.html#tdengine-datatype-和-java-datatype" class="sidebar-link">TDengine DataType 和 Java DataType</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/08.connector/01.java/docs.html#常见问题" class="sidebar-link">常见问题</a></li></ul></li><li><a href="/zh/dataanalysis/tdengine/09.connections/docs.html" class="sidebar-link">与其他工具的连接</a></li><li><a href="/zh/dataanalysis/tdengine/10.cluster/docs.html" class="sidebar-link">TDengine 集群安装、管理</a></li><li><a href="/zh/dataanalysis/tdengine/11.administrator/docs.html" class="sidebar-link">TDengine的运营与维护</a></li><li><a href="/zh/dataanalysis/tdengine/12.taos-sql/docs.html" class="sidebar-link">Sql示例</a></li><li><a href="/zh/dataanalysis/tdengine/12.taos-sql/01.error-code/docs.html" class="sidebar-link">错误码</a></li><li><a href="/zh/dataanalysis/tdengine/13.faq/docs.html" class="sidebar-link">常见问题</a></li></ul></section></li></ul> </aside> <!----> <!----> <main class="page"><div class="theme-default-content" style="margin-top:3.6rem;padding-top:0;padding-bottom:0;"></div> <div class="theme-default-content"><div class="content__default"><h1 id="java-connector"><a href="#java-connector" class="header-anchor">#</a> Java Connector</h1> <p>TDengine 提供了遵循 JDBC 标准（3.0）API 规范的 <code>taos-jdbcdriver</code> 实现，可在 maven 的中央仓库 <a href="https://search.maven.org/artifact/com.taosdata.jdbc/taos-jdbcdriver" target="_blank" rel="noopener noreferrer">Sonatype Repository<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 搜索下载。</p> <p><code>taos-jdbcdriver</code> 的实现包括 2 种形式： JDBC-JNI 和 JDBC-RESTful（taos-jdbcdriver-2.0.18 开始支持 JDBC-RESTful）。 JDBC-JNI 通过调用客户端 libtaos.so（或 taos.dll ）的本地方法实现， JDBC-RESTful 则在内部封装了 RESTful 接口实现。</p> <p><img src="http://dgiot-1253666439.cos.ap-shanghai-fsi.myqcloud.com/shuwa_tech/zh/dataanalysis/tdengine/images/tdengine-jdbc-connector.png" alt="tdengine-jdbc-connector.png"></p> <p>上图显示了 3 种 Java 应用使用连接器访问 TDengine 的方式：</p> <ul><li>JDBC-JNI：Java 应用在物理节点1（pnode1）上使用 JDBC-JNI 的 API ，直接调用客户端 API（libtaos.so 或 taos.dll）将写入和查询请求发送到位于物理节点2（pnode2）上的 taosd 实例。</li> <li>RESTful：应用将 SQL 发送给位于物理节点2（pnode2）上的 RESTful 连接器，再调用客户端 API（libtaos.so）。</li> <li>JDBC-RESTful：Java 应用通过 JDBC-RESTful 的 API ，将 SQL 封装成一个 RESTful 请求，发送给物理节点2的 RESTful 连接器。</li></ul> <p>TDengine 的 JDBC 驱动实现尽可能与关系型数据库驱动保持一致，但时序空间数据库与关系对象型数据库服务的对象和技术特征存在差异，导致 <code>taos-jdbcdriver</code> 与传统的 JDBC driver 也存在一定差异。在使用时需要注意以下几点：</p> <ul><li>TDengine 目前不支持针对单条数据记录的删除操作。</li> <li>目前不支持事务操作。</li> <li>目前不支持表间的 union 操作。</li> <li>目前不支持嵌套查询（nested query）。</li> <li>对每个 Connection 的实例，至多只能有一个打开的 ResultSet 实例；如果在 ResultSet 还没关闭的情况下执行了新的查询，taos-jdbcdriver 会自动关闭上一个 ResultSet。</li></ul> <h2 id="jdbc-jni和jdbc-restful的对比"><a href="#jdbc-jni和jdbc-restful的对比" class="header-anchor">#</a> JDBC-JNI和JDBC-RESTful的对比</h2> <table><tr align="center"><th>对比项</th><th>JDBC-JNI</th><th>JDBC-RESTful</th></tr> <tr align="center"><td>支持的操作系统</td> <td>linux、windows</td> <td>全平台</td></tr> <tr align="center"><td>是否需要安装 client</td> <td>需要</td> <td>不需要</td></tr> <tr align="center"><td>server 升级后是否需要升级 client</td> <td>需要</td> <td>不需要</td></tr> <tr align="center"><td>写入性能</td> <td colspan="2">JDBC-RESTful 是 JDBC-JNI 的 50%～90% </td></tr> <tr align="center"><td>查询性能</td> <td colspan="2">JDBC-RESTful 与 JDBC-JNI 没有差别</td></tr></table> <h2 id="如何获取-taos-jdbcdriver"><a href="#如何获取-taos-jdbcdriver" class="header-anchor">#</a> 如何获取 taos-jdbcdriver</h2> <h3 id="maven-仓库"><a href="#maven-仓库" class="header-anchor">#</a> maven 仓库</h3> <p>目前 taos-jdbcdriver 已经发布到 <a href="https://search.maven.org/artifact/com.taosdata.jdbc/taos-jdbcdriver" target="_blank" rel="noopener noreferrer">Sonatype Repository<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 仓库，且各大仓库都已同步。</p> <ul><li><a href="https://search.maven.org/artifact/com.taosdata.jdbc/taos-jdbcdriver" target="_blank" rel="noopener noreferrer">sonatype<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://mvnrepository.com/artifact/com.taosdata.jdbc/taos-jdbcdriver" target="_blank" rel="noopener noreferrer">mvnrepository<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://maven.aliyun.com/mvn/search" target="_blank" rel="noopener noreferrer">maven.aliyun<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>maven 项目中使用如下 pom.xml 配置即可：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.taosdata.jdbc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>taos-jdbcdriver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.0.18<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="源码编译打包"><a href="#源码编译打包" class="header-anchor">#</a> 源码编译打包</h3> <p>下载 <a href="https://github.com/taosdata/TDengine" target="_blank" rel="noopener noreferrer">TDengine<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 源码之后，进入 taos-jdbcdriver 源码目录 <code>src/connector/jdbc</code> 执行 <code>mvn clean package -Dmaven.test.skip=true</code> 即可生成相应 jar 包。</p> <h2 id="jdbc的使用说明"><a href="#jdbc的使用说明" class="header-anchor">#</a> JDBC的使用说明</h2> <h3 id="获取连接"><a href="#获取连接" class="header-anchor">#</a> 获取连接</h3> <h4 id="指定url获取连接"><a href="#指定url获取连接" class="header-anchor">#</a> 指定URL获取连接</h4> <p>通过指定URL获取连接，如下所示：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.taosdata.jdbc.rs.RestfulDriver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> jdbcUrl <span class="token operator">=</span> <span class="token string">&quot;jdbc:TAOS-RS://taosdemo.com:6041/test?user=root&amp;password=taosdata&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>jdbcUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>以上示例，使用 <strong>JDBC-RESTful</strong> 的 driver，建立了到 hostname 为 taosdemo.com，端口为 6041，数据库名为 test 的连接。这个 URL 中指定用户名（user）为 root，密码（password）为 taosdata。</p> <p>使用 JDBC-RESTful 接口，不需要依赖本地函数库。与 JDBC-JNI 相比，仅需要：</p> <ol><li>driverClass 指定为“com.taosdata.jdbc.rs.RestfulDriver”；</li> <li>jdbcUrl 以“jdbc:TAOS-RS://”开头；</li> <li>使用 6041 作为连接端口。</li></ol> <p>如果希望获得更好的写入和查询性能，Java 应用可以使用 <strong>JDBC-JNI</strong> 的driver，如下所示：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.taosdata.jdbc.TSDBDriver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> jdbcUrl <span class="token operator">=</span> <span class="token string">&quot;jdbc:TAOS://taosdemo.com:6030/test?user=root&amp;password=taosdata&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>jdbcUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>以上示例，使用了 JDBC-JNI 的 driver，建立了到 hostname 为 taosdemo.com，端口为 6030（TDengine 的默认端口），数据库名为 test 的连接。这个 URL 中指定用户名（user）为 root，密码（password）为 taosdata。</p> <p><strong>注意</strong>：使用 JDBC-JNI 的 driver，taos-jdbcdriver 驱动包时需要依赖系统对应的本地函数库。</p> <ul><li><p>libtaos.so
在 linux 系统中成功安装 TDengine 后，依赖的本地函数库 libtaos.so 文件会被自动拷贝至 /usr/lib/libtaos.so，该目录包含在 Linux 自动扫描路径上，无需单独指定。</p></li> <li><p>taos.dll
在 windows 系统中安装完客户端之后，驱动包依赖的 taos.dll 文件会自动拷贝到系统默认搜索路径 C:/Windows/System32 下，同样无需要单独指定。</p></li></ul> <blockquote><p>在 windows 环境开发时需要安装 TDengine 对应的 <a href="https://www.taosdata.com/cn/all-downloads/#TDengine-Windows-Client" target="_blank" rel="noopener noreferrer">windows 客户端<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，Linux 服务器安装完 TDengine 之后默认已安装 client，也可以单独安装 <a href="https://www.taosdata.com/cn/getting-started/#%E5%AE%A2%E6%88%B7%E7%AB%AF" target="_blank" rel="noopener noreferrer">Linux 客户端<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 连接远程 TDengine Server。</p></blockquote> <p>JDBC-JNI 的使用请参见<a href="https://www.taosdata.com/blog/2020/11/11/1955.html" target="_blank" rel="noopener noreferrer">视频教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>TDengine 的 JDBC URL 规范格式为：
<code>jdbc:[TAOS|TAOS-RS]://[host_name]:[port]/[database_name]?[user={user}|&amp;password={password}|&amp;charset={charset}|&amp;cfgdir={config_dir}|&amp;locale={locale}|&amp;timezone={timezone}]</code></p> <p>url中的配置参数如下：</p> <ul><li>user：登录 TDengine 用户名，默认值 root。</li> <li>password：用户登录密码，默认值 taosdata。</li> <li>cfgdir：客户端配置文件目录路径，Linux OS 上默认值 /etc/taos ，Windows OS 上默认值 C:/shuwa_tech/zh/dataanalysis/tdengine/cfg。</li> <li>charset：客户端使用的字符集，默认值为系统字符集。</li> <li>locale：客户端语言环境，默认值系统当前 locale。</li> <li>timezone：客户端使用的时区，默认值为系统当前时区。</li></ul> <h4 id="指定url和properties获取连接"><a href="#指定url和properties获取连接" class="header-anchor">#</a> 指定URL和Properties获取连接</h4> <p>除了通过指定的 URL 获取连接，还可以使用 Properties 指定建立连接时的参数，如下所示：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Connection</span> <span class="token function">getConn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
  <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.taosdata.jdbc.TSDBDriver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Class.forName(&quot;com.taosdata.jdbc.rs.RestfulDriver&quot;);</span>
  <span class="token class-name">String</span> jdbcUrl <span class="token operator">=</span> <span class="token string">&quot;jdbc:TAOS://taosdemo.com:6030/test?user=root&amp;password=taosdata&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">// String jdbcUrl = &quot;jdbc:TAOS-RS://taosdemo.com:6041/test?user=root&amp;password=taosdata&quot;;</span>
  <span class="token class-name">Properties</span> connProps <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  connProps<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token class-name">TSDBDriver</span><span class="token punctuation">.</span>PROPERTY_KEY_CHARSET<span class="token punctuation">,</span> <span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  connProps<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token class-name">TSDBDriver</span><span class="token punctuation">.</span>PROPERTY_KEY_LOCALE<span class="token punctuation">,</span> <span class="token string">&quot;en_US.UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  connProps<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token class-name">TSDBDriver</span><span class="token punctuation">.</span>PROPERTY_KEY_TIME_ZONE<span class="token punctuation">,</span> <span class="token string">&quot;UTC-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>jdbcUrl<span class="token punctuation">,</span> connProps<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> conn<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以上示例，建立一个到 hostname 为 taosdemo.com，端口为 6030，数据库名为 test 的连接。注释为使用 JDBC-RESTful 时的方法。这个连接在 url 中指定了用户名(user)为 root，密码（password）为 taosdata，并在 connProps 中指定了使用的字符集、语言环境、时区等信息。</p> <p>properties 中的配置参数如下：</p> <ul><li>TSDBDriver.PROPERTY_KEY_USER：登录 TDengine 用户名，默认值 root。</li> <li>TSDBDriver.PROPERTY_KEY_PASSWORD：用户登录密码，默认值 taosdata。</li> <li>TSDBDriver.PROPERTY_KEY_CONFIG_DIR：客户端配置文件目录路径，Linux OS 上默认值 /etc/taos ，Windows OS 上默认值 C:/shuwa_tech/zh/dataanalysis/tdengine/cfg。</li> <li>TSDBDriver.PROPERTY_KEY_CHARSET：客户端使用的字符集，默认值为系统字符集。</li> <li>TSDBDriver.PROPERTY_KEY_LOCALE：客户端语言环境，默认值系统当前 locale。</li> <li>TSDBDriver.PROPERTY_KEY_TIME_ZONE：客户端使用的时区，默认值为系统当前时区。</li></ul> <h4 id="使用客户端配置文件建立连接"><a href="#使用客户端配置文件建立连接" class="header-anchor">#</a> 使用客户端配置文件建立连接</h4> <p>当使用 JDBC-JNI 连接 TDengine 集群时，可以使用客户端配置文件，在客户端配置文件中指定集群的 firstEp、secondEp参数。
如下所示：</p> <ol><li>在 Java 应用中不指定 hostname 和 port</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Connection</span> <span class="token function">getConn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
  <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.taosdata.jdbc.TSDBDriver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> jdbcUrl <span class="token operator">=</span> <span class="token string">&quot;jdbc:TAOS://:/test?user=root&amp;password=taosdata&quot;</span><span class="token punctuation">;</span>
  <span class="token class-name">Properties</span> connProps <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  connProps<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token class-name">TSDBDriver</span><span class="token punctuation">.</span>PROPERTY_KEY_CHARSET<span class="token punctuation">,</span> <span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  connProps<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token class-name">TSDBDriver</span><span class="token punctuation">.</span>PROPERTY_KEY_LOCALE<span class="token punctuation">,</span> <span class="token string">&quot;en_US.UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  connProps<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token class-name">TSDBDriver</span><span class="token punctuation">.</span>PROPERTY_KEY_TIME_ZONE<span class="token punctuation">,</span> <span class="token string">&quot;UTC-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>jdbcUrl<span class="token punctuation">,</span> connProps<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> conn<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>在配置文件中指定 firstEp 和 secondEp</li></ol> <div class="language- extra-class"><pre class="language-text"><code># first fully qualified domain name (FQDN) for TDengine system
firstEp               cluster_node1:6030

# second fully qualified domain name (FQDN) for TDengine system, for cluster only
secondEp              cluster_node2:6030

# default system charset
# charset               UTF-8  

# system locale
# locale                en_US.UTF-8
</code></pre></div><p>以上示例，jdbc 会使用客户端的配置文件，建立到 hostname 为 cluster_node1、端口为 6030、数据库名为 test 的连接。当集群中 firstEp 节点失效时，JDBC 会尝试使用 secondEp 连接集群。
TDengine 中，只要保证 firstEp 和 secondEp 中一个节点有效，就可以正常建立到集群的连接。</p> <blockquote><p>注意：这里的配置文件指的是调用 JDBC Connector 的应用程序所在机器上的配置文件，Linux OS 上默认值 /etc/taos/taos.cfg ，Windows OS 上默认值 C://shuwa_tech/zh/dataanalysis/tdengine/cfg/taos.cfg。</p></blockquote> <h4 id="配置参数的优先级"><a href="#配置参数的优先级" class="header-anchor">#</a> 配置参数的优先级</h4> <p>通过以上 3 种方式获取连接，如果配置参数在 url、Properties、客户端配置文件中有重复，则参数的<code>优先级由高到低</code>分别如下：</p> <ol><li>JDBC URL 参数，如上所述，可以在 JDBC URL 的参数中指定。</li> <li>Properties connProps</li> <li>客户端配置文件 taos.cfg</li></ol> <p>例如：在 url 中指定了 password 为 taosdata，在 Properties 中指定了 password 为 taosdemo，那么，JDBC 会使用 url 中的 password 建立连接。</p> <blockquote><p>更多详细配置请参考<a href="https://www.taosdata.com/cn/documentation/administrator/#client" target="_blank" rel="noopener noreferrer">客户端配置<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h3 id="创建数据库和表"><a href="#创建数据库和表" class="header-anchor">#</a> 创建数据库和表</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Statement</span> stmt <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// create database</span>
stmt<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token string">&quot;create database if not exists db&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// use database</span>
stmt<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token string">&quot;use db&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// create table</span>
stmt<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token string">&quot;create table if not exists tb (ts timestamp, temperature int, humidity float)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>注意：如果不使用 <code>use db</code> 指定数据库，则后续对表的操作都需要增加数据库名称作为前缀，如 db.tb。</p></blockquote> <h3 id="插入数据"><a href="#插入数据" class="header-anchor">#</a> 插入数据</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// insert data</span>
<span class="token keyword">int</span> affectedRows <span class="token operator">=</span> stmt<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token string">&quot;insert into tb values(now, 23, 10.3) (now + 1s, 20, 9.3)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;insert &quot;</span> <span class="token operator">+</span> affectedRows <span class="token operator">+</span> <span class="token string">&quot; rows.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>now 为系统内部函数，默认为服务器当前时间。
<code>now + 1s</code> 代表服务器当前时间往后加 1 秒，数字后面代表时间单位：a(毫秒), s(秒), m(分), h(小时), d(天)，w(周), n(月), y(年)。</p></blockquote> <h3 id="查询数据"><a href="#查询数据" class="header-anchor">#</a> 查询数据</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// query data</span>
<span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> stmt<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token string">&quot;select * from tb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Timestamp</span> ts <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> temperature <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">float</span> humidity <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    ts <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getTimestamp</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    temperature <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    humidity <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getFloat</span><span class="token punctuation">(</span><span class="token string">&quot;humidity&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s, %d, %s\n&quot;</span><span class="token punctuation">,</span> ts<span class="token punctuation">,</span> temperature<span class="token punctuation">,</span> humidity<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>查询和操作关系型数据库一致，使用下标获取返回字段内容时从 1 开始，建议使用字段名称获取。</p></blockquote> <h3 id="订阅"><a href="#订阅" class="header-anchor">#</a> 订阅</h3> <h4 id="创建"><a href="#创建" class="header-anchor">#</a> 创建</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">TSDBSubscribe</span> sub <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">TSDBConnection</span><span class="token punctuation">)</span>conn<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">&quot;topic&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;select * from meters&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>subscribe</code> 方法的三个参数含义如下：</p> <ul><li>topic：订阅的主题（即名称），此参数是订阅的唯一标识</li> <li>sql：订阅的查询语句，此语句只能是 <code>select</code> 语句，只应查询原始数据，只能按时间正序查询数据</li> <li>restart：如果订阅已经存在，是重新开始，还是继续之前的订阅</li></ul> <p>如上面的例子将使用 SQL 语句 <code>select * from meters</code> 创建一个名为 <code>topic</code> 的订阅，如果这个订阅已经存在，将继续之前的查询进度，而不是从头开始消费所有的数据。</p> <h4 id="消费数据"><a href="#消费数据" class="header-anchor">#</a> 消费数据</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">int</span> total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">TSDBResultSet</span> rs <span class="token operator">=</span> sub<span class="token punctuation">.</span><span class="token function">consume</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        count<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    total <span class="token operator">+=</span> count<span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d rows consumed, total %d\n&quot;</span><span class="token punctuation">,</span> count<span class="token punctuation">,</span> total<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>consume</code> 方法返回一个结果集，其中包含从上次 <code>consume</code> 到目前为止的所有新数据。请务必按需选择合理的调用 <code>consume</code> 的频率（如例子中的 <code>Thread.sleep(1000)</code>），否则会给服务端造成不必要的压力。</p> <h4 id="关闭订阅"><a href="#关闭订阅" class="header-anchor">#</a> 关闭订阅</h4> <div class="language-java extra-class"><pre class="language-java"><code>sub<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>close</code> 方法关闭一个订阅。如果其参数为 <code>true</code> 表示保留订阅进度信息，后续可以创建同名订阅继续消费数据；如为 <code>false</code> 则不保留订阅进度。</p> <h3 id="关闭资源"><a href="#关闭资源" class="header-anchor">#</a> 关闭资源</h3> <div class="language-java extra-class"><pre class="language-java"><code>resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stmt<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p><code>注意务必要将 connection 进行关闭</code>，否则会出现连接泄露。</p></blockquote> <h2 id="与连接池使用"><a href="#与连接池使用" class="header-anchor">#</a> 与连接池使用</h2> <p><strong>HikariCP</strong></p> <ul><li>引入相应 HikariCP maven 依赖：</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.zaxxer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>HikariCP<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.4.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>使用示例如下：</li></ul> <div class="language-java extra-class"><pre class="language-java"><code> <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
    <span class="token class-name">HikariConfig</span> config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HikariConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// jdbc properties</span>
    config<span class="token punctuation">.</span><span class="token function">setJdbcUrl</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:TAOS://127.0.0.1:6030/log&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    config<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    config<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&quot;taosdata&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// connection pool configurations</span>
    config<span class="token punctuation">.</span><span class="token function">setMinimumIdle</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">//minimum number of idle connection</span>
    config<span class="token punctuation">.</span><span class="token function">setMaximumPoolSize</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//maximum number of connection in the pool</span>
    config<span class="token punctuation">.</span><span class="token function">setConnectionTimeout</span><span class="token punctuation">(</span><span class="token number">30000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//maximum wait milliseconds for get connection from pool</span>
    config<span class="token punctuation">.</span><span class="token function">setMaxLifetime</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// maximum life time for each connection</span>
    config<span class="token punctuation">.</span><span class="token function">setIdleTimeout</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// max idle time for recycle idle connection</span>
    config<span class="token punctuation">.</span><span class="token function">setConnectionTestQuery</span><span class="token punctuation">(</span><span class="token string">&quot;select server_status()&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//validation query</span>

    <span class="token class-name">HikariDataSource</span> ds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HikariDataSource</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//create datasource</span>

    <span class="token class-name">Connection</span>  connection <span class="token operator">=</span> ds<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// get connection</span>
    <span class="token class-name">Statement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// get statement</span>

    <span class="token comment">//query or insert</span>
    <span class="token comment">// ...</span>

    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// put back to conneciton pool</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>通过 HikariDataSource.getConnection() 获取连接后，使用完成后需要调用 close() 方法，实际上它并不会关闭连接，只是放回连接池中。
更多 HikariCP 使用问题请查看<a href="https://github.com/brettwooldridge/HikariCP" target="_blank" rel="noopener noreferrer">官方说明<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p><strong>Druid</strong></p> <ul><li>引入相应 Druid maven 依赖：</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.20<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>使用示例如下：</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

    <span class="token class-name">DruidDataSource</span> dataSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DruidDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// jdbc properties</span>
    dataSource<span class="token punctuation">.</span><span class="token function">setDriverClassName</span><span class="token punctuation">(</span><span class="token string">&quot;com.taosdata.jdbc.TSDBDriver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    dataSource<span class="token punctuation">.</span><span class="token function">setUrl</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    dataSource<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    dataSource<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&quot;taosdata&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// pool configurations</span>
    dataSource<span class="token punctuation">.</span><span class="token function">setInitialSize</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    dataSource<span class="token punctuation">.</span><span class="token function">setMinIdle</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    dataSource<span class="token punctuation">.</span><span class="token function">setMaxActive</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    dataSource<span class="token punctuation">.</span><span class="token function">setMaxWait</span><span class="token punctuation">(</span><span class="token number">30000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    dataSource<span class="token punctuation">.</span><span class="token function">setValidationQuery</span><span class="token punctuation">(</span><span class="token string">&quot;select server_status()&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
    <span class="token class-name">Connection</span>  connection <span class="token operator">=</span> dataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// get connection</span>
    <span class="token class-name">Statement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// get statement</span>
    <span class="token comment">//query or insert </span>
    <span class="token comment">// ...</span>

    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// put back to conneciton pool</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>更多 druid 使用问题请查看<a href="https://github.com/alibaba/druid" target="_blank" rel="noopener noreferrer">官方说明<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p><strong>注意事项</strong></p> <ul><li>TDengine <code>v1.6.4.1</code> 版本开始提供了一个专门用于心跳检测的函数 <code>select server_status()</code>，所以在使用连接池时推荐使用 <code>select server_status()</code> 进行 Validation Query。</li></ul> <p>如下所示，<code>select server_status()</code> 执行成功会返回 <code>1</code>。</p> <div class="language-shell extra-class"><pre class="language-shell"><code>taos<span class="token operator">&gt;</span> <span class="token keyword">select</span> server_status<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
server_status<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">|</span>
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
<span class="token number">1</span>              <span class="token operator">|</span>
Query OK, <span class="token number">1</span> row<span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0</span>.000141s<span class="token punctuation">)</span>
</code></pre></div><h2 id="与框架使用"><a href="#与框架使用" class="header-anchor">#</a> 与框架使用</h2> <ul><li>Spring JdbcTemplate 中使用 taos-jdbcdriver，可参考 <a href="https://github.com/taosdata/shuwa_tech/zh/dataanalysis/tdengine/tree/develop/tests/examples/JDBC/SpringJdbcTemplate" target="_blank" rel="noopener noreferrer">SpringJdbcTemplate<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Springboot + Mybatis 中使用，可参考 <a href="https://github.com/taosdata/shuwa_tech/zh/dataanalysis/tdengine/tree/develop/tests/examples/JDBC/springbootdemo" target="_blank" rel="noopener noreferrer">springbootdemo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="taos-jdbcdriver-版本以及支持的-tdengine-版本和-jdk-版本"><a href="#taos-jdbcdriver-版本以及支持的-tdengine-版本和-jdk-版本" class="header-anchor">#</a> TAOS-JDBCDriver 版本以及支持的 TDengine 版本和 JDK 版本</h2> <table><thead><tr><th>taos-jdbcdriver 版本</th> <th>TDengine 版本</th> <th>JDK 版本</th></tr></thead> <tbody><tr><td>2.0.12 及以上</td> <td>2.0.8.0 及以上</td> <td>1.8.x</td></tr> <tr><td>2.0.4 - 2.0.11</td> <td>2.0.0.0 - 2.0.7.x</td> <td>1.8.x</td></tr> <tr><td>1.0.3</td> <td>1.6.1.x 及以上</td> <td>1.8.x</td></tr> <tr><td>1.0.2</td> <td>1.6.1.x 及以上</td> <td>1.8.x</td></tr> <tr><td>1.0.1</td> <td>1.6.1.x 及以上</td> <td>1.8.x</td></tr></tbody></table> <h2 id="tdengine-datatype-和-java-datatype"><a href="#tdengine-datatype-和-java-datatype" class="header-anchor">#</a> TDengine DataType 和 Java DataType</h2> <p>TDengine 目前支持时间戳、数字、字符、布尔类型，与 Java 对应类型转换如下：</p> <table><thead><tr><th>TDengine DataType</th> <th>Java DataType</th></tr></thead> <tbody><tr><td>TIMESTAMP</td> <td>java.sql.Timestamp</td></tr> <tr><td>INT</td> <td>java.lang.Integer</td></tr> <tr><td>BIGINT</td> <td>java.lang.Long</td></tr> <tr><td>FLOAT</td> <td>java.lang.Float</td></tr> <tr><td>DOUBLE</td> <td>java.lang.Double</td></tr> <tr><td>SMALLINT, TINYINT</td> <td>java.lang.Short</td></tr> <tr><td>BOOL</td> <td>java.lang.Boolean</td></tr> <tr><td>BINARY, NCHAR</td> <td>java.lang.String</td></tr></tbody></table> <h2 id="常见问题"><a href="#常见问题" class="header-anchor">#</a> 常见问题</h2> <ul><li><p>java.lang.UnsatisfiedLinkError: no taos in java.library.path</p> <p><strong>原因</strong>：程序没有找到依赖的本地函数库 taos。</p> <p><strong>解决方法</strong>：windows 下可以将 C:\TDengine\driver\taos.dll 拷贝到 C:\Windows\System32\ 目录下，linux 下将建立如下软链 <code>ln -s /usr/local/taos/driver/libtaos.so.x.x.x.x /usr/lib/libtaos.so</code> 即可。</p></li> <li><p>java.lang.UnsatisfiedLinkError: taos.dll Can't load AMD 64 bit on a IA 32-bit platform</p> <p><strong>原因</strong>：目前 TDengine 只支持 64 位 JDK。</p> <p><strong>解决方法</strong>：重新安装 64 位 JDK。</p></li> <li><p>其它问题请参考 <a href="https://github.com/taosdata/shuwa_tech/zh/dataanalysis/tdengine/issues" target="_blank" rel="noopener noreferrer">Issues<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul></div> <!----></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/12/2021, 8:38:18 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/zh/dataanalysis/tdengine/08.connector/docs.html" class="prev">连接器简介</a></span> <span class="next"><a href="/zh/dataanalysis/tdengine/09.connections/docs.html">与其他工具的连接</a>
      →
    </span></p></div> </main></div><div class="global-ui"><div></div><div class="add-this"></div><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button title="Close (Esc)" class="pswp__button pswp__button--close"></button> <button title="Share" class="pswp__button pswp__button--share"></button> <button title="Toggle fullscreen" class="pswp__button pswp__button--fs"></button> <button title="Zoom in/out" class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button title="Previous (arrow left)" class="pswp__button pswp__button--arrow--left"></button> <button title="Next (arrow right)" class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/assets/js/app.cae30ac7.js" defer></script><script src="/assets/js/7.5b24c3a5.js" defer></script><script src="/assets/js/5.7fd7e714.js" defer></script><script src="/assets/js/78.52b15e1d.js" defer></script>
  </body>
</html>
