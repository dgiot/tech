(window.webpackJsonp=window.webpackJsonp||[]).push([[382],{705:function(t,e,c){"use strict";c.r(e);var o=c(7),v=Object(o.a)({},(function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[c("p",[t._v("本文介绍如何为产品自定义Topic类。自定义Topic类将自动映射到该产品下的所有设备中。")]),t._v(" "),c("h2",{attrs:{id:"操作步骤"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#操作步骤"}},[t._v("#")]),t._v(" 操作步骤")]),t._v(" "),c("ol",[c("li",[c("p",[t._v("登录"),c("a",{attrs:{href:"https://iot.console.aliyun.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("物联网平台控制台"),c("OutboundLink")],1),t._v("。")])]),t._v(" "),c("li",[c("p",[t._v("在实例概览页面，找到对应的实例，单击实例进入实例详情页面。")]),t._v(" "),c("p",[c("img",{attrs:{src:"https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/7761381161/p174584.png",alt:"实例概览"}})])]),t._v(" "),c("li",[c("p",[t._v("在左侧导航栏，选择设备管理 > 产品。")])]),t._v(" "),c("li",[c("p",[t._v("在产品页面，找到需要自定义Topic类的产品，并单击对应操作栏中的查看按钮。")])]),t._v(" "),c("li",[c("p",[t._v("在产品详情页面，单击Topic类列表 > 自定义Topic > 定义Topic类。")])]),t._v(" "),c("li",[c("p",[t._v("配置参数，单击确认。")]),t._v(" "),c("p",[c("img",{attrs:{src:"https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0645559951/p134081.png",alt:"自定义Topic"}})])])]),t._v(" "),c("table",[c("thead",[c("tr",[c("th",[t._v("参数")]),t._v(" "),c("th",[t._v("描述")])])]),t._v(" "),c("tbody",[c("tr",[c("td",[t._v("设备操作权限")]),t._v(" "),c("td",[t._v("设备对该Topic的操作权限，可设置为发布、订阅、发布和订阅。")])]),t._v(" "),c("tr",[c("td",[t._v("Topic类")]),t._v(" "),c("td",[t._v("将Topic类填充完整。类目命名只能包含字母、数字和下划线（_），每级类目不能为空。"),c("br"),t._v(" "),c("strong",[t._v("说明")]),t._v(" 只有设备操作权限为订阅时，才可以使用通配符+和#自定义Topic类，以便设备实现批量订阅Topic。通配符使用方法请参见 。")])]),t._v(" "),c("tr",[c("td",[t._v("描述")]),t._v(" "),c("td",[t._v("可输入文字，描述该Topic类。")])])])]),t._v(" "),c("h2",{attrs:{id:"带通配符的自定义topic"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#带通配符的自定义topic"}},[t._v("#")]),t._v(" 带通配符的自定义Topic")]),t._v(" "),c("p",[t._v("物联网平台支持在设备操作权限为订阅的自定义Topic中使用两种通配符，以便设备实现批量订阅Topic。")]),t._v(" "),c("table",[c("thead",[c("tr",[c("th",[t._v("通配符")]),t._v(" "),c("th",[t._v("描述")])])]),t._v(" "),c("tbody",[c("tr",[c("td",[t._v("#")]),t._v(" "),c("td",[t._v("#只能出现在Topic的最后一个类目，代表本级及下级所有类目。"),c("br"),t._v(" 例如：自定义Topic"),c("code",[t._v("/a1aycMA****/${deviceName}/user/#")]),t._v("。设备device1订阅"),c("code",[t._v("/a1aycMA****/device1/user/#")]),t._v(",表示订阅以"),c("code",[t._v("/a1aycMA****/device1/user/")]),t._v("为开头的全部Topic，包含"),c("code",[t._v("/a1aycMA****/device1/user/update")]),t._v("、"),c("code",[t._v("/a1aycMA****/device1/user/update/error")]),t._v("等Topic。")])]),t._v(" "),c("tr",[c("td",[t._v("+")]),t._v(" "),c("td",[t._v("代表本级所有类目。"),c("br"),t._v("例如：自定义Topic"),c("code",[t._v("/a1aycMA****/${deviceName}/user/+/error")]),t._v("。设备device1订阅"),c("code",[t._v("/a1aycMA****/device1/user/+/error")]),t._v("，表示订阅"),c("code",[t._v("/a1aycMA****/device1/user/get/error")]),t._v("、"),c("code",[t._v("/a1aycMA****/device1/user/update/error")]),t._v("等Topic。")])])])]),t._v(" "),c("p",[t._v("由于带通配符的Topic实质为一组Topic的集合，因此带通配符的Topic不支持在设备的Topic列表页面执行发布消息操作，将消息发布到已订阅该Topic的设备。")]),t._v(" "),c("h2",{attrs:{id:"自定义topic通信"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#自定义topic通信"}},[t._v("#")]),t._v(" 自定义Topic通信")]),t._v(" "),c("p",[t._v("服务端调用"),c("a",{attrs:{href:"https://help.aliyun.com/document_detail/69793.htm#doc-api-Iot-Pub",title:"调用该接口通过自定义Topic向指定设备发布消息。",target:"_blank",rel:"noopener noreferrer"}},[t._v("Pub"),c("OutboundLink")],1),t._v("，可向指定的自定义Topic发布消息。设备通过订阅该Topic，接收来自服务端的消息。")]),t._v(" "),c("p",[t._v("使用自定义Topic通信的示例，请参见"),c("a",{attrs:{href:"https://help.aliyun.com/document_detail/120986.htm#concept-423001",title:"您可以在物联网平台上自定义Topic类，设备将消息发送到自定义Topic中，服务端通过AMQP SDK获取设备上报消息；服务端通过调用云端API Pub向设备发布指令。自定义Topic通信不使用物模型，消息的数据结构由您自定义。",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用自定义Topic进行通信"),c("OutboundLink")],1),t._v("。")])])}),[],!1,null,null,null);e.default=v.exports}}]);