<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TDengine 集群安装、管理 | 数蛙技术团队</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
    <script type="text/javascript" src="https://s9.cnzz.com/z_stat.php?id=1279876880&amp;web_id=1279876880"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    <meta name="description" content="数蛙科技是一家致力于提供物联网垂直领域应用使能平台及解决方案的创新型公司。">
    <meta name="referrer" content="never">
    
    <link rel="preload" href="/assets/css/0.styles.23a8192d.css" as="style"><link rel="preload" href="/assets/js/app.9ad6f4af.js" as="script"><link rel="preload" href="/assets/js/7.57a5124b.js" as="script"><link rel="preload" href="/assets/js/5.7fd7e714.js" as="script"><link rel="preload" href="/assets/js/86.6150d325.js" as="script"><link rel="prefetch" href="/assets/js/10.94b48a9e.js"><link rel="prefetch" href="/assets/js/100.e76f7b79.js"><link rel="prefetch" href="/assets/js/101.042248a8.js"><link rel="prefetch" href="/assets/js/102.b309379c.js"><link rel="prefetch" href="/assets/js/103.5d1df863.js"><link rel="prefetch" href="/assets/js/104.c1cfc9c6.js"><link rel="prefetch" href="/assets/js/105.3f318f45.js"><link rel="prefetch" href="/assets/js/106.cf348c58.js"><link rel="prefetch" href="/assets/js/107.4f069813.js"><link rel="prefetch" href="/assets/js/108.cdb3a7eb.js"><link rel="prefetch" href="/assets/js/109.0262eaee.js"><link rel="prefetch" href="/assets/js/11.d446296b.js"><link rel="prefetch" href="/assets/js/110.ecd4a471.js"><link rel="prefetch" href="/assets/js/111.f56d3bdd.js"><link rel="prefetch" href="/assets/js/112.a5ea6c25.js"><link rel="prefetch" href="/assets/js/113.ebfa1b32.js"><link rel="prefetch" href="/assets/js/114.4eb1394b.js"><link rel="prefetch" href="/assets/js/115.f2db7baf.js"><link rel="prefetch" href="/assets/js/116.62dddb94.js"><link rel="prefetch" href="/assets/js/117.8acd692f.js"><link rel="prefetch" href="/assets/js/118.3227d55b.js"><link rel="prefetch" href="/assets/js/119.41f5450f.js"><link rel="prefetch" href="/assets/js/12.34496997.js"><link rel="prefetch" href="/assets/js/120.19d8746b.js"><link rel="prefetch" href="/assets/js/121.1d2397f1.js"><link rel="prefetch" href="/assets/js/122.b4351c1b.js"><link rel="prefetch" href="/assets/js/123.c27ce9e9.js"><link rel="prefetch" href="/assets/js/124.039e8e54.js"><link rel="prefetch" href="/assets/js/125.fac5bae1.js"><link rel="prefetch" href="/assets/js/126.e88b97a3.js"><link rel="prefetch" href="/assets/js/127.0b257c53.js"><link rel="prefetch" href="/assets/js/128.d625042d.js"><link rel="prefetch" href="/assets/js/129.fac9e442.js"><link rel="prefetch" href="/assets/js/13.5d6f8510.js"><link rel="prefetch" href="/assets/js/130.0525d404.js"><link rel="prefetch" href="/assets/js/131.a17b5952.js"><link rel="prefetch" href="/assets/js/132.24cdd008.js"><link rel="prefetch" href="/assets/js/133.94f4eae7.js"><link rel="prefetch" href="/assets/js/134.0d49313a.js"><link rel="prefetch" href="/assets/js/135.f7669254.js"><link rel="prefetch" href="/assets/js/136.efb0ef00.js"><link rel="prefetch" href="/assets/js/137.58f14a44.js"><link rel="prefetch" href="/assets/js/138.558eb39c.js"><link rel="prefetch" href="/assets/js/139.cde0768f.js"><link rel="prefetch" href="/assets/js/14.84b59c5c.js"><link rel="prefetch" href="/assets/js/140.4ef263f0.js"><link rel="prefetch" href="/assets/js/141.86c29905.js"><link rel="prefetch" href="/assets/js/142.425d13c4.js"><link rel="prefetch" href="/assets/js/143.316d5f7a.js"><link rel="prefetch" href="/assets/js/144.555cf549.js"><link rel="prefetch" href="/assets/js/145.09923790.js"><link rel="prefetch" href="/assets/js/146.518e8229.js"><link rel="prefetch" href="/assets/js/147.b42fa1d9.js"><link rel="prefetch" href="/assets/js/148.f46b7254.js"><link rel="prefetch" href="/assets/js/149.e76c58f9.js"><link rel="prefetch" href="/assets/js/15.49a4a3b1.js"><link rel="prefetch" href="/assets/js/150.d12554f1.js"><link rel="prefetch" href="/assets/js/151.3d381ef6.js"><link rel="prefetch" href="/assets/js/152.1d80bfec.js"><link rel="prefetch" href="/assets/js/153.81975def.js"><link rel="prefetch" href="/assets/js/154.f5e2d9c1.js"><link rel="prefetch" href="/assets/js/155.8df247be.js"><link rel="prefetch" href="/assets/js/156.f77ce1db.js"><link rel="prefetch" href="/assets/js/157.cd1e1bf4.js"><link rel="prefetch" href="/assets/js/158.b588ece2.js"><link rel="prefetch" href="/assets/js/159.297910f5.js"><link rel="prefetch" href="/assets/js/16.b69d368e.js"><link rel="prefetch" href="/assets/js/160.80100bd4.js"><link rel="prefetch" href="/assets/js/161.410c5eb9.js"><link rel="prefetch" href="/assets/js/162.4bbf3567.js"><link rel="prefetch" href="/assets/js/163.0d6a6ecf.js"><link rel="prefetch" href="/assets/js/164.9f9f62bd.js"><link rel="prefetch" href="/assets/js/165.ce635641.js"><link rel="prefetch" href="/assets/js/166.f723b802.js"><link rel="prefetch" href="/assets/js/167.d2cad232.js"><link rel="prefetch" href="/assets/js/168.0979d293.js"><link rel="prefetch" href="/assets/js/169.d8d694f9.js"><link rel="prefetch" href="/assets/js/17.01e6811b.js"><link rel="prefetch" href="/assets/js/170.19a7bf06.js"><link rel="prefetch" href="/assets/js/171.659d60c7.js"><link rel="prefetch" href="/assets/js/172.3c3b76a8.js"><link rel="prefetch" href="/assets/js/173.7479f312.js"><link rel="prefetch" href="/assets/js/174.4adac213.js"><link rel="prefetch" href="/assets/js/175.d7abc90e.js"><link rel="prefetch" href="/assets/js/176.c9d309e3.js"><link rel="prefetch" href="/assets/js/177.ad72d2c5.js"><link rel="prefetch" href="/assets/js/178.0d5e00ac.js"><link rel="prefetch" href="/assets/js/179.ac9a17b8.js"><link rel="prefetch" href="/assets/js/18.0b6e8a24.js"><link rel="prefetch" href="/assets/js/180.7f226da2.js"><link rel="prefetch" href="/assets/js/181.0ddefcc9.js"><link rel="prefetch" href="/assets/js/182.ac5b1af4.js"><link rel="prefetch" href="/assets/js/183.beedfd89.js"><link rel="prefetch" href="/assets/js/184.85a0bfe5.js"><link rel="prefetch" href="/assets/js/185.2e12fdcb.js"><link rel="prefetch" href="/assets/js/186.e5498877.js"><link rel="prefetch" href="/assets/js/187.22dc4f52.js"><link rel="prefetch" href="/assets/js/188.b597f946.js"><link rel="prefetch" href="/assets/js/189.76891f7e.js"><link rel="prefetch" href="/assets/js/19.096afb85.js"><link rel="prefetch" href="/assets/js/190.c36c4d43.js"><link rel="prefetch" href="/assets/js/191.2d6359cb.js"><link rel="prefetch" href="/assets/js/192.bfcc0c14.js"><link rel="prefetch" href="/assets/js/193.1019f1fc.js"><link rel="prefetch" href="/assets/js/194.924c2f21.js"><link rel="prefetch" href="/assets/js/195.d6224fd2.js"><link rel="prefetch" href="/assets/js/196.31a55137.js"><link rel="prefetch" href="/assets/js/197.946e5ac9.js"><link rel="prefetch" href="/assets/js/198.76094414.js"><link rel="prefetch" href="/assets/js/199.e10895b5.js"><link rel="prefetch" href="/assets/js/20.6541d126.js"><link rel="prefetch" href="/assets/js/200.c0d2b522.js"><link rel="prefetch" href="/assets/js/201.6b043182.js"><link rel="prefetch" href="/assets/js/202.24728efb.js"><link rel="prefetch" href="/assets/js/203.80a083aa.js"><link rel="prefetch" href="/assets/js/204.ccb9b478.js"><link rel="prefetch" href="/assets/js/205.7f17c07d.js"><link rel="prefetch" href="/assets/js/206.5e0e8665.js"><link rel="prefetch" href="/assets/js/207.2a44e138.js"><link rel="prefetch" href="/assets/js/208.09c10854.js"><link rel="prefetch" href="/assets/js/209.92f909f1.js"><link rel="prefetch" href="/assets/js/21.c8557d75.js"><link rel="prefetch" href="/assets/js/210.b1cf583f.js"><link rel="prefetch" href="/assets/js/211.133b5029.js"><link rel="prefetch" href="/assets/js/212.fede7b60.js"><link rel="prefetch" href="/assets/js/213.63416b22.js"><link rel="prefetch" href="/assets/js/214.adc4959b.js"><link rel="prefetch" href="/assets/js/215.7838c0bb.js"><link rel="prefetch" href="/assets/js/216.cb29717a.js"><link rel="prefetch" href="/assets/js/217.661f7165.js"><link rel="prefetch" href="/assets/js/218.bce72fc8.js"><link rel="prefetch" href="/assets/js/219.328b05c0.js"><link rel="prefetch" href="/assets/js/22.724987b2.js"><link rel="prefetch" href="/assets/js/220.f9960879.js"><link rel="prefetch" href="/assets/js/221.04354eff.js"><link rel="prefetch" href="/assets/js/222.25ed6ed4.js"><link rel="prefetch" href="/assets/js/223.4730aa94.js"><link rel="prefetch" href="/assets/js/224.0d735e8f.js"><link rel="prefetch" href="/assets/js/225.46bd405a.js"><link rel="prefetch" href="/assets/js/226.9fa6e38f.js"><link rel="prefetch" href="/assets/js/227.a7b916fb.js"><link rel="prefetch" href="/assets/js/228.46474565.js"><link rel="prefetch" href="/assets/js/229.01194bd4.js"><link rel="prefetch" href="/assets/js/23.f26cdfba.js"><link rel="prefetch" href="/assets/js/230.0bfe402b.js"><link rel="prefetch" href="/assets/js/231.07b9b710.js"><link rel="prefetch" href="/assets/js/232.4a643afe.js"><link rel="prefetch" href="/assets/js/233.c42321c6.js"><link rel="prefetch" href="/assets/js/234.f5fc1e23.js"><link rel="prefetch" href="/assets/js/235.df3d01fe.js"><link rel="prefetch" href="/assets/js/236.4dc0c1ed.js"><link rel="prefetch" href="/assets/js/237.7daf3f65.js"><link rel="prefetch" href="/assets/js/238.73f5b61d.js"><link rel="prefetch" href="/assets/js/239.0d615253.js"><link rel="prefetch" href="/assets/js/24.5b45f9ae.js"><link rel="prefetch" href="/assets/js/240.0d65320e.js"><link rel="prefetch" href="/assets/js/241.b6f487a8.js"><link rel="prefetch" href="/assets/js/242.8d3f3bbe.js"><link rel="prefetch" href="/assets/js/243.2e992782.js"><link rel="prefetch" href="/assets/js/244.f8af1ed9.js"><link rel="prefetch" href="/assets/js/245.a16d629b.js"><link rel="prefetch" href="/assets/js/246.300e48f9.js"><link rel="prefetch" href="/assets/js/247.9d7a781b.js"><link rel="prefetch" href="/assets/js/248.834485c2.js"><link rel="prefetch" href="/assets/js/249.8a714947.js"><link rel="prefetch" href="/assets/js/25.fe706261.js"><link rel="prefetch" href="/assets/js/250.44469ba9.js"><link rel="prefetch" href="/assets/js/251.3596fdde.js"><link rel="prefetch" href="/assets/js/252.0fa96ba3.js"><link rel="prefetch" href="/assets/js/253.b9a44038.js"><link rel="prefetch" href="/assets/js/254.31306356.js"><link rel="prefetch" href="/assets/js/255.60084736.js"><link rel="prefetch" href="/assets/js/256.46fb7569.js"><link rel="prefetch" href="/assets/js/257.ca791f05.js"><link rel="prefetch" href="/assets/js/258.95cde37e.js"><link rel="prefetch" href="/assets/js/259.f18d73db.js"><link rel="prefetch" href="/assets/js/26.da13fcd0.js"><link rel="prefetch" href="/assets/js/260.72b5383a.js"><link rel="prefetch" href="/assets/js/261.7a1a65e7.js"><link rel="prefetch" href="/assets/js/262.a341856e.js"><link rel="prefetch" href="/assets/js/263.430d3811.js"><link rel="prefetch" href="/assets/js/264.0c60853b.js"><link rel="prefetch" href="/assets/js/265.6f605b54.js"><link rel="prefetch" href="/assets/js/266.4d615efc.js"><link rel="prefetch" href="/assets/js/267.ab6fab44.js"><link rel="prefetch" href="/assets/js/268.2951f648.js"><link rel="prefetch" href="/assets/js/269.7b66b4bd.js"><link rel="prefetch" href="/assets/js/27.0ebb81d4.js"><link rel="prefetch" href="/assets/js/270.b5eaf9a6.js"><link rel="prefetch" href="/assets/js/271.d3b2c97b.js"><link rel="prefetch" href="/assets/js/272.8fa734ec.js"><link rel="prefetch" href="/assets/js/273.8a434bf7.js"><link rel="prefetch" href="/assets/js/274.3d03e2dd.js"><link rel="prefetch" href="/assets/js/275.524509e4.js"><link rel="prefetch" href="/assets/js/276.0ddd76f7.js"><link rel="prefetch" href="/assets/js/277.6fb9711e.js"><link rel="prefetch" href="/assets/js/278.81751030.js"><link rel="prefetch" href="/assets/js/279.c944328c.js"><link rel="prefetch" href="/assets/js/28.5ff9fda9.js"><link rel="prefetch" href="/assets/js/280.54fb0463.js"><link rel="prefetch" href="/assets/js/281.c7f0e7db.js"><link rel="prefetch" href="/assets/js/282.6c60f1c8.js"><link rel="prefetch" href="/assets/js/283.9d5ebe15.js"><link rel="prefetch" href="/assets/js/284.323342e7.js"><link rel="prefetch" href="/assets/js/285.4523eb6a.js"><link rel="prefetch" href="/assets/js/286.6604b1f2.js"><link rel="prefetch" href="/assets/js/287.a9802cb7.js"><link rel="prefetch" href="/assets/js/288.7581be1b.js"><link rel="prefetch" href="/assets/js/289.003ab145.js"><link rel="prefetch" href="/assets/js/29.57b16200.js"><link rel="prefetch" href="/assets/js/290.b10551aa.js"><link rel="prefetch" href="/assets/js/291.b36f53e5.js"><link rel="prefetch" href="/assets/js/292.7110368f.js"><link rel="prefetch" href="/assets/js/293.13842abe.js"><link rel="prefetch" href="/assets/js/294.0b61f464.js"><link rel="prefetch" href="/assets/js/295.80ea3dff.js"><link rel="prefetch" href="/assets/js/296.c31d9fd8.js"><link rel="prefetch" href="/assets/js/297.be6f430a.js"><link rel="prefetch" href="/assets/js/298.02cfe926.js"><link rel="prefetch" href="/assets/js/299.8effef73.js"><link rel="prefetch" href="/assets/js/30.d8074f86.js"><link rel="prefetch" href="/assets/js/300.81f70518.js"><link rel="prefetch" href="/assets/js/301.7fd77a73.js"><link rel="prefetch" href="/assets/js/302.da523691.js"><link rel="prefetch" href="/assets/js/303.b92b4da0.js"><link rel="prefetch" href="/assets/js/304.4542db03.js"><link rel="prefetch" href="/assets/js/305.5a38d94c.js"><link rel="prefetch" href="/assets/js/306.d84ea4b6.js"><link rel="prefetch" href="/assets/js/307.8192b072.js"><link rel="prefetch" href="/assets/js/308.417cab51.js"><link rel="prefetch" href="/assets/js/309.aa62f9bc.js"><link rel="prefetch" href="/assets/js/31.ce46f87f.js"><link rel="prefetch" href="/assets/js/310.78e61e9b.js"><link rel="prefetch" href="/assets/js/311.c6d2f17d.js"><link rel="prefetch" href="/assets/js/312.5e0b2f7e.js"><link rel="prefetch" href="/assets/js/313.8313b389.js"><link rel="prefetch" href="/assets/js/32.eaf10b18.js"><link rel="prefetch" href="/assets/js/33.a737b6b8.js"><link rel="prefetch" href="/assets/js/34.7d770878.js"><link rel="prefetch" href="/assets/js/35.7364913c.js"><link rel="prefetch" href="/assets/js/36.20b8d6c9.js"><link rel="prefetch" href="/assets/js/37.a68ad04c.js"><link rel="prefetch" href="/assets/js/38.6fd4d8a8.js"><link rel="prefetch" href="/assets/js/39.f2b1417d.js"><link rel="prefetch" href="/assets/js/40.294a1314.js"><link rel="prefetch" href="/assets/js/41.62cd5d09.js"><link rel="prefetch" href="/assets/js/42.97520f13.js"><link rel="prefetch" href="/assets/js/43.99bd151b.js"><link rel="prefetch" href="/assets/js/44.3704fa1a.js"><link rel="prefetch" href="/assets/js/45.4905e4c7.js"><link rel="prefetch" href="/assets/js/46.6098ffb7.js"><link rel="prefetch" href="/assets/js/47.d365a720.js"><link rel="prefetch" href="/assets/js/48.2b5bfc19.js"><link rel="prefetch" href="/assets/js/49.e5877699.js"><link rel="prefetch" href="/assets/js/50.5b98ef31.js"><link rel="prefetch" href="/assets/js/51.3ef4d096.js"><link rel="prefetch" href="/assets/js/52.b97dd265.js"><link rel="prefetch" href="/assets/js/53.cbf9ccf4.js"><link rel="prefetch" href="/assets/js/54.a084e340.js"><link rel="prefetch" href="/assets/js/55.305259e8.js"><link rel="prefetch" href="/assets/js/56.3082d950.js"><link rel="prefetch" href="/assets/js/57.a5abbecf.js"><link rel="prefetch" href="/assets/js/58.c6328222.js"><link rel="prefetch" href="/assets/js/59.176cf7c0.js"><link rel="prefetch" href="/assets/js/6.300c849a.js"><link rel="prefetch" href="/assets/js/60.c2dee3e3.js"><link rel="prefetch" href="/assets/js/61.b6b5ea80.js"><link rel="prefetch" href="/assets/js/62.4bdd2fa3.js"><link rel="prefetch" href="/assets/js/63.7773e09e.js"><link rel="prefetch" href="/assets/js/64.d9b87481.js"><link rel="prefetch" href="/assets/js/65.9103d24b.js"><link rel="prefetch" href="/assets/js/66.92c46307.js"><link rel="prefetch" href="/assets/js/67.c74bc6e3.js"><link rel="prefetch" href="/assets/js/68.1f620dc2.js"><link rel="prefetch" href="/assets/js/69.cedd3e2d.js"><link rel="prefetch" href="/assets/js/70.94e81a03.js"><link rel="prefetch" href="/assets/js/71.c2b0c5d1.js"><link rel="prefetch" href="/assets/js/72.306ddcf4.js"><link rel="prefetch" href="/assets/js/73.63c441ab.js"><link rel="prefetch" href="/assets/js/74.11bf903e.js"><link rel="prefetch" href="/assets/js/75.285ad466.js"><link rel="prefetch" href="/assets/js/76.eec08ef5.js"><link rel="prefetch" href="/assets/js/77.9ddb4fd3.js"><link rel="prefetch" href="/assets/js/78.f4238aad.js"><link rel="prefetch" href="/assets/js/79.170934cf.js"><link rel="prefetch" href="/assets/js/8.6b9c1818.js"><link rel="prefetch" href="/assets/js/80.e42ac09f.js"><link rel="prefetch" href="/assets/js/81.64665808.js"><link rel="prefetch" href="/assets/js/82.f154f35c.js"><link rel="prefetch" href="/assets/js/83.db4c185e.js"><link rel="prefetch" href="/assets/js/84.4b371fe3.js"><link rel="prefetch" href="/assets/js/85.cb6f3455.js"><link rel="prefetch" href="/assets/js/87.b9b61284.js"><link rel="prefetch" href="/assets/js/88.43a15dfa.js"><link rel="prefetch" href="/assets/js/89.5549c17b.js"><link rel="prefetch" href="/assets/js/9.cfab03b0.js"><link rel="prefetch" href="/assets/js/90.a7d2f0c9.js"><link rel="prefetch" href="/assets/js/91.00752145.js"><link rel="prefetch" href="/assets/js/92.7487e684.js"><link rel="prefetch" href="/assets/js/93.b2454943.js"><link rel="prefetch" href="/assets/js/94.bfda8041.js"><link rel="prefetch" href="/assets/js/95.cdbf9439.js"><link rel="prefetch" href="/assets/js/96.51cfdbdf.js"><link rel="prefetch" href="/assets/js/97.e826db62.js"><link rel="prefetch" href="/assets/js/98.211f9b5b.js"><link rel="prefetch" href="/assets/js/99.0be83cde.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.8d7743fe.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.f20d812e.js"><link rel="prefetch" href="/assets/js/vendors~photo-swipe.751a6989.js">
    <link rel="stylesheet" href="/assets/css/0.styles.23a8192d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">数蛙技术团队</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="用户手册" class="dropdown-title"><span class="title">用户手册</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/manual/cloud/" class="nav-link">数蛙工业数据云平台</a></li><li class="dropdown-item"><!----> <a href="/zh/manual/edge/" class="nav-link">数蛙工业边缘网关</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="产品说明" class="dropdown-title"><span class="title">产品说明</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/product/dgiot/" class="nav-link">一站式物联网平台</a></li><li class="dropdown-item"><!----> <a href="/zh/product/dgpress/" class="nav-link">一站式云压测平台</a></li><li class="dropdown-item"><!----> <a href="/zh/product/dgtest/" class="nav-link">一站式云检测平台</a></li><li class="dropdown-item"><!----> <a href="/zh/product/dgii/" class="nav-link">一站式云工厂平台</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发指南" class="dropdown-title"><span class="title">开发指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/backend/" class="nav-link">服务架构</a></li><li class="dropdown-item"><!----> <a href="/zh/frontend/" class="nav-link">交互技术</a></li><li class="dropdown-item"><!----> <a href="/zh/dataanalysis/" class="nav-link router-link-active">数据分析</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实战教程" class="dropdown-title"><span class="title">实战教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/blog/knowledge/" class="nav-link">基础知识</a></li><li class="dropdown-item"><!----> <a href="/zh/blog/study/" class="nav-link">案例教程</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/dataanalysis/tdengine/10.cluster/docs.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">English</a></li></ul></div></div> <a href="https://github.com/dgiot" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="用户手册" class="dropdown-title"><span class="title">用户手册</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/manual/cloud/" class="nav-link">数蛙工业数据云平台</a></li><li class="dropdown-item"><!----> <a href="/zh/manual/edge/" class="nav-link">数蛙工业边缘网关</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="产品说明" class="dropdown-title"><span class="title">产品说明</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/product/dgiot/" class="nav-link">一站式物联网平台</a></li><li class="dropdown-item"><!----> <a href="/zh/product/dgpress/" class="nav-link">一站式云压测平台</a></li><li class="dropdown-item"><!----> <a href="/zh/product/dgtest/" class="nav-link">一站式云检测平台</a></li><li class="dropdown-item"><!----> <a href="/zh/product/dgii/" class="nav-link">一站式云工厂平台</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发指南" class="dropdown-title"><span class="title">开发指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/backend/" class="nav-link">服务架构</a></li><li class="dropdown-item"><!----> <a href="/zh/frontend/" class="nav-link">交互技术</a></li><li class="dropdown-item"><!----> <a href="/zh/dataanalysis/" class="nav-link router-link-active">数据分析</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实战教程" class="dropdown-title"><span class="title">实战教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/blog/knowledge/" class="nav-link">基础知识</a></li><li class="dropdown-item"><!----> <a href="/zh/blog/study/" class="nav-link">案例教程</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/dataanalysis/tdengine/10.cluster/docs.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">English</a></li></ul></div></div> <a href="https://github.com/dgiot" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <div style="padding-left:1.5rem;"><div></div></div> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据分析</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>TDengine</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh/dataanalysis/tdengine/00.index/docs.html" class="sidebar-link">TDengine文档</a></li><li><a href="/zh/dataanalysis/tdengine/01.evaluation/docs.html" class="sidebar-link">TDengine 介绍</a></li><li><a href="/zh/dataanalysis/tdengine/02.getting-started/docs.html" class="sidebar-link">立即开始</a></li><li><a href="/zh/dataanalysis/tdengine/03.architecture/docs.html" class="sidebar-link">数据模型和整体架构</a></li><li><a href="/zh/dataanalysis/tdengine/04.model/docs.html" class="sidebar-link">数据建模</a></li><li><a href="/zh/dataanalysis/tdengine/05.insert/docs.html" class="sidebar-link">高效写入数据</a></li><li><a href="/zh/dataanalysis/tdengine/06.queries/docs.html" class="sidebar-link">高效查询数据</a></li><li><a href="/zh/dataanalysis/tdengine/07.advanced-features/docs.html" class="sidebar-link">高级功能</a></li><li><a href="/zh/dataanalysis/tdengine/08.connector/docs.html" class="sidebar-link">连接器简介</a></li><li><a href="/zh/dataanalysis/tdengine/08.connector/01.java/docs.html" class="sidebar-link">Java Connector</a></li><li><a href="/zh/dataanalysis/tdengine/09.connections/docs.html" class="sidebar-link">与其他工具的连接</a></li><li><a href="/zh/dataanalysis/tdengine/10.cluster/docs.html" aria-current="page" class="active sidebar-link">TDengine 集群安装、管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/10.cluster/docs.html#准备工作" class="sidebar-link">准备工作</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/10.cluster/docs.html#启动第一个数据节点" class="sidebar-link">启动第一个数据节点</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/10.cluster/docs.html#启动后续数据节点" class="sidebar-link">启动后续数据节点</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/10.cluster/docs.html#数据节点管理" class="sidebar-link">数据节点管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/10.cluster/docs.html#添加数据节点" class="sidebar-link">添加数据节点</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/10.cluster/docs.html#删除数据节点" class="sidebar-link">删除数据节点</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/10.cluster/docs.html#查看数据节点" class="sidebar-link">查看数据节点</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/10.cluster/docs.html#查看虚拟节点组" class="sidebar-link">查看虚拟节点组</a></li></ul></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/10.cluster/docs.html#vnode的高可用性" class="sidebar-link">vnode的高可用性</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/10.cluster/docs.html#mnode的高可用性" class="sidebar-link">Mnode的高可用性</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/10.cluster/docs.html#负载均衡" class="sidebar-link">负载均衡</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/10.cluster/docs.html#数据节点离线处理" class="sidebar-link">数据节点离线处理</a></li><li class="sidebar-sub-header"><a href="/zh/dataanalysis/tdengine/10.cluster/docs.html#arbitrator的使用" class="sidebar-link">Arbitrator的使用</a></li></ul></li><li><a href="/zh/dataanalysis/tdengine/11.administrator/docs.html" class="sidebar-link">TDengine的运营与维护</a></li><li><a href="/zh/dataanalysis/tdengine/12.taos-sql/docs.html" class="sidebar-link">Sql示例</a></li><li><a href="/zh/dataanalysis/tdengine/12.taos-sql/01.error-code/docs.html" class="sidebar-link">错误码</a></li><li><a href="/zh/dataanalysis/tdengine/13.faq/docs.html" class="sidebar-link">常见问题</a></li></ul></section></li></ul> </aside> <!----> <!----> <main class="page"><div class="theme-default-content" style="margin-top:3.6rem;padding-top:0;padding-bottom:0;"></div> <div class="theme-default-content"><div class="content__default"><h1 id="tdengine-集群安装、管理"><a href="#tdengine-集群安装、管理" class="header-anchor">#</a> TDengine 集群安装、管理</h1> <p>多个TDengine服务器，也就是多个taosd的运行实例可以组成一个集群，以保证TDengine的高可靠运行，并提供水平扩展能力。要了解TDengine 2.0的集群管理，需要对集群的基本概念有所了解，请看TDengine 2.0整体架构一章。而且在安装集群之前，先请按照<a href="https://www.taosdata.com/cn/documentation/getting-started/" target="_blank" rel="noopener noreferrer">《立即开始》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>一章安装并体验单节点功能。</p> <p>集群的每个数据节点是由End Point来唯一标识的，End Point是由FQDN(Fully Qualified Domain Name)外加Port组成，比如 h1.taosdata.com:6030。一般FQDN就是服务器的hostname，可通过Linux命令<code>hostname -f</code>获取（如何配置FQDN，请参考：<a href="https://www.taosdata.com/blog/2020/09/11/1824.html" target="_blank" rel="noopener noreferrer">一篇文章说清楚TDengine的FQDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）。端口是这个数据节点对外服务的端口号，缺省是6030，但可以通过taos.cfg里配置参数serverPort进行修改。一个物理节点可能配置了多个hostname, TDengine会自动获取第一个，但也可以通过taos.cfg里配置参数fqdn进行指定。如果习惯IP地址直接访问，可以将参数fqdn设置为本节点的IP地址。</p> <p>TDengine的集群管理极其简单，除添加和删除节点需要人工干预之外，其他全部是自动完成，最大程度的降低了运维的工作量。本章对集群管理的操作做详细的描述。</p> <p>关于集群搭建请参考<a href="https://www.taosdata.com/blog/2020/11/11/1961.html" target="_blank" rel="noopener noreferrer">视频教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="准备工作"><a href="#准备工作" class="header-anchor">#</a> <a id="prepare" class="anchor"></a>准备工作</h2> <p><strong>第零步</strong>：规划集群所有物理节点的FQDN，将规划好的FQDN分别添加到每个物理节点的/etc/hostname；修改每个物理节点的/etc/hosts，将所有集群物理节点的IP与FQDN的对应添加好。【如部署了DNS，请联系网络管理员在DNS上做好相关配置】</p> <p><strong>第一步</strong>：如果搭建集群的物理节点中，存有之前的测试数据、装过1.X的版本，或者装过其他版本的TDengine，请先将其删除，并清空所有数据，具体步骤请参考博客<a href="https://www.taosdata.com/blog/2019/08/09/566.html" target="_blank" rel="noopener noreferrer">《TDengine多种安装包的安装和卸载》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br>
**注意1：**因为FQDN的信息会写进文件，如果之前没有配置或者更改FQDN，且启动了TDengine。请一定在确保数据无用或者备份的前提下，清理一下之前的数据（rm -rf /var/lib/taos/）；<br>
**注意2：**客户端也需要配置，确保它可以正确解析每个节点的FQDN配置，不管是通过DNS服务，还是 Host 文件。</p> <p><strong>第二步</strong>：建议关闭所有物理节点的防火墙，至少保证端口：6030 - 6042的TCP和UDP端口都是开放的。<strong>强烈建议</strong>先关闭防火墙，集群搭建完毕之后，再来配置端口；</p> <p><strong>第三步</strong>：在所有物理节点安装TDengine，且版本必须是一致的，<strong>但不要启动taosd</strong>。安装时，提示输入是否要加入一个已经存在的TDengine集群时，第一个物理节点直接回车创建新集群，后续物理节点则输入该集群任何一个在线的物理节点的FQDN:端口号(默认6030)；</p> <p><strong>第四步</strong>：检查所有数据节点，以及应用程序所在物理节点的网络设置：</p> <ol><li>每个物理节点上执行命令<code>hostname -f</code>，查看和确认所有节点的hostname是不相同的(应用驱动所在节点无需做此项检查)；</li> <li>每个物理节点上执行<code>ping host</code>, 其中host是其他物理节点的hostname, 看能否ping通其它物理节点; 如果不能ping通，需要检查网络设置, 或/etc/hosts文件(Windows系统默认路径为C:\Windows\system32\drivers\etc\hosts)，或DNS的配置。如果无法ping通，是无法组成集群的；</li> <li>从应用运行的物理节点，ping taosd运行的数据节点，如果无法ping通，应用是无法连接taosd的，请检查应用所在物理节点的DNS设置或hosts文件；</li> <li>每个数据节点的End Point就是输出的hostname外加端口号，比如h1.taosdata.com:6030</li></ol> <p><strong>第五步</strong>：修改TDengine的配置文件（所有节点的文件/etc/taos/taos.cfg都需要修改）。假设准备启动的第一个数据节点End Point为 h1.taosdata.com:6030, 其与集群配置相关参数如下：</p> <div class="language- extra-class"><pre class="language-text"><code>// firstEp 是每个数据节点首次启动后连接的第一个数据节点
firstEp               h1.taosdata.com:6030

// 必须配置为本数据节点的FQDN，如果本机只有一个hostname, 可注释掉本配置
fqdn                  h1.taosdata.com  

// 配置本数据节点的端口号，缺省是6030
serverPort            6030

// 使用场景，请参考《Arbitrator的使用》的部分
arbitrator            ha.taosdata.com:6042
</code></pre></div><p>一定要修改的参数是firstEp和fqdn。在每个数据节点，firstEp需全部配置成一样，<strong>但fqdn一定要配置成其所在数据节点的值</strong>。其他参数可不做任何修改，除非你很清楚为什么要修改。</p> <p><strong>加入到集群中的数据节点dnode，涉及集群相关的下表11项参数必须完全相同，否则不能成功加入到集群中。</strong></p> <table><thead><tr><th><strong>#</strong></th> <th><strong>配置参数名称</strong></th> <th><strong>含义</strong></th></tr></thead> <tbody><tr><td>1</td> <td>numOfMnodes</td> <td>系统中管理节点个数</td></tr> <tr><td>2</td> <td>mnodeEqualVnodeNum</td> <td>一个mnode等同于vnode消耗的个数</td></tr> <tr><td>3</td> <td>offlineThreshold</td> <td>dnode离线阈值，超过该时间将导致Dnode离线</td></tr> <tr><td>4</td> <td>statusInterval</td> <td>dnode向mnode报告状态时长</td></tr> <tr><td>5</td> <td>arbitrator</td> <td>系统中裁决器的end point</td></tr> <tr><td>6</td> <td>timezone</td> <td>时区</td></tr> <tr><td>7</td> <td>locale</td> <td>系统区位信息及编码格式</td></tr> <tr><td>8</td> <td>charset</td> <td>字符集编码</td></tr> <tr><td>9</td> <td>balance</td> <td>是否启动负载均衡</td></tr> <tr><td>10</td> <td>maxTablesPerVnode</td> <td>每个vnode中能够创建的最大表个数</td></tr> <tr><td>11</td> <td>maxVgroupsPerDb</td> <td>每个DB中 能够使用的最大vnode个数</td></tr></tbody></table> <h2 id="启动第一个数据节点"><a href="#启动第一个数据节点" class="header-anchor">#</a> <a id="node-one" class="anchor"></a>启动第一个数据节点</h2> <p>按照<a href="https://www.taosdata.com/cn/documentation/getting-started/" target="_blank" rel="noopener noreferrer">《立即开始》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>里的指示，启动第一个数据节点，例如h1.taosdata.com，然后执行taos, 启动taos shell，从shell里执行命令&quot;show dnodes;&quot;，如下所示：</p> <div class="language- extra-class"><pre class="language-text"><code>Welcome to the TDengine shell from Linux, Client Version:2.0.0.0
Copyright (c) 2017 by TAOS Data, Inc. All rights reserved.

taos&gt; show dnodes;
 id |       end_point    | vnodes | cores | status | role |      create_time        |
=====================================================================================
  1 |  h1.taos.com:6030  |      0 |     2 |  ready |  any | 2020-07-31 03:49:29.202 |
Query OK, 1 row(s) in set (0.006385s)

taos&gt;
</code></pre></div><p>上述命令里，可以看到这个刚启动的这个数据节点的End Point是：h1.taos.com:6030，就是这个新集群的firstEP。</p> <h2 id="启动后续数据节点"><a href="#启动后续数据节点" class="header-anchor">#</a> <a id="node-other" class="anchor"></a>启动后续数据节点</h2> <p>将后续的数据节点添加到现有集群，具体有以下几步：</p> <ol><li><p>按照<a href="https://www.taosdata.com/cn/documentation/getting-started/" target="_blank" rel="noopener noreferrer">《立即开始》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>一章的方法在每个物理节点启动taosd；</p></li> <li><p>在第一个数据节点，使用CLI程序taos, 登录进TDengine系统, 执行命令:</p> <div class="language- extra-class"><pre class="language-text"><code>CREATE DNODE &quot;h2.taos.com:6030&quot;; 
</code></pre></div><p>将新数据节点的End Point (准备工作中第四步获知的) 添加进集群的EP列表。<strong>&quot;fqdn:port&quot;需要用双引号引起来</strong>，否则出错。请注意将示例的“h2.taos.com:6030&quot; 替换为这个新数据节点的End Point。</p></li> <li><p>然后执行命令</p> <div class="language- extra-class"><pre class="language-text"><code>SHOW DNODES;
</code></pre></div><p>查看新节点是否被成功加入。如果该被加入的数据节点处于离线状态，请做两个检查</p> <ul><li>查看该数据节点的taosd是否正常工作，如果没有正常运行，需要先检查为什么</li> <li>查看该数据节点taosd日志文件taosdlog.0里前面几行日志(一般在/var/log/taos目录)，看日志里输出的该数据节点fqdn以及端口号是否为刚添加的End Point。如果不一致，需要将正确的End Point添加进去。</li></ul></li></ol> <p>按照上述步骤可以源源不断的将新的数据节点加入到集群。</p> <p><strong>提示：</strong></p> <ul><li>任何已经加入集群在线的数据节点，都可以作为后续待加入节点的firstEP。</li> <li>firstEp这个参数仅仅在该数据节点首次加入集群时有作用，加入集群后，该数据节点会保存最新的mnode的End Point列表，不再依赖这个参数。</li> <li>两个没有配置firstEp参数的数据节点dnode启动后，会独立运行起来。这个时候，无法将其中一个数据节点加入到另外一个数据节点，形成集群。<strong>无法将两个独立的集群合并成为新的集群</strong>。</li></ul> <h2 id="数据节点管理"><a href="#数据节点管理" class="header-anchor">#</a> <a id="management" class="anchor"></a>数据节点管理</h2> <p>上面已经介绍如何从零开始搭建集群。集群组建完后，还可以随时添加新的数据节点进行扩容，或删除数据节点，并检查集群当前状态。</p> <h3 id="添加数据节点"><a href="#添加数据节点" class="header-anchor">#</a> 添加数据节点</h3> <p>执行CLI程序taos, 使用root账号登录进系统, 执行:</p> <div class="language- extra-class"><pre class="language-text"><code>CREATE DNODE &quot;fqdn:port&quot;; 
</code></pre></div><p>将新数据节点的End Point添加进集群的EP列表。<strong>&quot;fqdn:port&quot;需要用双引号引起来</strong>，否则出错。一个数据节点对外服务的fqdn和port可以通过配置文件taos.cfg进行配置，缺省是自动获取。【强烈不建议用自动获取方式来配置FQDN，可能导致生成的数据节点的End Point不是所期望的】</p> <h3 id="删除数据节点"><a href="#删除数据节点" class="header-anchor">#</a> 删除数据节点</h3> <p>执行CLI程序taos, 使用root账号登录进TDengine系统，执行：</p> <div class="language- extra-class"><pre class="language-text"><code>DROP DNODE &quot;fqdn:port&quot;;
</code></pre></div><p>其中fqdn是被删除的节点的FQDN，port是其对外服务器的端口号</p> <p><font color="green"><strong>【注意】</strong></font></p> <ul><li><p>一个数据节点一旦被drop之后，不能重新加入集群。需要将此节点重新部署（清空数据文件夹）。集群在完成drop dnode操作之前，会将该dnode的数据迁移走。</p></li> <li><p>请注意 drop dnode 和 停止taosd进程是两个不同的概念，不要混淆：因为删除dnode之前要执行迁移数据的操作，因此被删除的dnode必须保持在线状态。待删除操作结束之后，才能停止taosd进程。</p></li> <li><p>一个数据节点被drop之后，其他节点都会感知到这个dnodeID的删除操作，任何集群中的节点都不会再接收此dnodeID的请求。</p></li> <li><p>dnodeID的是集群自动分配的，不得人工指定。它在生成时递增的，不会重复。</p></li></ul> <h3 id="查看数据节点"><a href="#查看数据节点" class="header-anchor">#</a> 查看数据节点</h3> <p>执行CLI程序taos,使用root账号登录进TDengine系统，执行：</p> <div class="language- extra-class"><pre class="language-text"><code>SHOW DNODES;
</code></pre></div><p>它将列出集群中所有的dnode,每个dnode的fqdn:port, 状态(ready, offline等），vnode数目，还未使用的vnode数目等信息。在添加或删除一个数据节点后，可以使用该命令查看。</p> <h3 id="查看虚拟节点组"><a href="#查看虚拟节点组" class="header-anchor">#</a> 查看虚拟节点组</h3> <p>为充分利用多核技术，并提供scalability，数据需要分片处理。因此TDengine会将一个DB的数据切分成多份，存放在多个vnode里。这些vnode可能分布在多个数据节点dnode里，这样就实现了水平扩展。一个vnode仅仅属于一个DB，但一个DB可以有多个vnode。vnode的是mnode根据当前系统资源的情况，自动进行分配的，无需任何人工干预。</p> <p>执行CLI程序taos,使用root账号登录进TDengine系统，执行：</p> <div class="language- extra-class"><pre class="language-text"><code>SHOW VGROUPS;
</code></pre></div><h2 id="vnode的高可用性"><a href="#vnode的高可用性" class="header-anchor">#</a> <a id="high-availability" class="anchor"></a>vnode的高可用性</h2> <p>TDengine通过多副本的机制来提供系统的高可用性，包括vnode和mnode的高可用性。</p> <p>vnode的副本数是与DB关联的，一个集群里可以有多个DB，根据运营的需求，每个DB可以配置不同的副本数。创建数据库时，通过参数replica 指定副本数（缺省为1）。如果副本数为1，系统的可靠性无法保证，只要数据所在的节点宕机，就将无法提供服务。集群的节点数必须大于等于副本数，否则创建表时将返回错误“more dnodes are needed&quot;。比如下面的命令将创建副本数为3的数据库demo：</p> <div class="language- extra-class"><pre class="language-text"><code>CREATE DATABASE demo replica 3;
</code></pre></div><p>一个DB里的数据会被切片分到多个vnode group，vnode group里的vnode数目就是DB的副本数，同一个vnode group里各vnode的数据是完全一致的。为保证高可用性，vnode group里的vnode一定要分布在不同的数据节点dnode里（实际部署时，需要在不同的物理机上），只要一个vgroup里超过半数的vnode处于工作状态，这个vgroup就能正常的对外服务。</p> <p>一个数据节点dnode里可能有多个DB的数据，因此一个dnode离线时，可能会影响到多个DB。如果一个vnode group里的一半或一半以上的vnode不工作，那么该vnode group就无法对外服务，无法插入或读取数据，这样会影响到它所属的DB的一部分表的读写操作。</p> <p>因为vnode的引入，无法简单的给出结论：“集群中过半数据节点dnode工作，集群就应该工作”。但是对于简单的情形，很好下结论。比如副本数为3，只有三个dnode，那如果仅有一个节点不工作，整个集群还是可以正常工作的，但如果有两个数据节点不工作，那整个集群就无法正常工作了。</p> <h2 id="mnode的高可用性"><a href="#mnode的高可用性" class="header-anchor">#</a> <a id="mnode" class="anchor"></a>Mnode的高可用性</h2> <p>TDengine集群是由mnode (taosd的一个模块，管理节点) 负责管理的，为保证mnode的高可用，可以配置多个mnode副本，副本数由系统配置参数numOfMnodes决定，有效范围为1-3。为保证元数据的强一致性，mnode副本之间是通过同步的方式进行数据复制的。</p> <p>一个集群有多个数据节点dnode, 但一个dnode至多运行一个mnode实例。多个dnode情况下，哪个dnode可以作为mnode呢？这是完全由系统根据整个系统资源情况，自动指定的。用户可通过CLI程序taos，在TDengine的console里，执行如下命令：</p> <div class="language- extra-class"><pre class="language-text"><code>SHOW MNODES;
</code></pre></div><p>来查看mnode列表，该列表将列出mnode所处的dnode的End Point和角色(master, slave, unsynced 或offline)。
当集群中第一个数据节点启动时，该数据节点一定会运行一个mnode实例，否则该数据节点dnode无法正常工作，因为一个系统是必须有至少一个mnode的。如果numOfMnodes配置为2，启动第二个dnode时，该dnode也将运行一个mnode实例。</p> <p>为保证mnode服务的高可用性，numOfMnodes必须设置为2或更大。因为mnode保存的元数据必须是强一致的，如果numOfMnodes大于2，复制参数quorum自动设为2，也就是说，至少要保证有两个副本写入数据成功，才通知客户端应用写入成功。</p> <p>**注意：**一个TDengine高可用系统，无论是vnode还是mnode, 都必须配置多个副本。</p> <h2 id="负载均衡"><a href="#负载均衡" class="header-anchor">#</a> <a id="load-balancing" class="anchor"></a>负载均衡</h2> <p>有三种情况，将触发负载均衡，而且都无需人工干预。</p> <ul><li>当一个新数据节点添加进集群时，系统将自动触发负载均衡，一些节点上的数据将被自动转移到新数据节点上，无需任何人工干预。</li> <li>当一个数据节点从集群中移除时，系统将自动把该数据节点上的数据转移到其他数据节点，无需任何人工干预。</li> <li>如果一个数据节点过热（数据量过大），系统将自动进行负载均衡，将该数据节点的一些vnode自动挪到其他节点。</li></ul> <p>当上述三种情况发生时，系统将启动一各个数据节点的负载计算，从而决定如何挪动。</p> <p><strong>【提示】负载均衡由参数balance控制，它决定是否启动自动负载均衡。</strong></p> <h2 id="数据节点离线处理"><a href="#数据节点离线处理" class="header-anchor">#</a> <a id="offline" class="anchor"></a>数据节点离线处理</h2> <p>如果一个数据节点离线，TDengine集群将自动检测到。有如下两种情况：</p> <ul><li>该数据节点离线超过一定时间（taos.cfg里配置参数offlineThreshold控制时长)，系统将自动把该数据节点删除，产生系统报警信息，触发负载均衡流程。如果该被删除的数据节点重新上线时，它将无法加入集群，需要系统管理员重新将其添加进集群才会开始工作。</li> <li>离线后，在offlineThreshold的时长内重新上线，系统将自动启动数据恢复流程，等数据完全恢复后，该节点将开始正常工作。</li></ul> <p>**注意：**如果一个虚拟节点组（包括mnode组）里所归属的每个数据节点都处于离线或unsynced状态，必须等该虚拟节点组里的所有数据节点都上线、都能交换状态信息后，才能选出Master，该虚拟节点组才能对外提供服务。比如整个集群有3个数据节点，副本数为3，如果3个数据节点都宕机，然后2个数据节点重启，是无法工作的，只有等3个数据节点都重启成功，才能对外服务。</p> <h2 id="arbitrator的使用"><a href="#arbitrator的使用" class="header-anchor">#</a> <a id="arbitrator" class="anchor"></a>Arbitrator的使用</h2> <p>如果副本数为偶数，当一个vnode group里一半vnode不工作时，是无法从中选出master的。同理，一半mnode不工作时，是无法选出mnode的master的，因为存在“split brain”问题。为解决这个问题，TDengine引入了Arbitrator的概念。Arbitrator模拟一个vnode或mnode在工作，但只简单的负责网络连接，不处理任何数据插入或访问。只要包含Arbitrator在内，超过半数的vnode或mnode工作，那么该vnode group或mnode组就可以正常的提供数据插入或查询服务。比如对于副本数为2的情形，如果一个节点A离线，但另外一个节点B正常，而且能连接到Arbitrator，那么节点B就能正常工作。</p> <p>TDengine提供一个执行程序，名为 tarbitrator，找任何一台Linux服务器运行它即可。请点击<a href="https://www.taosdata.com/cn/all-downloads/" target="_blank" rel="noopener noreferrer">安装包下载<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，在TDengine Arbitrator Linux一节中，选择适合的版本下载并安装。该程序对系统资源几乎没有要求，只需要保证有网络连接即可。该应用的命令行参数<code>-p</code>可以指定其对外服务的端口号，缺省是6042。配置每个taosd实例时，可以在配置文件taos.cfg里将参数arbitrator设置为Arbitrator的End Point。如果该参数配置了，当副本数为偶数时，系统将自动连接配置的Arbitrator。如果副本数为奇数，即使配置了Arbitrator，系统也不会去建立连接。</p></div> <!----></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/25/2021, 1:29:19 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/zh/dataanalysis/tdengine/09.connections/docs.html" class="prev">与其他工具的连接</a></span> <span class="next"><a href="/zh/dataanalysis/tdengine/11.administrator/docs.html">TDengine的运营与维护</a>
      →
    </span></p></div> </main></div><div class="global-ui"><div></div><div class="add-this"></div><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button title="Close (Esc)" class="pswp__button pswp__button--close"></button> <button title="Share" class="pswp__button pswp__button--share"></button> <button title="Toggle fullscreen" class="pswp__button pswp__button--fs"></button> <button title="Zoom in/out" class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button title="Previous (arrow left)" class="pswp__button pswp__button--arrow--left"></button> <button title="Next (arrow right)" class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/assets/js/app.9ad6f4af.js" defer></script><script src="/assets/js/7.57a5124b.js" defer></script><script src="/assets/js/5.7fd7e714.js" defer></script><script src="/assets/js/86.6150d325.js" defer></script>
  </body>
</html>
