(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{513:function(t,a,e){"use strict";e.r(a);var s=e(10),n=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"黑名单"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#黑名单"}},[t._v("#")]),t._v(" 黑名单")]),t._v(" "),e("p",[t._v("EMQ X 为用户提供了黑名单功能，用户可以通过相关的 HTTP API 将指定客户端加入黑名单以拒绝该客户端访问，除了客户端标识符以外，还支持直接封禁用户名甚至 IP 地址。")]),t._v(" "),e("p",[t._v("相关 HTTP API 的具体使用方法，请参见 "),e("RouterLink",{attrs:{to:"/zh/backend/emqx/advanced/http-api.html#endpoint-banned"}},[t._v("HTTP API - 黑名单")]),t._v("。")],1),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),e("p",[t._v("黑名单只适用于少量客户端封禁需求，如果有大量客户端需要认证管理，请使用 "),e("RouterLink",{attrs:{to:"/zh/backend/emqx/advanced/auth.html"}},[t._v("认证")]),t._v(" 功能。")],1)]),t._v(" "),e("p",[t._v("在黑名单功能的基础上，EMQ X 支持自动封禁那些被检测到短时间内频繁登录的客户端，并且在一段时间内拒绝这些客户端的登录，以避免此类客户端过多占用服务器资源而影响其他客户端的正常使用。")]),t._v(" "),e("p",[t._v("需要注意的是，自动封禁功能只封禁客户端标识符，并不封禁用户名和 IP 地址，即该机器只要更换客户端标识符就能够继续登录。")]),t._v(" "),e("p",[t._v("此功能默认关闭，用户可以在 "),e("code",[t._v("emqx.conf")]),t._v(" 配置文件中将 "),e("code",[t._v("enable_flapping_detect")]),t._v(" 配置项设为 "),e("code",[t._v("on")]),t._v(" 以启用此功能。")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("zone.external.enable_flapping_detect "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" off\n")])])]),e("p",[t._v("用户可以为此功能调整触发阈值和封禁时长，对应配置项如下：")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("flapping_detect_policy "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v(", 1m, 5m\n")])])]),e("p",[t._v("此配置项的值以 "),e("code",[t._v(",")]),t._v(" 分隔，依次表示客户端离线次数，检测的时间范围以及封禁时长，因此上述默认配置即表示如果客户端在 1 分钟内离线次数达到 30 次，那么该客户端使用的客户端标识符将被封禁 5 分钟。当然你也可以使用其他诸如秒、小时在内的时间单位，关于这部分内容，请参见 "),e("RouterLink",{attrs:{to:"/zh/backend/emqx/getting-started/config.html#"}},[t._v("配置说明")]),t._v("。")],1)])}),[],!1,null,null,null);a.default=n.exports}}]);